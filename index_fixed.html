<!DOCTYPE html>

<html lang="ko">
<head>
<meta content="배당 구조(정규확률·공정배당·오버라운드)와 손실 한도/고정 비중을 빠르게 계산하고, 결과를 바탕으로 보증·인증 업체 카드를 비교해 보세요." name="description"/>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, viewport-fit=cover" name="viewport"/>
<!-- 88 MAIN LUXE v13.1 (v12 기능 유지) -->
<!-- ===== SEO 기본 세팅 ===== -->
<title>88st.cloud | 배당 구조 분석기 · 리스크 관리 · 보증 업체</title>
<meta content="88 — 스포츠 배당 분석기와 배당 마진(오버라운드) 계산기를 무료로 제공합니다. 분석기 사용 안내와 인증 놀이터 정보를 한 곳에서 확인하세요." name="description">
<link href="https://88st.cloud/" rel="canonical"/>
<meta content="index,follow" name="robots"/>
<!-- SNS 공유 -->
<meta content="website" property="og:type"/>
<meta content="88 (팔팔커뮤니티)" property="og:site_name"/>
<meta content="88 | 스포츠 배당 분석기 · 배당 마진 계산기 · 인증 놀이터" property="og:title"/>
<meta content="무료 분석기(마진/EV/확률) + 인증 놀이터 안내" property="og:description"/>
<meta content="https://88st.cloud/" property="og:url"/>
<link href="/favicon.ico" rel="icon" type="image/x-icon"/>
<link href="/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
<!-- ===== GA4 (원하면 ID만 교체) ===== -->
<style>
*,
*::before,
*::after{ box-sizing:border-box; }

:root{
  --bg:#0b0b0b;
  --panel:#121212;

  /* (THEME) 로고 색상에 맞춰 자동으로 바뀌는 포인트 컬러 */
  --accent:#5fb2ff;
  --accent2:#a8dcff;
  --accentRGB: 95 178 255;

  /* 기존 변수명 호환(기능 유지) */
  --gold: var(--accent);
  --gold2: var(--accent2);

  --muted:#cfcfcf;

  /* logo shadow presets */
  --logo-shadow-min: drop-shadow(0 10px 22px rgba(0,0,0,.35)) drop-shadow(0 0 14px rgb(var(--accentRGB) / .10));
  --logo-shadow-presence: drop-shadow(0 14px 34px rgba(0,0,0,.55)) drop-shadow(0 0 26px rgb(var(--accentRGB) / .18));
  --logo-shadow: var(--logo-shadow-min);
  --logo-shadow-boost: var(--logo-shadow-presence);
}

html{ scroll-behavior:smooth; }
body{
  margin:0;
  background:
    radial-gradient(1200px 500px at 50% -10%, rgb(var(--accentRGB) / .14), transparent 55%),
    radial-gradient(900px 500px at 10% 20%, rgba(90,160,255,.08), transparent 60%),
    linear-gradient(180deg, #07070a, var(--bg));
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,system-ui;
  color:var(--text);
}
body[data-logo-shadow="presence"]{ --logo-shadow: var(--logo-shadow-presence); }


.notice-bar{
  position:sticky;
  top:0;
  z-index:1600;
  background:linear-gradient(135deg,var(--gold),var(--gold2));
  color:#000;
  font-weight:900;
  font-size:13px;
  padding:10px 12px;
  text-align:center;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
}
.notice-bar a{ color:#000; text-decoration:none; }

#loader{
  position:fixed;
  inset:0;
  z-index:2000;
  background:
    radial-gradient(900px 500px at 50% 30%, rgb(var(--accentRGB) / .18), transparent 55%),
    linear-gradient(180deg,#07070a,#0b0b0b);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  gap:14px;
}
#loader .logoWrap{
  width:min(170px, 52vw);
  aspect-ratio:1/1;
  display:flex;
  align-items:center;
  justify-content:center;
  filter: drop-shadow(0 0 24px rgb(var(--accentRGB) / .22));
}
#loader img{
  width:100%;
  height:100%;
  object-fit:contain;
  animation: pulse 1.4s ease-in-out infinite;
}
#loader .text{ font-weight:900; letter-spacing:.6px; color:#e9e9e9; opacity:.85; font-size:13px; }
@keyframes pulse{ 0%{ transform:scale(1); opacity:.85; } 50%{ transform:scale(1.03); opacity:1; } 100%{ transform:scale(1); opacity:.85; } }
#loader.hide{ opacity:0; pointer-events:none; transition: opacity .35s ease; }

.scam-popup{
  position:fixed; inset:0; background:rgba(0,0,0,.75);
  display:none; align-items:center; justify-content:center;
  z-index:3000; padding:18px;
}
.scam-box{
  background:rgba(17,17,17,.95);
  border:1px solid rgba(255,255,255,.08);
  border-radius:18px;
  padding:22px;
  width:100%;
  max-width:380px;
  text-align:center;
  box-shadow:0 18px 60px rgba(0,0,0,.75);
  backdrop-filter: blur(10px);
}
.scam-box h3{ color:#ff6b6b; margin:0 0 10px; font-weight:900; }
.scam-box p{ font-size:13px; color:#ddd; line-height:1.55; margin:0; }
.scam-box .btn{ margin-top:12px; padding:12px; border-radius:12px; background:linear-gradient(135deg,var(--gold),var(--gold2)); color:#000; font-weight:900; cursor:pointer; user-select:none; }

.header{ text-align:center; padding:18px 0 8px; }
.header .logoLink{ display:inline-flex; align-items:center; justify-content:center; text-decoration:none; }
.header .logoImg{
  width:min(132px, 38vw);
  height:auto;
  display:block;
  padding:10px;
  border-radius:18px;
  background:radial-gradient(120px 60px at 50% 40%, rgb(var(--accentRGB) / .16), transparent 70%);
  filter: drop-shadow(0 0 10px rgb(var(--accentRGB) / .25)) drop-shadow(0 0 24px rgb(var(--accentRGB) / .12));
  animation: logoFloat 3.2s ease-in-out infinite;
}
@keyframes logoFloat{ 0%,100%{ transform:translateY(0) scale(1); } 50%{ transform:translateY(-4px) scale(1.012); } }
@keyframes logoGlow{ 0%,100%{ filter: var(--logo-shadow); opacity:1; } 50%{ filter: var(--logo-shadow-boost); opacity:1; } }
.header .sub{ font-size:12px; color:#9a9a9a; margin-top:6px; }

.section-wrap{ max-width:1100px; margin:0 auto; padding:10px 14px 4px; }
.section{
  background:rgba(18,18,18,.85);
  border:1px solid rgba(255,255,255,.06);
  border-radius:18px;
  padding:14px;
  margin-bottom:14px;
  box-shadow:0 10px 26px rgba(0,0,0,.45);
  backdrop-filter: blur(10px);
}
.section .title{ font-weight:900; font-size:14px; color:var(--gold2); margin-bottom:8px; }
.badge{ display:inline-block; padding:4px 8px; border-radius:999px; font-size:11px; font-weight:900; color:#000; background:linear-gradient(135deg,var(--gold),var(--gold2)); margin-right:6px; }
.section .text{ color:var(--muted); font-size:13px; line-height:1.55; }

/* two-col grid items (v13.1 layout v3) */
.two-col .section{ margin-bottom:0; height:100%; }
.section-header{ display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:8px; }
.section-header .title{ margin-bottom:0; }
.btn-mini{ padding:8px 10px !important; font-size:12px; border-radius:12px; }
.mini-note{ color:#9a9a9a; font-size:12px; font-weight:800; padding:0 2px; }


.two-col{ display:grid; gap:14px; }
@media(min-width:980px){ .two-col{ grid-template-columns: 1fr 1fr; align-items:stretch; } }
.col{ min-width:0; }

.insight-row{ display:flex; gap:8px; align-items:center; margin-top:10px; flex-wrap:wrap; }
select.insight-select{
  background:rgba(0,0,0,.35);
  color:var(--text);
  border:1px solid rgba(255,255,255,.12);
  padding:10px 12px;
  border-radius:12px;
  font-weight:800;
  outline:none;
}
.insight-btn{ background:linear-gradient(135deg,var(--gold),var(--gold2)); border:none; color:#111; padding:10px 12px; border-radius:12px; font-weight:900; cursor:pointer; }

.section input{
  padding:12px; border-radius:12px; border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.35); color:var(--text); font-weight:800; outline:none;
}

.seg-row{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:10px; }
.seg{ flex:1; min-width:140px; padding:10px 12px; border-radius:999px; border:1px solid rgba(255,255,255,.12); background:rgba(0,0,0,.25); color:var(--text); font-weight:900; cursor:pointer; }
.seg.active{ background:linear-gradient(135deg,var(--gold),var(--gold2)); color:#111; border-color:transparent; }

.cta-row{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
.cta-row a{ flex:1; min-width:160px; }
.analyze-btn{
  position:relative;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  width:100%;
  padding:15px 16px;
  border-radius:18px;
  font-weight:900;
  text-decoration:none;
  text-align:left;
  transition: transform .16s ease, box-shadow .16s ease, filter .16s ease;
  overflow:hidden;
  user-select:none;
}
.analyze-btn .label{ display:block; line-height:1.05; }
.analyze-btn .sub{ display:block; margin-top:6px; font-size:11px; font-weight:900; opacity:.9; }
.analyze-btn .icon{ display:inline-flex; align-items:center; justify-content:center; }
.analyze-btn::before{
  content:"";
  position:absolute;
  inset:-2px;
  background:linear-gradient(120deg, rgba(255,255,255,.18), transparent 35%, rgba(255,255,255,.10));
  transform: translateX(-40%) skewX(-12deg);
  opacity:.65;
  transition: transform .55s ease;
}
.analyze-btn:hover{ transform: translateY(-2px); box-shadow:0 18px 44px rgba(0,0,0,.45); }
.analyze-btn:hover::before{ transform: translateX(40%) skewX(-12deg); }

.analyze-btn.primary{
  color:#0b0b0b;
  background:linear-gradient(135deg,var(--gold),var(--gold2));
  box-shadow:0 16px 40px rgb(var(--accentRGB) / .18);
}
.analyze-btn.primary:hover{ filter:brightness(1.03); }

.analyze-btn.secondary{
  color:var(--text);
  background:linear-gradient(135deg,#2d7dff,#6bdcff);
  box-shadow:0 16px 40px rgba(80,160,255,.16);
}
.analyze-btn.secondary:hover{ filter:brightness(1.03); }
.analyze-btn .sub{ display:block; margin-top:4px; font-size:11px; font-weight:900; opacity:.9; }

.log{ display:grid; gap:8px; }
.log-item{
  border:1px solid rgba(255,255,255,.08);
  background:rgba(0,0,0,.28);
  border-radius:14px;
  padding:10px 12px;
  display:flex;
  justify-content:space-between;
  gap:10px;
  align-items:flex-start;
}
.log-date{ font-weight:900; color:#f5e27a; font-size:12px; white-space:nowrap; }
.log-text{ color:#cfcfcf; font-size:13px; line-height:1.45; flex:1; }

.faq details{ border:1px solid rgba(255,255,255,.08); background:rgba(0,0,0,.28); border-radius:14px; padding:10px 12px; }
.faq details + details{ margin-top:10px; }
.faq summary{ cursor:pointer; font-weight:900; color:var(--text); list-style:none; }
.faq summary::-webkit-details-marker{ display:none; }
.faq .a{ margin-top:8px; color:#cfcfcf; font-size:13px; line-height:1.55; }

.vendor-header{
  max-width:1100px;
  margin:14px auto 10px;
  padding:16px 14px;
  text-align:center;
  border-radius:18px;
  background:rgba(18,18,18,.85);
  border:1px solid rgba(255,255,255,.06);
  box-shadow:0 10px 26px rgba(0,0,0,.45);
  backdrop-filter: blur(10px);
  position:relative;
  overflow:hidden;
}
.vendor-header::before{
  content:"";
  position:absolute;
  inset:-40px;
  background:radial-gradient(700px 240px at 50% 0%, rgb(var(--accentRGB) / .20), transparent 60%);
  pointer-events:none;
}
.vendor-header h2{ position:relative; margin:0; font-size:18px; font-weight:900; color:var(--gold2); letter-spacing:.2px; }
.vendor-header p{ position:relative; margin:6px 0 0; font-size:13px; color:#a7a7a7; }
.pill-row{ position:relative; display:flex; gap:8px; justify-content:center; flex-wrap:wrap; margin-top:12px; }
.pill{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:9px 12px;
  border-radius:999px;
  font-weight:900;
  text-decoration:none;
  color:#0b0b0b;
  background:linear-gradient(135deg,var(--gold),var(--gold2));
  border:1px solid rgba(255,255,255,.12);
}
.pill:hover{ filter:brightness(1.03); }
.pill.ghost{
  background:rgba(255,255,255,.08);
  color:#e8e8e8;
  border:1px solid rgba(255,255,255,.14);
}

.vendor-tools{
  position:sticky;
  top:10px;
  z-index:80;
  max-width:1100px;
  margin:0 auto 10px;
  padding:10px 14px 12px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(12,12,14,.72);
  backdrop-filter: blur(14px);
  box-shadow:0 18px 50px rgba(0,0,0,.45);
}
.vendor-tools::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  pointer-events:none;
  background: radial-gradient(600px 140px at 40% 0%, rgb(var(--accentRGB) / .10), transparent 60%);
  opacity:.9;
}
.vendor-tools > *{ position:relative; }
@media (max-width:640px){
  .vendor-tools{ top:0; margin:0 auto 8px; border-radius:0; border-left:none; border-right:none; }
  .v-controls{ gap:8px; align-items:stretch; }
  .v-control{ min-width: calc(50% - 4px); flex:1; }
  .v-input{ padding:12px 12px; font-size:14px; }
  .v-toggle{ width:100%; justify-content:space-between; padding:12px 12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.18); }
}
.v-input{ width:100%; padding:12px 12px; border-radius:14px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.28); color:var(--text); outline:none; font-weight:800; }
.v-row{ display:flex; gap:8px; flex-wrap:wrap; margin-top:10px; }
.v-chip{ padding:9px 12px; border-radius:999px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.25); color:var(--text); font-weight:900; cursor:pointer; transition: transform .14s ease, filter .14s ease, border-color .14s ease; }
.v-chip:hover{ transform: translateY(-1px); filter:brightness(1.03); border-color:var(--muted-2); }
.v-chip.active{ background:linear-gradient(135deg,var(--gold),var(--gold2)); color:#111; border-color:transparent; }

/* ===== 새 컨트롤(배찌 제거 버전) ===== */
.v-controls{ display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; align-items:flex-end; }
.v-control{ display:flex; flex-direction:column; gap:6px; min-width:120px; }
.v-control label{ font-size:12px; color:var(--muted); font-weight:800; letter-spacing:-.2px; }
.v-select{
  width:100%;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.28);
  color:var(--text);
  outline:none;
  font-weight:900;
}
.v-select:focus{
  border-color:rgba(255,215,112,.55);
  box-shadow:0 0 0 3px rgba(255,215,112,.12);
}
.v-toggle{
  display:flex;
  gap:10px;
  align-items:center;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(0,0,0,.22);
  cursor:pointer;
  user-select:none;
}
.v-toggle input{ display:none; }
.v-switch{
  width:46px;
  height:26px;
  border-radius:999px;
  background:rgba(255,255,255,.14);
  position:relative;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.12);
  transition: background .15s ease;
}
.v-switch::after{
  content:"";
  width:22px;
  height:22px;
  border-radius:50%;
  background:rgba(255,255,255,.86);
  position:absolute;
  top:2px;
  left:2px;
  transition: transform .15s ease;
}
.v-toggle input:checked + .v-switch{
  background:linear-gradient(135deg,var(--gold),var(--gold2));
}
.v-toggle input:checked + .v-switch::after{
  transform: translateX(20px);
}
.v-toggle-text{ font-weight:900; font-size:12px; color:var(--text); }
.v-small{ margin-top:8px; font-size:12px; color:#a7a7a7; }
#evAutoHint{ display:none; }

.vendor-grid{ position:relative; display:grid; gap:14px; padding:0 14px 10px; max-width:1100px; margin:0 auto; }

/* ===== 섹션(보증/인증) ===== */
.vendor-sections{ display:flex; flex-direction:column; gap:18px; }
.vendor-section{ position:relative; }
.vendor-section-head{
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 6px 8px;
}
.vsh-left{ display:flex; align-items:baseline; gap:10px; }
.vsh-title{
  font-size:16px; font-weight:1000; letter-spacing:-.2px;
}
.vsh-meta{ font-size:12px; color:var(--muted); font-weight:700; }
.vsh-chip{
  display:inline-flex; align-items:center; justify-content:center;
  padding:6px 10px;
  border-radius:999px;
  font-size:11px;
  font-weight:1000;
  color:#0b0b0b;
  background:linear-gradient(135deg,var(--gold),var(--gold2));
  box-shadow:0 10px 24px rgba(0,0,0,.35);
}
.vendor-section[data-section="verified"] .vsh-chip{
  color:#111;
  background:linear-gradient(135deg,#2d7dff,#6bdcff);
}

/* (UI) 카드: 메인 화면에서는 이미지 전용 */
.card.card--imageOnly{ padding:0; }
.card.card--imageOnly .img-box{ border-radius:18px; }
.card.card--imageOnly .img-title{
  position:absolute;
  left:10px; right:10px; bottom:10px;
  padding:8px 10px;
  border-radius:14px;
  font-size:12px;
  font-weight:900;
  color:var(--text);
  background:rgba(0,0,0,.38);
  border:1px solid rgba(255,255,255,.12);
  backdrop-filter: blur(10px);
  opacity:0;
  transform: translateY(6px);
  transition: opacity .16s ease, transform .16s ease;
}
.card.card--imageOnly:hover .img-title,
.card.card--imageOnly:focus-within .img-title{
  opacity:1;
  transform: translateY(0);
}
@media (hover:none){
  .card.card--imageOnly .img-title{ display:none; }
}

.vendor-grid::before{
  content:"";
  position:absolute;
  inset:-18px;
  background:
    radial-gradient(900px 320px at 50% 0%, rgb(var(--accentRGB) / .12), transparent 60%),
    radial-gradient(700px 320px at 10% 20%, rgba(90,160,255,.10), transparent 60%);
  pointer-events:none;
  z-index:0;
}
.vendor-grid > .card{ position:relative; z-index:1; }
@media(max-width:767px){ .vendor-grid{ grid-template-columns:repeat(2, 1fr); } }
@media(min-width:768px) and (max-width:1023px){ .vendor-grid{ grid-template-columns:repeat(3, 1fr); } }
@media(min-width:1024px){ .vendor-grid{ grid-template-columns:repeat(4, 1fr); } }

.card{
  background:rgba(18,18,18,.85);
  border:1px solid rgba(255,255,255,.06);
  border-radius:18px;
  box-shadow:0 10px 30px rgba(0,0,0,.55);
  overflow:hidden;
  cursor:pointer;
  backdrop-filter: blur(10px);
  transition: transform .16s ease, box-shadow .16s ease, border-color .16s ease, filter .16s ease;
}
.card:hover{
  transform: translateY(-4px);
  border-color: rgba(245,226,122,.22);
  box-shadow:0 16px 46px rgba(0,0,0,.62);
  filter:brightness(1.02);
}
.tag-badge{
  position:absolute;
  top:10px;
  left:10px;
  z-index:2;
  padding:6px 10px;
  border-radius:999px;
  font-size:11px;
  font-weight:900;
  border:1px solid rgba(255,255,255,.16);
  backdrop-filter: blur(10px);
}
.tag-badge.rec{
  color:#0b0b0b;
  background:linear-gradient(135deg,var(--gold),var(--gold2));
}
.tag-badge.new{
  color:#111;
  background:linear-gradient(135deg,#2d7dff,#6bdcff);
}
.tag-badge.ad{
  color:var(--text);
  background:rgba(255,255,255,.10);
}
.img-box{
  position:relative;
  width:100%;
  aspect-ratio: 4 / 5;
  background:#000;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
}
.img-box::before{
  content:"";
  position:absolute;
  inset:-18px;
  background-image:var(--bgimg);
  background-size:cover;
  background-position:center;
  filter:blur(20px);
  opacity:.42;
}
.img-box::after{
  content:"";
  position:absolute;
  inset:0;
  background:linear-gradient(180deg,rgba(0,0,0,.12),rgba(0,0,0,.62));
}
.img-box picture, .img-box img{
  position:relative;
  z-index:1;
  width:100%;
  height:100%;
}
.img-box img{ object-fit:contain; }

.content{ padding:10px 10px 12px; }
.site{ font-size:15px; font-weight:900; }
.desc{ margin-top:6px; font-size:12px; color:#bdbdbd; line-height:1.35; min-height:32px; }
.code{ margin-top:8px; font-size:12px; color:var(--gold2); font-weight:900; }


.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.75);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
  padding:18px;
}
.popup-box{
  background:rgba(17,17,17,.95);
  border:1px solid rgba(255,255,255,.08);
  border-radius:18px;
  padding:22px;
  width:100%;
  max-width:380px;
  text-align:center;
  box-shadow:0 18px 60px rgba(0,0,0,.75);
  backdrop-filter: blur(10px);
}
.popup-box h2{ color:var(--gold2); margin:0 0 10px; font-weight:900; }
.btn{
  width:100%;
  padding:12px;
  margin-top:10px;
  border-radius:12px;
  font-weight:900;
  cursor:pointer;
  text-decoration:none;
  display:block;
  user-select:none;
}
.go{ background:linear-gradient(135deg,var(--gold),var(--gold2)); color:#0b0b0b; }
.copy{ background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)); color:var(--text); border:1px solid rgb(var(--accentRGB) / .22); box-shadow:0 10px 30px rgba(0,0,0,.35); }
.more{ background:linear-gradient(180deg, rgb(var(--accentRGB) / .16), rgba(255,255,255,.04)); color:var(--text); border:1px solid rgb(var(--accentRGB) / .26); box-shadow:0 10px 30px rgba(0,0,0,.35); }
.telegram a{ display:block; margin-top:10px; color:#45b3ff; text-decoration:none; font-weight:900; }

.reason-box{
  margin-top:12px;
  padding:10px 12px;
  border-radius:14px;
  background:rgba(0,0,0,.28);
  border:1px solid rgba(255,255,255,.08);
  text-align:left;
}
.reason-title{ font-weight:900; color:#f5e27a; font-size:12px; margin:0 0 8px; }
.reason-line{ font-size:12px; color:#ddd; line-height:1.5; }
.reason-line + .reason-line{ margin-top:4px; }

/* 하단 랜딩 링크 아주 작게 */
.landing-seo {
  max-width:1100px;
  margin:36px auto 20px;
  padding:0 14px;
}
.landing-seo h3{ font-size:10px; color:#777; margin:0 0 6px; font-weight:700; }
.landing-seo .links{ display:flex; flex-wrap:wrap; gap:6px; }
.landing-seo a{
  font-size:10px;
  color:#9a9a9a;
  text-decoration:none;
  padding:5px 7px;
  border-radius:8px;
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.06);
}
.landing-seo a:hover{ color:#f5e27a; border-color:#f5e27a; }

/* 플로팅 CTA */
.fab{
  position:fixed;
  right:14px;
  bottom:14px;
  z-index:1700;
  display:flex;
  flex-direction:column;
  gap:8px;
}
.fab a{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:12px 12px;
  border-radius:999px;
  font-weight:900;
  text-decoration:none;
  background:linear-gradient(135deg,var(--gold),var(--gold2));
  color:#111;
  box-shadow:0 12px 30px rgba(0,0,0,.45);
}
.fab a.secondary{
  background:rgba(255,255,255,.08);
  color:var(--text);
  border:1px solid rgba(255,255,255,.12);
}

@media (prefers-reduced-motion: reduce){
  *{ scroll-behavior:auto !important; }
  .header .logoImg, #loader img{ animation:none !important; }
  .analyze-btn::before{ display:none !important; }
  .card, .analyze-btn, .v-chip{ transition:none !important; }
}


/* ===== 카드 액션(공유) ===== */
.card-actions{
  display:flex;
  justify-content:flex-end;
  gap:8px;
  margin-top:10px;
}
.mini-share{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:8px 10px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.06);
  color:var(--text);
  font-size:12px;
  font-weight:900;
  cursor:pointer;
  user-select:none;
  transition:transform .14s ease, filter .14s ease, border-color .14s ease;
}
.mini-share:hover{
  transform: translateY(-1px);
  filter: brightness(1.05);
  border-color:var(--muted-2);
}

/* ===== 공유 팝업 ===== */
.share-sub{ margin:6px 0 12px; color:#a7a7a7; font-size:12px; }
.share-preview{
  border-radius:16px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.28);
  padding:12px;
}
#shareCanvas{
  width:100%;
  height:auto;
  display:block;
  border-radius:14px;
}
.share-row{
  display:flex;
  gap:10px;
  margin-top:12px;
  align-items:center;
}
.share-row input{
  flex:1;
}
.share-actions{
  display:flex;
  gap:10px;
  margin-top:10px;
  flex-wrap:wrap;
}
.btn.share{
  background:linear-gradient(135deg, rgb(var(--accentRGB) / .95), rgba(255,204,82,.95));
  color:#111;
  border:1px solid rgba(0,0,0,.1);
}

/* ===== 로컬 인사이트(가짜 방문자 대신) ===== */
.insights-wrap{ max-width:1100px; margin:18px auto 36px; padding:0 14px; }
.insights-head{ display:flex; align-items:flex-end; justify-content:space-between; gap:10px; margin:12px 0 10px; }
.insights-head .h{ font-size:16px; font-weight:900; letter-spacing:-.2px; }
.insights-head .sub{ color:var(--muted); font-size:12px; line-height:1.4; }
.insights-grid{ display:grid; gap:14px; }
@media(max-width:767px){ .insights-grid{ grid-template-columns:1fr; } }
@media(min-width:768px) and (max-width:1023px){ .insights-grid{ grid-template-columns:1fr 1fr; } }
@media(min-width:1024px){ .insights-grid{ grid-template-columns:1.1fr .9fr .9fr; } }

.stat-card{ cursor:default; }
.stat-card:hover{ transform:none; border-color:var(--muted-2); box-shadow:0 10px 30px rgba(0,0,0,.55); filter:none; }
.stat-top{ padding:14px 14px 8px; }
.stat-title{ font-weight:900; font-size:14px; display:flex; align-items:center; gap:8px; }
.stat-meta{ color:var(--muted); font-size:12px; margin-top:4px; line-height:1.35; }
.stat-list{ padding:8px 14px 14px; display:grid; gap:10px; }
.stat-item{ display:flex; justify-content:space-between; gap:10px; align-items:center; }
.stat-left{ display:flex; align-items:center; gap:10px; min-width:0; }
.stat-rank{ width:18px; text-align:center; color:#f5e27a; font-weight:900; font-size:12px; flex:0 0 auto; }
.stat-link{ background:transparent; border:0; padding:0; color:var(--text); font-size:13px; font-weight:800; cursor:pointer; text-align:left; max-width:100%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.stat-link:hover{ text-decoration:underline; }
.stat-count{ color:var(--muted); font-size:12px; font-weight:800; flex:0 0 auto; }
.stat-actions{ padding:0 14px 14px; display:flex; gap:10px; flex-wrap:wrap; }
.small-btn{
  padding:8px 10px;
  border-radius:12px;
  border:1px solid rgb(var(--accentRGB) / .22);
  background:linear-gradient(180deg, rgb(var(--accentRGB) / .12), rgba(255,255,255,.04));
  color:var(--text);
  font-size:12px;
  font-weight:900;
  cursor:pointer;
  user-select:none;
  box-shadow:0 10px 30px rgba(0,0,0,.28);
}
.small-btn:hover{ filter:brightness(1.08); border-color:var(--muted-2); }
.small-btn:active{ transform: translateY(1px); }
.note-mini{ color:var(--muted); font-size:12px; padding:0 14px 14px; line-height:1.35; }


/* ==== UI patch v3 (2026-02-05): glass notice bar, benefit chips, mobile compact controls ==== */

/* glass notice bar (less distracting) */
.notice-bar{
  position:sticky;
  top:10px;
  z-index:1600;
  width:min(980px, calc(100% - 18px));
  margin:10px auto 0;
  padding:9px 12px;
  border-radius:999px;
  background:rgba(18,18,22,.55);
  border:1px solid rgba(255,255,255,.12);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  color:var(--text);
  font-weight:900;
  font-size:13px;
  text-align:center;
  box-shadow: 0 12px 30px rgba(0,0,0,.28);
  transition: opacity .2s ease, background .2s ease, border-color .2s ease, padding .2s ease, transform .2s ease;
}
.notice-bar a{
  color:inherit;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  text-decoration:none;
}
.notice-bar::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:999px;
  background:linear-gradient(90deg, rgba(255,255,255,.07), rgba(255,255,255,0));
  pointer-events:none;
  opacity:.55;
}
.notice-bar.is-scrolled{
  opacity:.62;
  background:rgba(18,18,22,.36);
  border-color:var(--muted-2);
  padding:7px 12px;
  transform: translateY(-1px);
}
@media (max-width:560px){
  .notice-bar{ top:8px; margin:8px auto 0; font-size:12px; }
  .notice-bar.is-scrolled{ padding:6px 10px; }
}

/* benefit keyword chips */
.chip-row{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  margin:8px 0 6px;
}
.chip-row:empty{ display:none; }
.kchip{
  font-size:11px;
  font-weight:900;
  padding:4px 8px;
  border-radius:999px;
  background: rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.14);
  color:var(--text);
  letter-spacing:.15px;
}

/* ===== tool card (bonus-checklist) ===== */
.tool-card-grid{
  margin-top:12px;
}
.tool-card-link{
  position:relative;
  display:block;
  text-decoration:none;
  color:var(--text);
  padding:14px 14px 12px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.22);
  box-shadow: 0 12px 34px rgba(0,0,0,.48);
  overflow:hidden;
  transition: transform .16s ease, box-shadow .16s ease, filter .16s ease, border-color .16s ease;
}
.tool-card-link::before{
  content:"";
  position:absolute;
  inset:-2px;
  background: radial-gradient(520px 180px at 35% 0%, rgb(var(--accentRGB) / .18), transparent 60%),
              radial-gradient(520px 220px at 85% 10%, rgba(90,160,255,.14), transparent 62%);
  pointer-events:none;
  opacity:.9;
}
.tool-card-link:hover{
  transform: translateY(-3px);
  border-color: rgba(245,226,122,.20);
  box-shadow: 0 18px 52px rgba(0,0,0,.62);
  filter: brightness(1.02);
}
.tool-card-head{
  position:relative;
  display:flex;
  gap:12px;
  align-items:center;
}
.tool-card-icon{
  width:44px;
  height:44px;
  border-radius:14px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.12);
  color:var(--text);
  flex:0 0 auto;
}
.tool-card-title{
  font-weight:900;
  font-size:15px;
  letter-spacing:-.2px;
}
.tool-card-desc{
  margin-top:3px;
  font-size:12px;
  color:var(--muted);
  font-weight:800;
  line-height:1.35;
}
.tool-card-foot{
  position:relative;
  display:flex;
  justify-content:space-between;
  gap:10px;
  align-items:flex-end;
  margin-top:8px;
}
.tool-card-cta{
  font-weight:900;
  color: rgba(245,226,122,.98);
  font-size:12px;
}
.tool-card-note{
  font-size:11px;
  color:var(--muted);
  font-weight:800;
}

/* mobile compact filter/sort: one-line summary + dropdown */
@media (max-width:560px){
  .v-compact{ display:block; margin-top:10px; }
  .v-compact summary{
    list-style:none;
    cursor:pointer;
    user-select:none;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    padding:10px 12px;
    border-radius:14px;
    background: rgba(255,255,255,0.06);
    border:1px solid rgba(255,255,255,0.12);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
  .v-compact summary::-webkit-details-marker{ display:none; }
  .v-compact .sum{
    font-weight:900;
    font-size:12px;
    color:var(--text);
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  .v-compact .caret{
    opacity:.8;
    font-size:14px;
    transition: transform .18s ease;
  }
  .v-compact[open] summary{
    border-color: rgb(var(--accentRGB) / 0.22);
    background: rgba(255,255,255,0.08);
  }
  .v-compact[open] .caret{ transform: rotate(180deg); }
  .v-compact .v-controls{
    margin-top:10px;
    padding:10px 8px 0;
  }
}
@media (min-width:561px){
  .v-compact{ display:none !important; }
}



/* ==== UI patch v4 (2026-02-07): premium midnight + two-card hero ==== */
:root{
  --radius-xl:26px;
  --radius-lg:22px;
  --glass: rgba(12,14,22,.60);
  --glass2: rgba(10,12,18,.52);
  --stroke: rgba(255,255,255,.10);
  --stroke2: rgba(255,255,255,.14);
  --shadow-lg: 0 28px 96px rgba(0,0,0,.66);
  --shadow-md: 0 16px 52px rgba(0,0,0,.52);
}

body{
  position:relative;
  background:
    radial-gradient(1200px 620px at 50% -10%, rgb(var(--accentRGB) / .18), transparent 58%),
    radial-gradient(900px 540px at 15% 25%, rgba(120,170,255,.10), transparent 55%),
    radial-gradient(900px 640px at 85% 35%, rgba(80,140,255,.08), transparent 55%),
    linear-gradient(180deg, #05060b 0%, #060612 60%, #040408 100%);
}
/* subtle grain + vignette */
body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:-1;
  opacity:.07;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.45'/%3E%3C/svg%3E");
  mix-blend-mode:overlay;
}
body::after{
  content:"";
  position:fixed;
  inset:-1px;
  pointer-events:none;
  z-index:-1;
  background:
    radial-gradient(900px 500px at 50% 0%, rgba(0,0,0,0), rgba(0,0,0,.35) 58%, rgba(0,0,0,.78) 100%);
}
/* make sure main content stays above overlays */

/* header becomes premium glass container */
.header{
  width:min(1100px, calc(100% - 28px));
  margin:14px auto 12px;
  padding:16px 14px 12px;
  border-radius: var(--radius-xl);
  background: var(--glass);
  border:1px solid var(--stroke);
  box-shadow: var(--shadow-md);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  overflow:hidden;
}
.header::before{
  content:"";
  position:absolute;
  inset:-40px;
  background:
    radial-gradient(700px 280px at 50% 0%, rgb(var(--accentRGB) / .22), transparent 60%),
    radial-gradient(520px 260px at 20% 20%, rgba(120,170,255,.10), transparent 60%);
  opacity:.85;
  pointer-events:none;
}
.header .logoLink{ position:relative; }
.header .logoImg{
  width:min(120px, 34vw);
  padding:12px 14px;
  border-radius:20px;
  background: rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.10);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  box-shadow: 0 18px 60px rgba(0,0,0,.35);
  filter: drop-shadow(0 0 26px rgb(var(--accentRGB) / .14));
}

/* sections: unified premium panels */
.section,
.vendor-header,
.vendor-tools,
.faq-box{
  background: var(--glass);
  border:1px solid var(--stroke);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}
.section{ padding:18px; }
@media (max-width:560px){
  .section{ padding:16px 14px; }
}

/* analyzer hero: two-card layout like mockup */
#analyzerSection{
  border-color: rgb(var(--accentRGB) / .20);
  background:
    radial-gradient(900px 360px at 50% 0%, rgb(var(--accentRGB) / .16), transparent 60%),
    var(--glass);
}
#analyzerSection .cta-row{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
  margin-top:14px;
}
@media (max-width:760px){
  #analyzerSection .cta-row{ grid-template-columns:1fr; }
}
.analyze-btn{
  position:relative;
  justify-content:flex-start;
  gap:14px;
  padding:18px 18px;
  min-height:92px;
  text-align:left;
  border-radius: var(--radius-lg);
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.14);
  box-shadow: 0 22px 70px rgba(0,0,0,.45);
}
.analyze-btn::before{
  opacity:.30;
}
.analyze-btn::after{
  content:"→";
  position:absolute;
  right:16px;
  top:50%;
  transform: translateY(-50%);
  font-weight:1000;
  opacity:.85;
}
.analyze-btn .icon{
  width:48px;
  height:48px;
  border-radius:16px;
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.12);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.05);
}
.analyze-btn.primary{
  color:var(--text);
  background: linear-gradient(180deg, rgb(var(--accentRGB) / .24), rgba(255,255,255,.04));
  border-color: rgb(var(--accentRGB) / .28);
  box-shadow: 0 22px 70px rgb(var(--accentRGB) / .10);
}
.analyze-btn.secondary{
  color:var(--text);
  background: rgba(255,255,255,.05);
  border-color:var(--muted-2);
  box-shadow: 0 22px 70px rgba(0,0,0,.52);
}
.analyze-btn:hover{
  transform: translateY(-2px);
  filter: brightness(1.03) saturate(1.03);
}

/* buttons: match premium palette */
.insight-btn,
.small-btn,
.btn.copy,
.btn.more{
  border-color: rgb(var(--accentRGB) / .22) !important;
}
.insight-btn{
  background: linear-gradient(135deg, rgb(var(--accentRGB) / .92), rgb(var(--accentRGB) / .62));
  color:#07131a;
  box-shadow: 0 16px 44px rgb(var(--accentRGB) / .12);
}
.insight-btn:hover{ filter: brightness(1.03) saturate(1.05); }
.btn.go{
  background: linear-gradient(135deg, rgb(var(--accentRGB) / .95), rgb(var(--accentRGB) / .70));
  color:#07131a;
}

/* cards: slightly more premium */
.card{
  background: var(--glass);
  border:1px solid rgba(255,255,255,.08);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-md);
}
.card:hover{
  border-color: rgb(var(--accentRGB) / .20);
  box-shadow: var(--shadow-lg);
}
.card.card--imageOnly .img-box{ border-radius: var(--radius-lg); }
.img-box::after{ background:linear-gradient(180deg,rgba(0,0,0,.08),rgba(0,0,0,.66)); }

/* vendor section headers: less intrusive */
.vendor-section-head{
  padding:8px 4px 6px;
  opacity:.92;
}
.vsh-title{ font-size:15px; }
.vsh-chip{
  background: rgba(255,255,255,.06);
  color:var(--text);
  border:1px solid rgb(var(--accentRGB) / .18);
  box-shadow:none;
}
.vendor-section[data-section="verified"] .vsh-chip{
  background: rgba(255,255,255,.05);
  border-color:var(--muted-2);
}

/* notice bar: more subtle, premium line */
.notice-bar{
  background: rgba(12,14,22,.46);
  border-color:var(--muted-2);
  box-shadow: 0 16px 46px rgba(0,0,0,.34);
}
.notice-bar::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:999px;
  border:1px solid rgb(var(--accentRGB) / .22);
  opacity:.35;
  pointer-events:none;
}
.notice-bar.is-scrolled{
  opacity:.55;
  background: rgba(12,14,22,.34);
}

/* vendor tools: keep sticky but match new glass */
.vendor-tools{
  background: rgba(12,14,22,.62);
  border-color:var(--muted-2);
}
.vendor-tools::before{ opacity:.75; }


/* ===== v13.1 polish (premium & less-blue) ===== */

/* 1) remove all "TODAY/MAIN/CHECK..." badges in section titles */
.title .badge{ display:none !important; }

/* 2) header/logo: 카드박스 제거 + 로고만 또렷하게 */
.header{
  width:auto !important;
  margin:14px auto 10px !important;
  padding:18px 0 8px !important;
  border-radius:0 !important;
  background:transparent !important;
  border:0 !important;
  box-shadow:none !important;
  backdrop-filter:none !important;
  -webkit-backdrop-filter:none !important;
  overflow:visible !important;
}
.header::before{ content:none !important; display:none !important; }
.header .logoLink{ display:inline-flex !important; align-items:center; justify-content:center; }

.header .logoImg{
  width:min(156px, 46vw) !important;

  /* 카드박스 느낌 제거 */
  padding:0 !important;
  border-radius:0 !important;
  background:transparent !important;
  border:0 !important;
  box-shadow:none !important;

  /* 2단계 그림자 프리셋(미니멀/존재감) */
  filter: var(--logo-shadow) !important;
  will-change: transform, filter;
  transform-origin: 50% 50%;

  /* 로고 플로팅 + 은은한 글로우 */
  animation:
    logoFloat 6.8s ease-in-out infinite,
    logoGlow 3.6s ease-in-out infinite !important;
}
/* 3) buttons: reduce heavy blue fills, keep premium glass + subtle accent */
.insight-btn{
  background: rgba(255,255,255,.07) !important;
  color:var(--text) !important;
  border:1px solid rgba(255,255,255,.14) !important;
  box-shadow: 0 14px 40px rgba(0,0,0,.45) !important;
}
.insight-btn:hover{
  background: rgba(255,255,255,.09) !important;
  border-color: rgb(var(--accentRGB) / .22) !important;
  box-shadow: 0 18px 52px rgba(0,0,0,.55), 0 0 0 1px rgb(var(--accentRGB) / .10) inset !important;
  filter:none !important;
}
.small-btn,
.btn.copy,
.btn.more{
  background: rgba(255,255,255,.06) !important;
  color:var(--text) !important;
  border:1px solid rgba(255,255,255,.14) !important;
  box-shadow: 0 12px 34px rgba(0,0,0,.38) !important;
}
.small-btn:hover,
.btn.copy:hover,
.btn.more:hover{
  background: rgba(255,255,255,.08) !important;
  border-color: rgb(var(--accentRGB) / .20) !important;
}
.btn.go{
  background: rgba(255,255,255,.07) !important;
  color:var(--text) !important;
  border:1px solid rgb(var(--accentRGB) / .18) !important;
  box-shadow: 0 14px 40px rgba(0,0,0,.45) !important;
}
.btn.go:hover{
  background: rgba(255,255,255,.09) !important;
  border-color: rgb(var(--accentRGB) / .26) !important;
}

/* optional: make active segment less "painted" */
.seg.active{
  background: linear-gradient(180deg, rgb(var(--accentRGB) / .20), rgba(255,255,255,.06)) !important;
  color:var(--text) !important;
  border-color: rgb(var(--accentRGB) / .18) !important;
}

/* 4) thumbnail premium tone: slightly lower saturation, higher contrast */
.card.card--imageOnly .img-box img{
  filter: contrast(1.09) saturate(.90) brightness(.99);
  transform: translateZ(0);
}
.card.card--imageOnly:hover .img-box img{
  filter: contrast(1.11) saturate(.94) brightness(1.01);
}
.img-box::after{
  background: linear-gradient(180deg, rgba(0,0,0,.02), rgba(0,0,0,.74)) !important;
}


/* ===== Popup CTA 3-tier (v13.1 final) ===== */
.popup-cta{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin-top:14px;
}
.popup-aux{
  display:flex;
  gap:10px;
  margin-top:10px;
}
.popup-aux .btn{ flex:1; }

/* make hierarchy clearer without breaking existing classes */
.btn.primary{
  background: rgba(255,255,255,.08) !important;
  border:1px solid rgb(var(--accentRGB) / .22) !important;
  box-shadow: 0 16px 44px rgba(0,0,0,.48) !important;
}
.btn.secondary{
  background: rgba(255,255,255,.06) !important;
  border:1px solid rgba(255,255,255,.14) !important;
}
.btn.tertiary{
  background: rgba(255,255,255,.05) !important;
  border:1px solid rgba(255,255,255,.12) !important;
}
.btn.ghost{
  background: rgba(0,0,0,.18) !important;
  border:1px solid rgba(255,255,255,.12) !important;
  box-shadow: none !important;
}
.btn.primary:hover,
.btn.secondary:hover,
.btn.tertiary:hover,
.btn.ghost:hover{
  filter: brightness(1.06);
}



/* ===== quick memo (fills right column after guide/log removal) ===== */
.memo-area{
  width:100%;
  margin-top:10px;
  padding:12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.22);
  color:#eaeaea;
  outline:none;
  min-height:112px;
  resize:vertical;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.04);
}
.memo-area:focus{
  border-color: rgba(var(--accentRGB), .38);
  box-shadow:
    0 0 0 2px rgba(var(--accentRGB), .12),
    inset 0 1px 0 rgba(255,255,255,.04);
}
.memo-actions{
  display:flex;
  gap:10px;
  margin-top:10px;
}
.insight-btn.secondary{
  background: rgba(0,0,0,.20);
  border:1px solid rgba(255,255,255,.12);
  color:#e6e6e6;
  box-shadow:none;
}



/* ===== Risk Calc (v13.1) ===== */
.chip-row{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-top:2px;
}
.chip{
  border-radius:999px;
  padding:6px 10px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.06);
  color:var(--text);
  font-weight:800;
  font-size:12px;
  cursor:pointer;
  transition: transform .15s ease, background .2s ease, border-color .2s ease, box-shadow .2s ease;
  box-shadow: 0 10px 22px rgba(0,0,0,.25);
}
.chip:hover{
  transform: translateY(-1px);
  background: rgba(255,255,255,.09);
  border-color:var(--muted-2);
}
.chip:active{
  transform: translateY(0px) scale(.99);
}

/* ===== Floating Action Buttons (UI 통일) ===== */
.fab{
  right:16px;
  bottom:16px;
  gap:10px;
}
.fab a{
  background: rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.14);
  color:var(--text);
  box-shadow: 0 18px 44px rgba(0,0,0,.55);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  transition: transform .15s ease, background .2s ease, border-color .2s ease, box-shadow .2s ease;
}
.fab a:not(.secondary){
  background: linear-gradient(180deg, rgb(var(--accentRGB) / .14), rgba(255,255,255,.04));
  border-color: rgb(var(--accentRGB) / .22);
}
.fab a:hover{
  transform: translateY(-1px);
  background: rgba(255,255,255,.09);
  border-color:var(--muted-2);
}
.fab a:not(.secondary):hover{
  border-color: rgb(var(--accentRGB) / .32);
}
.fab a:active{
  transform: translateY(0px) scale(.99);
}



/* v13.1 combo: insight + memo */
.section-divider{height:1px; background:rgba(255,255,255,.08); margin:12px 0;}
.combo-subtitle{font-weight:900; font-size:13px; color:var(--gold2); margin-bottom:6px;}
.combo-memo .memo-area{min-height:110px;}
/* ===== Session Plan (Checklist fill) ===== */
.session-plan{
  margin-top:12px;
  padding:14px 14px 12px;
  border:1px solid rgba(255,255,255,.10);
  border-radius:16px;
  background: rgba(255,255,255,.03);
}
.session-plan-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.session-plan-title{
  font-weight:900;
  letter-spacing:.2px;
  color: var(--gold2);
}
.session-plan-sub{
  font-size:12px;
  color:var(--muted-2);
  font-weight:800;
}
.session-plan-actions{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
}
.session-plan-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-top:10px;
}
@media (max-width:520px){
  .session-plan-grid{ grid-template-columns:1fr; }
}
.session-plan-field label{
  display:block;
  margin:0 0 6px;
  font-size:12px;
  font-weight:800;
  color:var(--muted);
}
.session-plan-field input{
  width:100%;
}
.session-plan-summary{
  margin-top:10px;
  font-weight:900;
  color:#f5e27a;
  line-height:1.45;
  font-size:13px;
}

/* === Odds one-line summary card (margin / fair odds / normalized probs) === */
.odds-summary-card{
  margin-top:12px;
  padding:14px 14px 12px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,.09);
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.025));
  box-shadow: 0 14px 40px rgba(0,0,0,.35);
}
.odds-summary-row{
  display:grid;
  grid-template-columns: 1.05fr 1fr 1fr;
  gap:14px;
  align-items:stretch;
}
@media (max-width: 920px){
  .odds-summary-row{ grid-template-columns: 1fr; }
}
.odds-metric{
  padding:10px 10px 8px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.07);
  background: rgba(0,0,0,.14);
}
.odds-metric-title{
  font-size:12px;
  color:#bdbdbd;
  letter-spacing:.2px;
  font-weight:800;
}
.odds-metric-value{
  margin-top:6px;
  font-size:30px;
  line-height:1.1;
  font-weight:950;
  color:#f5e27a;
  text-shadow: 0 6px 20px rgba(245,226,122,.12);
}
.odds-metric-sub{
  margin-top:6px;
  font-size:12px;
  color:#9a9a9a;
}
.odds-pills{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-top:8px;
}
.odds-pill{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:7px 10px;
  border-radius:999px;
  border:1px solid rgba(245,226,122,.22);
  background: rgba(245,226,122,.05);
  font-size:13px;
  font-weight:900;
  color:#eaeaea;
}
.odds-pill .k{ color:var(--muted); font-weight:800; }
.odds-pill .v{ color:#f5e27a; font-weight:950; text-shadow: 0 6px 18px rgba(245,226,122,.12); }
.odds-pill.home, .odds-pill.draw, .odds-pill.away{ border-color: rgba(245,226,122,.22); }

.odds-summary-cta{display:flex;justify-content:flex-start;}
.odds-summary-note{
  margin-top:8px;
  font-size:12px;
  color:#9a9a9a;
  line-height:1.35;
}

/* === Insight/Memo premium tabs === */
.im-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.im-tabs{
  display:flex;
  gap:6px;
  padding:4px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.16);
}
.im-tab{
  appearance:none;
  border:0;
  cursor:pointer;
  padding:8px 12px;
  border-radius:999px;
  font-weight:900;
  font-size:12px;
  color:#bdbdbd;
  background: transparent;
  transition: transform .12s ease, background .12s ease, color .12s ease;
}
.im-tab:hover{ transform: translateY(-1px); }
.im-tab.active{
  color:#121212;
  background: linear-gradient(180deg, rgba(245,226,122,.96), rgba(245,226,122,.72));
  box-shadow: 0 12px 26px rgba(245,226,122,.10);
}
.im-panels{
  margin-top:10px;
  min-height: 250px;
}
.im-panel{ display:none; }
.im-panel.active{
  display:flex;
  flex-direction:column;
  gap:10px;
}
.im-panel .memo-area{ min-height: 150px; }
.im-note{
  margin-top:2px;
  color:#9a9a9a;
  font-size:12px;
}
/* === Memo extras to avoid empty space === */
.memo-extras{
  margin-top:10px;
  padding-top:10px;
  border-top:1px solid rgba(255,255,255,.08);
  display:flex;
  flex-direction:column;
  gap:10px;
}
.memo-chip-row{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
}
.memo-chip{
  appearance:none;
  border:1px solid rgba(245,226,122,.22);
  background: rgba(0,0,0,.18);
  color:var(--text);
  padding:7px 10px;
  border-radius:999px;
  font-weight:900;
  font-size:12px;
  cursor:pointer;
  transition: transform .12s ease, border-color .12s ease, background .12s ease;
}
.memo-chip:hover{
  transform: translateY(-1px);
  border-color: rgba(245,226,122,.34);
  background: rgba(0,0,0,.26);
}
.memo-extra-actions{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}
.memo-history{
  display:grid;
  gap:8px;
}
.memo-history-title{
  font-weight:900;
  font-size:12px;
  color:var(--text-2);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.memo-history-item{
  border:1px solid rgba(255,255,255,.10);
  background: rgba(0,0,0,.16);
  border-radius:14px;
  padding:10px 12px;
  cursor:pointer;
  transition: transform .12s ease, border-color .12s ease, background .12s ease;
}
.memo-history-item:hover{
  transform: translateY(-1px);
  border-color: rgba(245,226,122,.22);
  background: rgba(0,0,0,.22);
}
.memo-history-meta{
  display:flex;
  gap:10px;
  align-items:center;
  justify-content:space-between;
  font-size:11px;
  color:var(--muted-2);
  margin-bottom:6px;
}
.memo-history-text{
  font-size:12px;
  color:var(--text-2);
  line-height:1.35;
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  overflow:hidden;
}

</style>
<script>
/* === SAFE LOADER FAILSAFE (파서/런타임 에러 대비) === */
(function(){
  function hide(){
    var l=document.getElementById("loader");
    if(!l) return;
    l.classList.add("hide");
    setTimeout(function(){ try{ l.remove(); }catch(e){} }, 500);
  }
  // DOM만 준비돼도 닫기
  document.addEventListener("DOMContentLoaded", function(){ setTimeout(hide, 350); });
  // 네트워크가 막혀도 닫기
  setTimeout(hide, 2800);
  // 최종: load
  window.addEventListener("load", hide);
  // 스크립트 에러로 멈추는 케이스 대비
  window.addEventListener("error", function(){ setTimeout(hide, 0); });
})();
</script>
<script>
/* ===== 카드 데이터 (card9 추가) ===== */
const CARD_DATA = {
  card1:{ title:"어느날", code:"ST95", link:"http://oday-147.com", telegram:"UZU59",
    benefit:"고액전용 전용 무제제 삼치기OK / 입금플러스5+2 10+3 20+4 외 첫충 10%",
    notice:"가입코드 미입력 시 혜택 적용 불가" },
  card2:{ title:"OK Bet", code:"88ST", link:"http://ok-8888.com/?code=88ST", telegram:"UZU59",
    benefit:"신규가입 77만원 쿠폰지급, 코인 입/출금 가능, 롤 세트별 베팅, 벤픽 후 마감, BJ, 스타리그 업데이트",
    notice:"가입코드 미입력 시 혜택 적용 불가" },
  card3:{ title:"SPEED Bet", code:"88ST", link:"http://spd-7575.com/?code=88ST", telegram:"UZU59",
    benefit:"신규가입 77만원 쿠폰지급, 코인 입/출금 가능, 롤 세트별 베팅, 벤픽 후 마감, BJ, 스타리그 업데이트",
    notice:"가입코드 미입력 시 혜택 적용 불가" },
  card4:{ title:"VEGAS", code:"6789", link:"https://las403.com", telegram:"UZU59",
    benefit:"스포츠·고액전용 입플 최대 30% 페이백 / 카지노 입플",
    notice:"가입코드 미입력 시 혜택 적용 불가" },
  card5:{ title:"LULA BET", code:"ZZ99", link:"https://lula.ws", telegram:"PSC991",
    benefit:"원화·USDT 무기명가입 / 페이백 10%",
    notice:"가입코드 미입력 시 혜택 적용 불가" },
  card6:{ title:"CHOY BET", code:"TAN", link:"https://cy-40.com", telegram:"DY0302",
    benefit:"신규 30% / 매충 10% / 페이백 10 / 입플 %",
    notice:"가입코드 미입력 시 혜택 적용 불가" },

  card7:{ title:"CAPS", code:"RUST", link:"https://caps-22.com/", telegram:"UZU59",
    benefit:"미겜 첫충 5% / 페이백 5% / 출석 30만원",
    notice:"가입코드 미입력 시 혜택 적용 불가" },

  card8:{ title:"BETZY", code:"BANGU", link:"https://b88-et.com", telegram:"UZU59",
    benefit:"스포츠 첫충 10% / 미겜 첫충 5% / 페이백 5% / 출석 30만원",
    notice:"가입코드 미입력 시 혜택 적용 불가" },

  card9:{ title:"RIO", code:"opop", link:"https://rio2.casino/?b=OPOP", telegram:"Aven47",
    benefit:"고액전용 카지노 입플/페이백 중심 · 고액 유저 기준 혜택 안내",
    notice:"가입코드 미입력 시 혜택 적용이 어려울 수 있습니다." },
  card10:{ title:"RED HULK", code:"HERO", link:"https://rhk-777.com", telegram:"SDTR8",
    benefit:"입금플러스 신규 30% / 매충 10% / 페이백5% 콤프(1%/3%)%",
    notice:"가입코드 미입력 시 혜택 적용 불가" },
   card11:{ title:"TOP GUN", code:"GAS7", link:"https://topgun-88.com", telegram:"SDTR8",
    benefit:"입금플러스 신규 30% / 매충 10% / 페이백5% 콤프(1%/3%)%",
    notice:"가입코드 미입력 시 혜택 적용 불가" },
};

/* ===== 인사이트 (종목별) ===== */
const INSIGHTS_BY_SPORT = {
  "축구":[
    "배당이 1~2시간 내 급변하면 라인 조정 구간일 수 있습니다.",
    "무승부 배당이 갑자기 내려가면 시장은 '언더/조심'을 보는 경우가 많습니다.",
    "양팀 득점(BTTS) 라인이 흔들리면 선발/부상 뉴스 반영 가능성이 큽니다.",
    "전반 라인이 움직이면 초반 템포(압박/로테이션)를 체크하세요."
  ],
  "농구":[
    "핸디(스프레드)가 크게 움직이면 핵심 선수 결장/로테 반영일 수 있습니다.",
    "OU(언더오버) 하락은 페이스 다운/수비 지표 반영 가능성이 큽니다.",
    "백투백 일정은 4Q 클러치에서 체력 영향이 큽니다.",
    "홈코트 이점이 큰 팀은 초반 라인이 유리하게 잡히는 경우가 많습니다."
  ],
  "야구":[
    "선발 변경은 배당 구조가 통째로 바뀌니 최신 라인을 우선 확인하세요.",
    "불펜 소모가 큰 팀은 후반 이닝 변동성이 큽니다.",
    "바람/구장 특성은 OU에 크게 영향을 줍니다.",
    "승패보다 5이닝(1st5) 라인이 더 깔끔할 때가 있습니다."
  ],
  "배구":[
    "세트 핸디가 흔들리면 주전 로테/컨디션 이슈 가능성이 있습니다.",
    "서브/리시브 지표 차이가 크면 언더독도 세트를 가져갈 수 있습니다.",
    "원정 장거리 이동은 집중력 이슈로 초반 세트에 영향을 줄 수 있습니다.",
    "전력 차가 크면 OU보다 -1.5 세트가 더 안정적일 때가 있습니다."
  ],
  "e스포츠":[
    "맵 풀/밴픽 상성이 라인보다 중요할 때가 많습니다.",
    "로스터 교체 직후는 변동성이 커서 보수적으로 접근하세요.",
    "언더독이 특정 맵에서 강하면 세트/맵 핸디를 확인하세요.",
    "최근 5경기보다 상대전적/메타 적응력을 같이 보세요."
  ],
  "하키":[
    "골리(선발 골텐더) 변경은 승/OU에 큰 영향이 있습니다.",
    "백투백 원정은 수비 붕괴로 고득점 게임이 나올 수 있습니다.",
    "파워플레이 효율 차이는 언더독 변수로 작용합니다.",
    "초반 10분 라인이 흔들리면 경기 템포 이슈 가능성이 큽니다."
  ]
};

</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "88st.cloud 주요 도구 및 가이드",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "배당 구조 분석기",
      "url": "https://88st.cloud/#oddsAnalyzerSection"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": "리스크 관리 계산기",
      "url": "https://88st.cloud/#riskCalcSection"
    },
    {
      "@type": "ListItem",
      "position": 3,
      "name": "보증·인증 업체",
      "url": "https://88st.cloud/#vendorTop"
    },
    {
      "@type": "ListItem",
      "position": 4,
      "name": "입플 체크리스트",
      "url": "https://88st.cloud/bonus-checklist/"
    },
    {
      "@type": "ListItem",
      "position": 5,
      "name": "입플·보너스 안내",
      "url": "https://88st.cloud/landing-a/"
    }
  ]
}
</script>
<link href="assets/mobile-polish.css?v=2" rel="stylesheet"/>
<script src="/assets/js/88st-analytics.js"></script>
<link href="/assets/88st-theme.css?v=20260210_4" rel="stylesheet"/>
<script defer="" src="/assets/88st-theme.js?v=20260210_4"></script>
</meta></head>
<body>
<div class="notice-bar">
<a href="https://t.me/UZU59" id="noticeLink" rel="noopener" target="_blank">
<span id="noticeText"></span>
</a>
</div>
<div aria-hidden="true" id="loader">
<div class="logoWrap">
<img alt="88 로고 로딩" src="img/logo.png"/>
</div>
<div class="text">Loading...</div>
</div>
<div aria-label="사칭 주의 안내" aria-modal="true" class="scam-popup" id="scamPopup" role="dialog">
<div class="scam-box">
<h3>⚠️ 사칭 주의 안내</h3>
<p>
      88 커뮤니티 공식 관리자 텔레그램은<br/>
<b>@UZU59</b> 단 하나입니다.<br/><br/>
      그 외 계정은 사칭일 수 있으니<br/>
      반드시 주의해 주세요.
    </p>
<div class="btn" onclick="closeScam()">확인</div>
</div>
</div>
<h1 style="position:absolute;left:-9999px;">스포츠 배당 분석기와 배당 마진 계산기 | 88</h1>
<div class="header">
<a aria-label="홈으로 이동" class="logoLink" href="/">
<img alt="88 커뮤니티 로고" class="logoImg" src="img/logo.png"/>
</a>
<div class="sub"> </div>
</div>
<div class="section-wrap">
<!-- 메인 루트: 분석기 사용 -->
<div class="section" id="analyzerSection">
<div class="title"><span class="badge">MAIN</span>스포츠 배당 분석기</div>
<div class="text">
      배당 흐름·마진(오버·언더)·EV를 <b>초간단</b>으로 확인하는 도구입니다.
      <span style="display:block;color:#9a9a9a;font-size:12px;margin-top:6px;">※ 도구는 참고용이며 결과를 보장하지 않습니다.</span>
</div>
<div class="cta-row">
<a class="analyze-btn primary" data-cta="analysis" href="/analysis/">
<span aria-hidden="true" class="icon">
<svg fill="none" height="22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="22">
<path d="M3 3v18h18"></path>
<path d="M7 14l3-3 3 2 5-6"></path>
</svg>
</span>
<span class="label">분석기 사용<span class="sub"> 중 · 고급 · 핸디 · 언더·오버 · EV </span></span>
</a>
<a class="analyze-btn secondary" data-cta="vendors" href="#vendorTop">
<span aria-hidden="true" class="icon">
<svg fill="none" height="22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="22">
<path d="M12 2l3 7 7 3-7 3-3 7-3-7-7-3 7-3 3-7z"></path>
</svg>
</span>
<span class="label"> 보증 · 인증 사이트  <span class="sub">바로 가기</span></span>
</a>
</div>
</div>
<div class="two-col">
<div class="section" id="oddsAnalyzerSection">
<div class="title"><span class="badge">ANALYZE</span>배당 구조 분석기</div>
<div class="text" style="margin-bottom:10px;">
          종목/마켓을 고르고 배당을 입력하면 <b>정규화 확률 · 공정배당 · 마진</b>을 정리합니다.
        </div>
<div class="insight-row" style="margin-top:10px; margin-bottom:6px;">
<select aria-label="전종목 카테고리 선택" class="insight-select" id="oddsSport">
<option value="축구">축구</option>
<option value="농구">농구</option>
<option value="야구">야구</option>
<option value="배구">배구</option>
<option value="하키">하키</option>
<option value="테니스">테니스</option>
<option value="미식축구">미식축구</option>
<option value="격투기">격투기</option>
<option value="e스포츠">e스포츠</option>
<option value="기타">기타</option>
</select>
<div class="mini-note">전종목 카테고리 선택형</div>
</div>
<div aria-label="마진 계산기 유형" class="seg-row" role="tablist">
<button class="seg active" id="mMode2" onclick="setMarginMode('2')" type="button">2-way (홈/원정)</button>
<button class="seg" id="mMode3" onclick="setMarginMode('3')" type="button">3-way (홈/무/원정)</button>
</div>
<div id="margin2" style="display:block;">
<div style="display:grid; gap:10px;">
<input id="m2A" inputmode="decimal" placeholder="홈 배당 (예: 1.85)"/>
<input id="m2B" inputmode="decimal" placeholder="원정 배당 (예: 2.05)"/>
</div>
</div>
<div id="margin3" style="display:none;">
<div style="display:grid; gap:10px;">
<input id="m3H" inputmode="decimal" placeholder="홈 배당 (예: 1.85)"/>
<input id="m3D" inputmode="decimal" placeholder="무 배당 (예: 3.40)"/>
<input id="m3A" inputmode="decimal" placeholder="원정 배당 (예: 4.20)"/>
</div>
</div>
<button class="insight-btn" onclick="calcSimpleMargin()" style="margin-top:10px;" type="button">분석 실행</button>
<div aria-live="polite" class="odds-summary-card" id="oddsSummaryCard">
<div class="odds-summary-row">
<div class="odds-metric">
<div class="odds-metric-title">마진 (오버라운드)</div>
<div class="odds-metric-value" id="oddsMarginValue">—</div>
<div class="odds-metric-sub" id="oddsOverroundSub">오버라운드 —</div>
</div>
<div class="odds-metric">
<div class="odds-metric-title">공정 배당</div>
<div class="odds-pills" id="oddsFairPills"></div>
<div class="odds-metric-sub">정규화 기준</div>
</div>
<div class="odds-metric">
<div class="odds-metric-title">정규화 확률</div>
<div class="odds-pills" id="oddsProbPills"></div>
<div class="odds-metric-sub">합 100%</div>
</div>
</div>
<div class="odds-summary-cta">
<a class="insight-btn secondary" data-cta="odds_to_vendors" href="#vendorTop" style="text-decoration:none; display:inline-flex; align-items:center; gap:8px; padding:10px 12px; border-radius:12px; margin-top:12px;">
      추천 업체 카드 보기 <span aria-hidden="true">→</span>
</a>
</div>
</div>
<div class="odds-summary-note" id="oddsSummaryNote"></div>
<div class="text" id="simpleMarginResult" style="display:none;"></div>
<div class="text" id="simpleMarginHint" style="display:none;"></div>
</div><div class="section" id="insightMemoSection">
<div class="section-header im-header">
<div class="title"><span class="badge">TODAY</span>인사이트 · 메모</div>
<div aria-label="인사이트/메모" class="im-tabs" role="tablist">
<button aria-selected="true" class="im-tab active" data-imtab="insight" type="button">인사이트</button>
<button aria-selected="false" class="im-tab" data-imtab="memo" tabindex="-1" type="button">메모</button>
</div>
</div>
<div class="im-panels">
<div class="im-panel active" data-impanel="insight">
<div class="text" id="insight"></div>
<div class="insight-row">
<select aria-label="종목 선택" class="insight-select" id="insightSport">
<option value="축구">축구</option>
<option value="농구">농구</option>
<option value="야구">야구</option>
<option value="배구">배구</option>
<option value="e스포츠">e스포츠</option>
<option value="하키">하키</option>
</select>
<button class="insight-btn" onclick="refreshInsight()" type="button">인사이트 새로고침</button>
</div>
<div class="text im-note">
        ※ 종목 선택은 참고용이며, 실제 결과를 보장하지 않습니다.
      </div>
</div>
<div class="im-panel" data-impanel="memo" hidden="">
<div class="combo-subtitle">오늘의 메모</div>
<div class="text">간단히 기록해두면 다음 방문 때 그대로 남습니다.</div>
<textarea class="memo-area" id="quickMemoText" placeholder="예) 오늘 체크 포인트 / 라인 변동 / 문의 내용 메모" rows="6"></textarea>
<div class="memo-actions">
<button class="insight-btn" id="quickMemoSave" type="button">저장</button>
<button class="insight-btn secondary" id="quickMemoClear" type="button">비우기</button>
</div>
<div class="memo-extras">
<div aria-label="메모 템플릿" class="memo-chip-row">
<button class="memo-chip" data-memo-insert="체크 포인트: " type="button">체크</button>
<button class="memo-chip" data-memo-insert="라인 변동: " type="button">라인</button>
<button class="memo-chip" data-memo-insert="문의/상담: " type="button">문의</button>
<button class="memo-chip" data-memo-insert="리스크: " type="button">리스크</button>
</div>
<div class="memo-extra-actions">
<button class="insight-btn" id="memoAppendAnalysis" type="button">분석 요약 추가</button>
<button class="insight-btn secondary" id="memoCopy" type="button">메모 복사</button>
</div>
<div class="memo-history">
<div class="memo-history-title">
<span>최근 메모</span>
<span style="font-size:11px;color:rgba(255,255,255,.5);">클릭하면 불러오기</span>
</div>
<div id="memoHistoryList"></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="riskCalcSection">
<div class="title"><span class="badge">RISK</span>리스크 관리 계산기</div>
<div class="text" style="margin-bottom:10px;">
     손실 한도 · 고정 비중 · 보수 켈리로 <b>과몰입을 줄이는</b> 참고 계산기입니다. 
    </div>
<div aria-label="리스크 관리 계산기 유형" class="seg-row" role="tablist">
<button class="seg active" id="rModeStop" onclick="setRiskMode('stop')" type="button">손실 한도</button>
<button class="seg" id="rModeFixed" onclick="setRiskMode('fixed')" type="button">고정 비중</button>
<button class="seg" id="rModeKelly" onclick="setRiskMode('kelly')" type="button">보수 켈리</button>
</div>
<div id="riskStop" style="display:block; margin-top:10px;">
<div class="text" style="margin-bottom:8px;color:#bdbdbd;font-size:12px;">
      하루/세션 손실 한도를 먼저 정해두면, 감정 베팅을 줄이는데 도움이 됩니다.
     </div>
<div style="display:grid; gap:10px;">
<input id="rBankroll1" inputmode="decimal" placeholder="총 자본 (예: 1000000)"/>
<div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
<input id="rLossPct" inputmode="decimal" placeholder="손실 한도 % (예: 5)"/>
<input id="rStopPct" inputmode="decimal" placeholder="중단 트리거 % (예: 80)"/>
</div>
</div>
<button class="insight-btn" onclick="calcRiskStop()" style="margin-top:10px;" type="button">손실 한도 계산</button>
<div class="text" id="riskStopOut" style="font-weight:900;color:#f5e27a;margin-top:8px;"></div>
<div class="text" id="riskStopHint" style="color:#bdbdbd;font-size:12px;"></div>
</div>
<div id="riskFixed" style="display:none; margin-top:10px;">
<div class="text" style="margin-bottom:8px;color:#bdbdbd;font-size:12px;">
      고정 비중은 변동을 줄이는 가장 단순한 룰입니다. (예: 1~2%)
     </div>
<div style="display:grid; gap:10px;">
<input id="rBankroll2" inputmode="decimal" placeholder="총 자본 (예: 1000000)"/>
<input id="rStakePct" inputmode="decimal" placeholder="베팅 비중 % (예: 1.5)"/>
<div aria-label="비중 프리셋" class="chip-row">
<button class="chip" onclick="presetStake(0.5)" type="button">0.5%</button>
<button class="chip" onclick="presetStake(1)" type="button">1%</button>
<button class="chip" onclick="presetStake(1.5)" type="button">1.5%</button>
<button class="chip" onclick="presetStake(2)" type="button">2%</button>
<button class="chip" onclick="presetStake(3)" type="button">3%</button>
</div>
</div>
<button class="insight-btn" onclick="calcRiskFixed()" style="margin-top:10px;" type="button">고정 비중 계산</button>
<div class="text" id="riskFixedOut" style="font-weight:900;color:#f5e27a;margin-top:8px;"></div>
<div class="text" id="riskFixedHint" style="color:#bdbdbd;font-size:12px;"></div>
</div>
<div id="riskKelly" style="display:none; margin-top:10px;">
<div class="text" style="margin-bottom:8px;color:#bdbdbd;font-size:12px;">
      켈리는 공격적일 수 있어 <b>보수 배수</b>(예: 25%~50%)로 줄여 쓰는 것을 권장합니다.
     </div>
<div style="display:grid; gap:10px;">
<input id="rBankroll3" inputmode="decimal" placeholder="총 자본 (예: 1000000)"/>
<div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
<input id="rOdds" inputmode="decimal" placeholder="배당(Decimal) (예: 1.95)"/>
<input id="rWinPct" inputmode="decimal" placeholder="승률 % 추정 (예: 55)"/>
</div>
<div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
<input id="rKellyFactor" inputmode="decimal" placeholder="보수 배수 % (예: 25)"/>
<input id="rMaxPct" inputmode="decimal" placeholder="최대 상한 % (예: 3)"/>
</div>
</div>
<button class="insight-btn" onclick="calcRiskKelly()" style="margin-top:10px;" type="button">보수 켈리 계산</button>
<div class="text" id="riskKellyOut" style="font-weight:900;color:#f5e27a;margin-top:8px;"></div>
<div class="text" id="riskKellyHint" style="color:#bdbdbd;font-size:12px;"></div>
</div>
</div><div class="section" id="checklistSection">
<div class="section-header">
<div class="title"><span class="badge">CHECK</span>배팅 전 체크리스트</div>
<button class="insight-btn secondary btn-mini" onclick="refreshChecklist()" type="button">새로고침</button>
</div>
<div class="text" id="checklistText"></div>
<div class="session-plan" id="sessionPlanBox">
<div class="session-plan-head">
<div class="session-plan-title">오늘의 세션 플랜 <span class="session-plan-sub">(과몰입 방지)</span></div>
<div class="session-plan-actions">
<button class="insight-btn secondary btn-mini" id="spSaveBtn" type="button">저장</button>
<button class="insight-btn secondary btn-mini" id="spClearBtn" type="button">초기화</button>
</div>
</div>
<div class="text" style="color:#bdbdbd;font-size:12px; margin-top:6px;">
    오늘의 손실 한도/1회 상한/최대 경기 수를 미리 고정해두면 “추격 배팅”을 줄이는 데 도움이 됩니다. (브라우저에만 저장)
  </div>
<div class="session-plan-grid">
<div class="session-plan-field">
<label for="spBank">총 자본(원)</label>
<input id="spBank" inputmode="decimal" placeholder="예: 1000000"/>
</div>
<div class="session-plan-field">
<label for="spLossPct">오늘 손실 한도(%)</label>
<input id="spLossPct" inputmode="decimal" placeholder="예: 5"/>
</div>
<div class="session-plan-field">
<label for="spStakePct">1회 상한(%)</label>
<input id="spStakePct" inputmode="decimal" placeholder="예: 2"/>
</div>
<div class="session-plan-field">
<label for="spMaxBets">최대 경기 수</label>
<input id="spMaxBets" inputmode="decimal" placeholder="예: 3"/>
</div>
</div>
<div class="session-plan-summary" id="spSummary"></div>
</div>
<div class="text" style="margin-top:8px;color:#9a9a9a;font-size:12px;">
          ※ 과몰입 방지/리스크 관리용 안내입니다.
        </div>
</div></div>
<div aria-label="카드 검색 및 필터" class="vendor-tools">
<input autocomplete="off" class="v-input" id="searchInput" placeholder="업체 검색 (예: SPEED OK 어느날 )">
<div aria-label="필터 및 정렬" class="v-controls">
<div class="v-control">
<label for="filterSelect">카테고리</label>
<select class="v-select" id="filterSelect">
<option value="all">전체</option>
<option value="guarantee">보증</option>
<option value="verified">인증</option>
<option value="rec">추천</option>
<option value="new">신규</option>
<option value="ad">광고/제휴</option>
</select>
</div>
<div class="v-control">
<label for="sortSelect">정렬</label>
<select class="v-select" id="sortSelect">
<option value="default">기본</option>
<option value="pop">인기순</option>
</select>
</div>
<label aria-label="정제된 문구 토글" class="v-toggle" for="cleanToggle">
<input id="cleanToggle" type="checkbox">
<span aria-hidden="true" class="v-switch"></span>
<span class="v-toggle-text">정제된 문구</span>
</input></label>
</div>
<div class="v-small" id="evAutoHint"></div>
<div class="v-small" id="cleanHint">정제된 문구: 카드 혜택 문구를 짧고 깔끔하게 보여줍니다.</div>
</input></div>
<div class="vendor-sections" id="vendorTop">
<section class="vendor-section" data-section="guarantee">
<div class="vendor-section-head">
<div class="vsh-left">
<span class="vsh-title">보증 </span>
<span class="vsh-meta"> </span>
</div>
<div class="vsh-right">
<span class="vsh-chip">보증</span>
</div>
</div>
<div class="vendor-grid" id="vendorGridGuarantee"></div>
</section>
<section class="vendor-section" data-section="verified">
<div class="vendor-section-head">
<div class="vsh-left">
<span class="vsh-title">인증 </span>
<span class="vsh-meta"> </span>
</div>
<div class="vsh-right">
<span class="vsh-chip">인증</span>
</div>
</div>
<div class="vendor-grid" id="vendorGridVerified"></div>
</section>
</div>
<div class="insights-wrap" id="insights">
<div class="insights-head">
<div>
<div class="h" id="insightHeadline">오늘의 인기</div>
<div class="sub">방문자 수 대신, <b>이 사이트에서 실제로 많이 본/많이 검색한 항목</b>을 보여줍니다. </div>
</div>
</div>
<div class="insights-grid">
<div aria-label="오늘 많이 본 키워드" class="card stat-card">
<div class="stat-top">
<div class="stat-title">오늘 많이 본 키워드</div>
<div class="stat-meta" id="insightKwMeta">검색창에 입력한 키워드 기준으로 집계됩니다. (데이터가 쌓이면 자동 갱신)</div>
</div>
<div class="stat-list" id="insightKeywords"></div>
</div>
<div aria-label="오늘 많이 본 카드" class="card stat-card">
<div class="stat-top">
<div class="stat-title">오늘 많이 본 카드 TOP 5</div>
<div class="stat-meta" id="insightCardMeta">카드 상세를 열어본 횟수 기준입니다. </div>
</div>
<div class="stat-list" id="insightCards"></div>
<div class="note-mini">※ “인기순” 정렬은 카드 클릭 누적 기반, 이 영역은 “오늘 열람” 기반입니다.</div>
</div>
<div aria-label="빠른 도구" class="card stat-card">
<div class="stat-top">
<div class="stat-title">빠른 도구</div>
<div class="stat-meta">자주 쓰는 계산기를 바로 실행하세요.</div>
</div>
<div class="stat-actions">
<a class="small-btn" data-cta="quick_analysis" href="/analysis/">분석기</a>
<a class="small-btn" data-cta="quick_margin" href="/tool-margin/">마진</a>
<a class="small-btn" data-cta="quick_ev" href="/tool-ev/">EV</a>
<a class="small-btn" data-cta="quick_odds" href="/tool-odds/">배당 확률</a>
<a class="small-btn" data-cta="quick_bonus" href="/bonus-checklist/">입플 체크</a>
</div>
<div class="note-mini">팁: 라인/배당 흐름은 “기록(로그)”이 쌓여야 의미가 커집니다. 다음 업데이트에서 베팅 로그/대시보드를 붙이면 재방문이 확 올라갑니다.</div>
</div>
</div>
</div>
<div aria-label="업체 상세" aria-modal="true" class="popup" id="cardPopup" role="dialog">
<div class="popup-box" role="document">
<h2 id="pTitle"></h2>
<p id="codeRow">가입코드 : <b id="pCode"></b></p>
<p id="pBenefit" style="color:#f5e27a;font-size:13px;margin:10px 0 0;"></p>
<p id="pNotice" style="color:#ff6b6b;font-size:12px;margin:8px 0 0;"></p>
<div aria-label="주요 액션" class="popup-cta">
<a class="btn go primary" data-no-auto-outbound="1" id="pLink" rel="noopener" target="_blank">사이트 이동</a>
<a class="btn copy secondary" data-no-auto-outbound="1" id="pTelegram" rel="noopener" target="_blank">텔레그램 상담</a>
<div class="btn copy tertiary" id="copyBtn" role="button" tabindex="0">가입코드 복사</div>
</div>
<div aria-label="보조 액션" class="popup-aux">
<div class="btn share ghost" id="shareBtn" role="button" tabindex="0">공유하기</div>
<div class="btn copy ghost" id="closeBtn" role="button" tabindex="0">닫기</div>
</div>
<div class="reason-box" id="reasonBox" style="display:none;">
<div class="reason-title" id="reasonTitle">안내</div>
<div class="reason-line" id="reason1"></div>
<div class="reason-line" id="reason2"></div>
<div class="reason-line" id="reason3"></div>
</div>
<!-- closeBtn moved to .popup-aux -->
</div>
</div>
<div aria-label="공유 카드" aria-modal="true" class="popup" id="sharePopup" role="dialog" style="display:none;">
<div class="popup-box" role="document">
<h2>공유하기</h2>
<p class="share-sub">링크를 복사하거나, 이미지로 저장해서 공유할 수 있습니다.</p>
<div class="share-preview">
<canvas aria-label="공유 이미지 미리보기" height="1080" id="shareCanvas" width="1080"></canvas>
</div>
<div class="share-row">
<input aria-label="공유 링크" class="v-input" id="shareLink" readonly="">
<div class="btn copy" id="copyShareLinkBtn" style="min-width:120px;">링크 복사</div>
</input></div>
<div class="share-actions">
<div class="btn go" id="downloadShareImgBtn">이미지 저장</div>
<div class="btn copy" id="copyShareTextBtn">문구 복사</div>
</div>
<div class="btn copy" id="closeShareBtn">닫기</div>
</div>
</div>
<div class="section" id="guideHub">
<div class="title"><span class="badge">GUIDE</span>가이드 · 체크리스트</div>
<div class="text">
    입플/보너스 조건 정리와 각 랜딩 안내를 <b>한 곳</b>에서 확인할 수 있습니다. (도구 사용 후 궁금한 항목을 빠르게 탐색)
  </div>
<div aria-label="체크리스트 및 핵심 가이드" class="tool-card-grid">
<a class="tool-card-link" data-cta="hub_bonus" href="/bonus-checklist/">
<div class="tool-card-head">
<div aria-hidden="true" class="tool-card-icon">
<svg fill="none" height="22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="22">
<path d="M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2"></path>
<rect height="4" rx="1" width="6" x="9" y="3"></rect>
<path d="M9 12h6"></path><path d="M9 16h6"></path>
</svg>
</div>
<div class="tool-card-text">
<div class="tool-card-title">입플 체크리스트</div>
<div class="tool-card-desc">롤링/제외게임/최대지급 조건을 빠르게 정리</div>
</div>
</div>
<div aria-hidden="true" class="chip-row">
<span class="kchip">입플</span><span class="kchip">롤링</span><span class="kchip">최대지급</span>
</div>
<div class="tool-card-foot">
<span class="tool-card-cta">체크리스트 열기 →</span>
<span class="tool-card-note">문의 템플릿 포함</span>
</div>
</a>
<a class="tool-card-link" data-cta="hub_landing_a" href="/landing-a/">
<div class="tool-card-head">
<div aria-hidden="true" class="tool-card-icon">
<svg fill="none" height="22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="22">
<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4a2 2 0 0 0 1-1.73z"></path>
<path d="M3.3 7L12 12l8.7-5"></path><path d="M12 22V12"></path>
</svg>
</div>
<div class="tool-card-text">
<div class="tool-card-title">입플·보너스 안내</div>
<div class="tool-card-desc">혜택 구조/조건/유의사항 요약</div>
</div>
</div>
<div aria-hidden="true" class="chip-row">
<span class="kchip">보너스</span><span class="kchip">조건</span><span class="kchip">가이드</span>
</div>
<div class="tool-card-foot">
<span class="tool-card-cta">랜딩 보기 →</span>
<span class="tool-card-note">핵심만 정리</span>
</div>
</a>
<a class="tool-card-link" data-cta="hub_landing_c" href="/landing-c/">
<div class="tool-card-head">
<div aria-hidden="true" class="tool-card-icon">
<svg fill="none" height="22" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="22">
<path d="M3 3v18h18"></path><path d="M7 14l3-3 3 2 5-6"></path>
</svg>
</div>
<div class="tool-card-text">
<div class="tool-card-title">마진·EV 계산 가이드</div>
<div class="tool-card-desc">공정배당/정규확률/오버라운드 이해</div>
</div>
</div>
<div aria-hidden="true" class="chip-row">
<span class="kchip">마진</span><span class="kchip">EV</span><span class="kchip">공정배당</span>
</div>
<div class="tool-card-foot">
<span class="tool-card-cta">가이드 보기 →</span>
<span class="tool-card-note">도구와 함께 사용</span>
</div>
</a>
</div>
<div aria-label="카테고리 바로가기" class="tool-card-grid" style="margin-top:12px;">
<a class="tool-card-link" data-cta="hub_casino" href="/casino/">
<div class="tool-card-head">
<div aria-hidden="true" class="tool-card-icon"><span style="font-weight:900;">C</span></div>
<div class="tool-card-text">
<div class="tool-card-title">카지노</div>
<div class="tool-card-desc">안내/정책/주요 체크포인트</div>
</div>
</div>
<div class="tool-card-foot"><span class="tool-card-cta">바로가기 →</span><span class="tool-card-note">카테고리</span></div>
</a>
<a class="tool-card-link" data-cta="hub_slot" href="/slot/">
<div class="tool-card-head">
<div aria-hidden="true" class="tool-card-icon"><span style="font-weight:900;">S</span></div>
<div class="tool-card-text">
<div class="tool-card-title">슬롯</div>
<div class="tool-card-desc">게임/제외/조건 참고</div>
</div>
</div>
<div class="tool-card-foot"><span class="tool-card-cta">바로가기 →</span><span class="tool-card-note">카테고리</span></div>
</a>
<a class="tool-card-link" data-cta="hub_minigame" href="/minigame/">
<div class="tool-card-head">
<div aria-hidden="true" class="tool-card-icon"><span style="font-weight:900;">M</span></div>
<div class="tool-card-text">
<div class="tool-card-title">미니게임</div>
<div class="tool-card-desc">룰/조건/주의사항</div>
</div>
</div>
<div class="tool-card-foot"><span class="tool-card-cta">바로가기 →</span><span class="tool-card-note">카테고리</span></div>
</a>
<a class="tool-card-link" data-cta="hub_ipl" href="/ipl/">
<div class="tool-card-head">
<div aria-hidden="true" class="tool-card-icon"><span style="font-weight:900;">I</span></div>
<div class="tool-card-text">
<div class="tool-card-title">IPL</div>
<div class="tool-card-desc">리그/일정/참고</div>
</div>
</div>
<div class="tool-card-foot"><span class="tool-card-cta">바로가기 →</span><span class="tool-card-note">카테고리</span></div>
</a>
</div>
</div>
<div class="landing-seo">
<h3>관련 정보</h3>
<div class="links">
<a data-cta="seo_margin" href="/tool-margin/">배당 마진 계산기</a>
<a data-cta="seo_ev" href="/tool-ev/">EV 계산기</a>
<a data-cta="seo_odds" href="/tool-odds/">배당↔확률 변환</a>
<a data-cta="seo_bonus" href="/bonus-checklist/">입플 체크리스트</a>
<a href="/landing-a/">입플·보너스 분석기</a>
<a href="/landing-b/">고액 유저 안내</a>
<a href="/landing-c/">배당 마진·EV 계산</a>
<a href="/landing-d/">배당 흐름 분석</a>
<a data-cta="seo_casino" href="/casino/">카지노 가이드</a>
<a data-cta="seo_slot" href="/slot/">슬롯 가이드</a>
<a data-cta="seo_minigame" href="/minigame/">미니게임 가이드</a>
<a data-cta="seo_ipl" href="/ipl/">IPL 가이드</a>
<a data-cta="seo_analysis" href="/analysis/">분석기 메인</a></div>
</div>
<div aria-label="빠른 이동" class="fab">
<a class="primary" data-cta="fab_analysis" href="/analysis/">분석기</a>
<a class="secondary" data-cta="fab_vendors" href="#vendorTop">놀이터</a>
</div>
<script>
/* ===== 로딩 화면 닫기(안전장치 포함) ===== */
function hideLoader() {
  const l = document.getElementById("loader");
  if(!l) return;
  l.classList.add("hide");
  setTimeout(()=>{ if(l && l.remove) l.remove(); }, 450);
}
window.addEventListener("load", hideLoader);
setTimeout(hideLoader, 2500);
// DOM 파싱만 완료되어도 바로 닫기(네트워크 지연/차단 대비)
document.addEventListener("DOMContentLoaded", ()=> setTimeout(hideLoader, 250));

/* ===== 날짜 키(로컬) ===== */
function dateKeyLocal() {
  const d = new Date();
  const y = d.getFullYear();
  const m = String(d.getMonth()+1).padStart(2,"0");
  const day = String(d.getDate()).padStart(2,"0");
  return `${y}-${m}-${day}`;
}

/* ===== 사칭주의 팝업 (1일 1회) ===== */
(function() {
  const key="scam_popup_date";
  const today=dateKeyLocal();
  const el = document.getElementById("scamPopup");
  if(!el) return;
  if(localStorage.getItem(key)!==today) {
    el.style.display="flex";
  }
})();
function closeScam() {
  const today=dateKeyLocal();
  localStorage.setItem("scam_popup_date", today);
  const el = document.getElementById("scamPopup");
  if(el) el.style.display="none";
  track("scam_popup_close", {"page":"index"});
}

/* ===== 상단 공지 배너 자동 순환 ===== */
const NOTICE_LIST = [
  "🔔 88ST.Cl0ud 공식 안내 · 관리자 사칭 주의 (@UZU59)",
  "📊 스포츠 배당 분석기 툴 무료 제공 중",
  "🧮 배당 마진 계산기로 수수료 체크",
  "⭐ 인증 정보는 아래 카드에서 확인",
  "⚠️ 가입코드 미입력 시 혜택 적용 불가"
];
let noticeIndex = 0;
const noticeTextEl = document.getElementById("noticeText");
function rotateNotice() {
  if(noticeTextEl) noticeTextEl.innerText = NOTICE_LIST[noticeIndex];
  noticeIndex = (noticeIndex + 1) % NOTICE_LIST.length;
}
rotateNotice();
setInterval(rotateNotice, 4000);

/* (UI) 스크롤 시 공지 배너를 더 투명/슬림하게 */
(function noticeFadeOnScroll(){
  const bar = document.querySelector(".notice-bar");
  if(!bar) return;
  let last = null;
  const onScroll = ()=>{
    const sc = window.scrollY > 60;
    if(sc === last) return;
    bar.classList.toggle("is-scrolled", sc);
    last = sc;
  };
  onScroll();
  window.addEventListener("scroll", onScroll, {passive:true});
})();


/* ===== 인사이트 ===== */
function pickInsight(sport) {
  const arr = INSIGHTS_BY_SPORT[sport] || [];
  if(!arr.length) return "배당 흐름을 체크하고 라인 변화를 확인하세요.";
  return arr[Math.floor(Math.random()*arr.length)];
}
function refreshInsight() {
  const sEl = document.getElementById("insightSport");
  const sport = sEl ? sEl.value : "축구";
  const out = document.getElementById("insight");
  if(out) out.innerText = pickInsight(sport);
  localStorage.setItem("insightSport", sport);
}
(function initInsight() {
  const saved = localStorage.getItem("insightSport");
  const sel = document.getElementById("insightSport");
  if(saved && sel) sel.value = saved;
  refreshInsight();
})();


/* ===== (THEME) 로고 기반 자동 포인트 컬러 =====
   - img/logo.png 를 샘플링해 accent를 자동 세팅합니다.
   - 로고만 바꿔도 버튼/배지/그림자 색이 자연스럽게 따라갑니다.
*/
(function autoThemeFromLogo(){
  const img = document.querySelector(".logoImg");
  if(!img) return;

  const clamp = (v,min,max)=> Math.max(min, Math.min(max, v));
  const lighten = (v, ratio)=> Math.round(v + (255 - v) * ratio);

  const apply = ()=>{
    try{
      const w = 64, h = 64;
      const c = document.createElement("canvas");
      c.width = w; c.height = h;
      const ctx = c.getContext("2d", { willReadFrequently:true });
      if(!ctx) return;

      ctx.clearRect(0,0,w,h);
      // cover 느낌으로 꽉 채움
      const iw = img.naturalWidth || w;
      const ih = img.naturalHeight || h;
      const scale = Math.max(w/iw, h/ih);
      const dw = iw*scale, dh = ih*scale;
      const dx = (w - dw)/2, dy = (h - dh)/2;
      ctx.drawImage(img, dx, dy, dw, dh);

      const data = ctx.getImageData(0,0,w,h).data;
      let r=0,g=0,b=0,n=0;

      for(let i=0;i<data.length;i+=4){
        const a = data[i+3];
        if(a < 40) continue;
        const rr = data[i], gg = data[i+1], bb = data[i+2];

        // (노이즈 제거) 거의 흰색/검정색은 제외(텍스트/배경 영향 축소)
        const maxv = Math.max(rr,gg,bb);
        const minv = Math.min(rr,gg,bb);
        if(maxv < 15) continue;
        if(minv > 245) continue;

        const wgt = a/255;
        r += rr * wgt;
        g += gg * wgt;
        b += bb * wgt;
        n += wgt;
      }
      if(n < 5) return;

      r = Math.round(r/n);
      g = Math.round(g/n);
      b = Math.round(b/n);

      // 너무 탁하면 살짝 보정
      r = clamp(r, 40, 230);
      g = clamp(g, 40, 230);
      b = clamp(b, 60, 245);

      const r2 = lighten(r, 0.35);
      const g2 = lighten(g, 0.35);
      const b2 = lighten(b, 0.35);

      const root = document.documentElement.style;
      root.setProperty("--accentRGB", `${r} ${g} ${b}`);
      root.setProperty("--accent", `rgb(${r} ${g} ${b})`);
      root.setProperty("--accent2", `rgb(${r2} ${g2} ${b2})`);

      // 기존 컬러 변수도 함께 갱신(기능 유지)
      root.setProperty("--gold", `rgb(${r} ${g} ${b})`);
      root.setProperty("--gold2", `rgb(${r2} ${g2} ${b2})`);
    }catch(e){}
  };

  if(img.complete && img.naturalWidth) apply();
  else img.addEventListener("load", apply, { once:true });
})();
/* ===== 업데이트 로그 ===== */
const UPDATE_LOG = [
  { date:"02/06", text:"메인 UI/UX/CTA 버튼색상) 변경" },
  { date:"02/06", text:"SPEED/OK Bet 보증 업체 추가 되었습니다." },
  { date:"02/06", text:"메인 로고 변경 되었습니다." }
];
(function renderLog() {
  const box = document.getElementById("updateLog");
  if(!box) return;
  box.innerHTML = UPDATE_LOG.map(x=>`
    <div class="log-item">
      <div class="log-date">${x.date}</div>
      <div class="log-text">${x.text}</div>
    </div>
  `).join("");
})();


/* ===== 체크리스트 ===== */
const CHECKLIST_POOL = [
  "라인 급변 경기(갑자기 내려간 배당)는 이유부터 확인하기",
  "마진(수수료) 높은 경기면 한 단계 보수적으로 접근하기",
  "1회 배팅금은 자본의 1~3% 범위로 제한하기",
  "선발/결장/로테 뉴스 체크 후 배당 변동 재확인하기",
  "연패/연승 팀은 ‘시장 과열’ 구간인지 먼저 보기",
  "변동성 큰 리그는 단폴/소액으로 테스트하기",
  "무리한 마틴/추격 배팅은 금지(손실 제한선 미리 설정)"
];
function refreshChecklist() {
  const pool = [...CHECKLIST_POOL].sort(()=>Math.random()-0.5);
  const pick = pool.slice(0,3);
  const el = document.getElementById("checklistText");
  if(el) el.innerHTML = "• " + pick.join("<br>• ");
}

/* ===== 세션 플랜(과몰입 방지) ===== */
(function(){
  const KEY = "88_session_plan_v1";
  const bank = document.getElementById("spBank");
  const lossPct = document.getElementById("spLossPct");
  const stakePct = document.getElementById("spStakePct");
  const maxBets = document.getElementById("spMaxBets");
  const out = document.getElementById("spSummary");
  const btnSave = document.getElementById("spSaveBtn");
  const btnClear = document.getElementById("spClearBtn");

  if(!bank || !lossPct || !stakePct || !maxBets || !out || !btnSave || !btnClear) return;

  function fmtWon(n){
    try{ return Math.round(n).toLocaleString("ko-KR"); }
    catch(e){ return String(Math.round(n)); }
  }

  function toast(msg){
    let el = document.getElementById("miniToast88");
    if(!el){
      el = document.createElement("div");
      el.id = "miniToast88";
      el.style.position="fixed";
      el.style.left="50%";
      el.style.bottom="24px";
      el.style.transform="translateX(-50%)";
      el.style.padding="10px 12px";
      el.style.borderRadius="12px";
      el.style.background="rgba(18,18,18,.92)";
      el.style.border="1px solid rgba(255,255,255,.14)";
      el.style.color="#fff";
      el.style.fontWeight="900";
      el.style.fontSize="13px";
      el.style.zIndex="9999";
      el.style.opacity="0";
      el.style.transition="opacity .18s ease, transform .18s ease";
      document.body.appendChild(el);
    }
    el.textContent = msg;
    el.style.opacity="1";
    el.style.transform="translateX(-50%) translateY(-2px)";
    clearTimeout(el.__t);
    el.__t = setTimeout(()=>{
      el.style.opacity="0";
      el.style.transform="translateX(-50%) translateY(0px)";
    }, 1200);
  }

  function render(){
    const b = toNum(bank.value);
    const lp = toNum(lossPct.value);
    const sp = toNum(stakePct.value);
    const mb = toNum(maxBets.value);

    if(!Number.isFinite(b) || b<=0){
      out.textContent = "총 자본을 입력하면 자동으로 요약이 표시됩니다.";
      return;
    }
    const _lp = (Number.isFinite(lp) && lp>0) ? lp : 5;
    const _sp = (Number.isFinite(sp) && sp>0) ? sp : 2;
    const _mb = (Number.isFinite(mb) && mb>0) ? mb : 3;

    const lossWon = b * (_lp/100);
    const stakeWon = b * (_sp/100);
    const dayCap = stakeWon * _mb;
    const stopLine = lossWon * 0.8;

    out.innerHTML =
      `손실 한도: <b>${fmtWon(lossWon)}</b>원 (${_lp}%) · ` +
      `중단 트리거(80%): <b>${fmtWon(stopLine)}</b>원<br>` +
      `1회 상한: <b>${fmtWon(stakeWon)}</b>원 (${_sp}%) · ` +
      `최대 경기 수: <b>${_mb}</b> (일일 노출 상한 ≈ ${fmtWon(dayCap)}원)`;
  }

  function load(){
    try{
      const raw = localStorage.getItem(KEY);
      if(!raw) return;
      const v = JSON.parse(raw);
      if(v && typeof v === "object"){
        if(v.bank!=null) bank.value = v.bank;
        if(v.lossPct!=null) lossPct.value = v.lossPct;
        if(v.stakePct!=null) stakePct.value = v.stakePct;
        if(v.maxBets!=null) maxBets.value = v.maxBets;
      }
    }catch(e){}
    render();
  }

  function save(){
    const v = {
      bank: String(bank.value||"").trim(),
      lossPct: String(lossPct.value||"").trim(),
      stakePct: String(stakePct.value||"").trim(),
      maxBets: String(maxBets.value||"").trim(),
      ts: Date.now()
    };
    try{ localStorage.setItem(KEY, JSON.stringify(v)); }catch(e){}
  }

  function clearAll(){
    bank.value = "";
    lossPct.value = "5";
    stakePct.value = "2";
    maxBets.value = "3";
    try{ localStorage.removeItem(KEY); }catch(e){}
    render();
  }

  [bank, lossPct, stakePct, maxBets].forEach(el => el.addEventListener("input", render));
  btnSave.addEventListener("click", ()=>{ save(); toast("세션 플랜 저장됨"); });
  btnClear.addEventListener("click", ()=>{ clearAll(); toast("초기화 완료"); });

  // defaults
  if(!lossPct.value) lossPct.value = "5";
  if(!stakePct.value) stakePct.value = "2";
  if(!maxBets.value) maxBets.value = "3";

  load();
  render();
})();
/* ===== 마진 계산기 ===== */
let marginMode = "2";
function setMarginMode(mode) {
  marginMode = mode;
  const b2=document.getElementById("mMode2");
  const b3=document.getElementById("mMode3");
  const w2=document.getElementById("margin2");
  const w3=document.getElementById("margin3");
  if(!b2||!b3||!w2||!w3) return;
  if(mode==="2") {
    b2.classList.add("active"); b3.classList.remove("active");
    w2.style.display="block"; w3.style.display="none";
  } else {
    b3.classList.add("active"); b2.classList.remove("active");
    w3.style.display="block"; w2.style.display="none";
  }
}
function toNum(v) {
  const n = Number(String(v).replace(/,/g,"").trim());
  return Number.isFinite(n) ? n : NaN;
}
function calcSimpleMargin() {
  const card = document.getElementById("oddsSummaryCard");
  const mVal = document.getElementById("oddsMarginValue");
  const mSub = document.getElementById("oddsOverroundSub");
  const fairPills = document.getElementById("oddsFairPills");
  const probPills = document.getElementById("oddsProbPills");
  const note = document.getElementById("oddsSummaryNote");

  // legacy (hidden) nodes - keep for backward compatibility
  const out = document.getElementById("simpleMarginResult");
  const hint = document.getElementById("simpleMarginHint");

  const sportEl = document.getElementById("oddsSport");
  const sport = sportEl ? String(sportEl.value || "").trim() : "";
  const modeLabel = (marginMode==="2") ? "2-way" : "3-way";

  const setErr = (msg)=>{
    if(card && mVal){
      mVal.textContent = msg;
      if(mSub) mSub.textContent = "";
      if(fairPills) fairPills.innerHTML = "";
      if(probPills) probPills.innerHTML = "";
      if(note) note.textContent = "";
    }
    if(out) out.textContent = msg;
    if(hint) hint.textContent = "";
  };

  const makePills = (container, items, fmt)=>{
    if(!container) return;
    container.innerHTML = "";
    items.forEach(it=>{
      const s = document.createElement("span");
      s.className = "odds-pill " + (it.cls || "");
      s.innerHTML = `<span class="k">${it.k}</span> <span class="v">${fmt(it.v)}</span>`;
      container.appendChild(s);
    });
  };

  const prefix = sport ? (sport + " · ") : "";

  if(marginMode==="2") {
    const a = toNum(document.getElementById("m2A").value);
    const b = toNum(document.getElementById("m2B").value);
    if([a,b].some(x=>!Number.isFinite(x)||x<=1)) return setErr("배당 2개를 정확히 입력해 주세요. (1.01 이상)");

    const imp = (1/a) + (1/b);
    const over = imp * 100;
    const margin = (imp - 1) * 100;

    const pA = ((1/a) / imp) * 100;
    const pB = ((1/b) / imp) * 100;
    const fairA = 100 / pA;
    const fairB = 100 / pB;

    if(mVal) mVal.textContent = `${margin>=0?"+":""}${margin.toFixed(2)}%`;
    if(mSub) mSub.textContent = `오버라운드 ${over.toFixed(2)}%`;

    makePills(fairPills, [
      {k:"홈", v: fairA, cls:"home"},
      {k:"원정", v: fairB, cls:"away"},
    ], (v)=>Number(v).toFixed(2));

    makePills(probPills, [
      {k:"홈", v: pA, cls:"home"},
      {k:"원정", v: pB, cls:"away"},
    ], (v)=>Number(v).toFixed(1) + "%");

    if(note) note.textContent = `${prefix}${modeLabel} 입력 배당에서 오버라운드를 제거해 공정 배당 · 정규화 확률을 계산합니다.`;

    if(out) out.textContent = `${prefix}마진 : ${margin.toFixed(2)}%`;
    if(hint) hint.innerHTML =
      `정규화 확률: 홈 ${pA.toFixed(1)}% / 원정 ${pB.toFixed(1)}%<br>` +
      `공정 배당(정규화): 홈 ${fairA.toFixed(2)} / 원정 ${fairB.toFixed(2)}<br>` +
      `오버라운드: ${over.toFixed(2)}% (100% 초과분 = 마진)`;

  } else {
    const h = toNum(document.getElementById("m3H").value);
    const d = toNum(document.getElementById("m3D").value);
    const a = toNum(document.getElementById("m3A").value);
    if([h,d,a].some(x=>!Number.isFinite(x)||x<=1)) return setErr("배당 3개를 정확히 입력해 주세요. (1.01 이상)");

    const imp = (1/h) + (1/d) + (1/a);
    const over = imp * 100;
    const margin = (imp - 1) * 100;

    const pH = ((1/h) / imp) * 100;
    const pD = ((1/d) / imp) * 100;
    const pA = ((1/a) / imp) * 100;
    const fairH = 100 / pH;
    const fairD = 100 / pD;
    const fairA = 100 / pA;

    if(mVal) mVal.textContent = `${margin>=0?"+":""}${margin.toFixed(2)}%`;
    if(mSub) mSub.textContent = `오버라운드 ${over.toFixed(2)}%`;

    makePills(fairPills, [
      {k:"홈", v: fairH, cls:"home"},
      {k:"무", v: fairD, cls:"draw"},
      {k:"원정", v: fairA, cls:"away"},
    ], (v)=>Number(v).toFixed(2));

    makePills(probPills, [
      {k:"홈", v: pH, cls:"home"},
      {k:"무", v: pD, cls:"draw"},
      {k:"원정", v: pA, cls:"away"},
    ], (v)=>Number(v).toFixed(1) + "%");

    if(note) note.textContent = `${prefix}${modeLabel} 입력 배당에서 오버라운드를 제거해 공정 배당 · 정규화 확률을 계산합니다.`;

    if(out) out.textContent = `${prefix}마진 : ${margin.toFixed(2)}%`;
    if(hint) hint.innerHTML =
      `정규화 확률: 홈 ${pH.toFixed(1)}% / 무 ${pD.toFixed(1)}% / 원정 ${pA.toFixed(1)}%<br>` +
      `공정 배당(정규화): 홈 ${fairH.toFixed(2)} / 무 ${fairD.toFixed(2)} / 원정 ${fairA.toFixed(2)}<br>` +
      `오버라운드: ${over.toFixed(2)}% (100% 초과분 = 마진)`;
  }
}

/* ===== 카드 메타(필터/정렬용) ===== */
(function enrichCards() {
  const set = (id, patch)=>{ CARD_DATA[id] = Object.assign({tag:"", priority:"normal", recruit:false, reasons:[]}, CARD_DATA[id], patch); };

  set("card1", {tag:"rec", priority:"high", reasons:["고액전용 전용 무제제 삼치기OK", "입금플러스 5+2 10+3 20+4", " 승인 문의 필수!!"]});
  set("card2", {tag:"rec", priority:"high", reasons:["1레벨 카지노 배팅한도:3000만원 ", "신규 가입 혜택", "테더 입.출금 가능"]});
  set("card3", {tag:"rec", priority:"high", reasons:["1레벨 카지노 배팅한도:3000만원", "신규 가입 혜택", "테더 입.출금 가능"]});
  set("card4", {tag:"rec", priority:"normal", reasons:["입플 폭이 넓어 선택지 다양", "혜택 분리 안내", "문의 채널 고정"]});
  set("card5", {tag:"new", priority:"normal", reasons:["원화/USDT 선택 가능", "페이백 비중 높은 편", "고액 유저 기준 확인"]});
  set("card6", {tag:"new", priority:"normal", reasons:["신규/매충/페이백 조합", "유지형 구성", "문의 라인이 명확"]});
  set("card7", {tag:"rec", priority:"normal", reasons:["미겜 혜택 요약", "첫충/페이백/출석 구성", "코드 입력 필수"]});
  set("card8", {tag:"rec", priority:"normal", reasons:["스포츠+미겜 혜택", "첫충/페이백/출석 구성", "코드 입력 필수"]});
  set("card9", {tag:"new", priority:"normal", reasons:["입플/페이백 중심 안내", "고액 유저 기준 혜택", "문의 채널 고정"]});
  set("card10", {tag:"new", priority:"normal", reasons:["입플/페이백 중심 안내", "고액 유저 기준 혜택", "문의 채널 고정"]});
  set("card11", {tag:"new", priority:"normal", reasons:["입플/페이백 중심 안내", "고액 유저 기준 혜택", "문의 채널 고정"]});
})();

/* ===== 카드 렌더/필터/인기순 ===== */

/* ===== 로컬 인사이트(가짜 방문자 대신) ===== */
const STATS_KEY = "88_local_stats_v1";
function dayKeyLocal(){
  const d = new Date();
  const y = d.getFullYear();
  const m = String(d.getMonth()+1).padStart(2,"0");
  const dd = String(d.getDate()).padStart(2,"0");
  return `${y}-${m}-${dd}`;
}
function loadStats(){
  try{
    const raw = localStorage.getItem(STATS_KEY);
    const s = raw ? JSON.parse(raw) : {};
    return ensureToday(s);
  }catch(e){
    return ensureToday({});
  }
}
function saveStats(s){
  try{ localStorage.setItem(STATS_KEY, JSON.stringify(s)); }catch(e){}
}
function ensureToday(s){
  const today = dayKeyLocal();
  if(!s || typeof s !== "object") s = {};
  if(s.day !== today){
    s.day = today;
    s.today = { views:{}, searches:{} };
  }
  if(!s.today) s.today = { views:{}, searches:{} };
  if(!s.today.views) s.today.views = {};
  if(!s.today.searches) s.today.searches = {};
  if(!s.total) s.total = { views:{}, searches:{} };
  if(!s.total.views) s.total.views = {};
  if(!s.total.searches) s.total.searches = {};
  return s;
}
function bumpObjCount(obj, key, inc=1){
  if(!key) return;
  obj[key] = (obj[key]||0) + inc;
}
function normKw(s){
  return String(s||"")
    .replace(/[\u0000-\u001f]/g," ")
    .trim();
}
function tokenize(q){
  const t = normKw(q);
  if(!t) return [];
  // 공백/쉼표/슬래시 기준, 짧은 토큰 제거
  return t.split(/[\s,\/|]+/g)
    .map(x=>x.trim())
    .filter(x=>x.length>=2)
    .slice(0, 12);
}
function bumpView(cardId){
  const s = loadStats();
  bumpObjCount(s.today.views, cardId, 1);
  bumpObjCount(s.total.views, cardId, 1);
  saveStats(s);
  renderInsights();
}
function bumpSearch(rawQuery){
  const s = loadStats();
  // GA4: recommended event name "search" with parameter "search_term"
  track("search", {"search_term": String(rawQuery||"").trim().slice(0,80), "results_count": document.querySelectorAll(".card[data-card]").length, "q_len": String(rawQuery||"").trim().length});
  const tokens = tokenize(rawQuery);
  if(!tokens.length) return;
  tokens.forEach(tok=>{
    // 영문/숫자는 대문자 정규화
    const key = tok.replace(/[a-z0-9]/gi, (c)=> c.toUpperCase());
    bumpObjCount(s.today.searches, key, 1);
    bumpObjCount(s.total.searches, key, 1);
  });
  saveStats(s);
  renderInsights();
}
function topN(obj, n=5){
  return Object.entries(obj||{})
    .sort((a,b)=> (b[1]-a[1]) || a[0].localeCompare(b[0]))
    .slice(0,n);
}
function renderLocalInsights(){
  const kwBox = document.getElementById("insightKeywords");
  const cardBox = document.getElementById("insightCards");
  const resetBtn = document.getElementById("insightResetBtn");
  if(!kwBox && !cardBox) return;

  const s = loadStats();

  // Keywords
  if(kwBox){
    const list = topN(s.today.searches, 10);
    if(list.length){
      kwBox.innerHTML = list.map(([kw,c],i)=>`
        <div class="stat-item">
          <div class="stat-left">
            <div class="stat-rank">${i+1}</div>
            <button class="stat-link" type="button" data-kw="${kw.replace(/"/g,'&quot;')}">${kw}</button>
          </div>
          <div class="stat-count">${c}</div>
        </div>
      `).join("");
    } else {
      // fallback: 추천 키워드(가짜 인기 아님)
      const fallback = ["CAPS","VEGAS","페이백","USDT","파워볼","키노","슬롯","미니게임"];
      kwBox.innerHTML = fallback.map((kw,i)=>`
        <div class="stat-item">
          <div class="stat-left">
            <div class="stat-rank">${i+1}</div>
            <button class="stat-link" type="button" data-kw="${kw}">${kw}</button>
          </div>
          <div class="stat-count">추천</div>
        </div>
      `).join("");
    }
  }

  // Cards
  if(cardBox){
    const list = topN(s.today.views, 5);
    if(list.length){
      cardBox.innerHTML = list.map(([id,c],i)=>{
        const title = (CARD_DATA[id]?.title)||id;
        return `
          <div class="stat-item">
            <div class="stat-left">
              <div class="stat-rank">${i+1}</div>
              <button class="stat-link" type="button" data-card="${id}">${title}</button>
            </div>
            <div class="stat-count">${c}</div>
          </div>
        `;
      }).join("");
    } else {
      cardBox.innerHTML = `<div class="note-mini" style="padding:12px 14px 14px;">아직 오늘 열어본 카드가 없습니다. 카드 상세를 열면 TOP 리스트가 자동으로 채워집니다.</div>`;
    }
  }

  // bindings
  document.querySelectorAll("[data-kw]").forEach(btn=>{
    btn.onclick = ()=>{
      const kw = btn.getAttribute("data-kw") || "";
      const input = document.getElementById("searchInput");
      if(input){ input.value = kw; renderGrid(); input.focus(); }
      track("insight_kw_click", {"kw": kw});
    };
  });
  document.querySelectorAll("[data-card]").forEach(btn=>{
    btn.onclick = ()=>{
      const id = btn.getAttribute("data-card");
      if(id) openCard(id);
      track("insight_card_click", {"card_id": id});
    };
  });

  if(resetBtn){
    resetBtn.onclick = ()=>{
      try{ localStorage.removeItem(STATS_KEY); }catch(e){}
      renderInsights();
      track("insight_reset", {});
    };
  }
}


// ===== Global Insights (전체 사용자 인기: GA4 Data API 등) =====
let __INSIGHTS_MODE = "auto"; // "auto" | "global" | "local"
let __GLOBAL_INSIGHTS_CACHE = null;
let __GLOBAL_INSIGHTS_AT = 0;

function hasGlobalInsights() {
  const api = (window.SITE_CONFIG && window.SITE_CONFIG.POPULAR_API) || "";
  return api && api !== "disabled" && !/^\s*$/.test(api);
}

function bindInsightButtons() {
  document.querySelectorAll("[data-kw]").forEach(btn=>{
    btn.onclick = ()=>{
      const kw = btn.getAttribute("data-kw") || "";
      const input = document.getElementById("searchInput");
      if(input){ input.value = kw; renderGrid(); input.focus(); }
      track("insight_kw_click", {"kw": kw});
    };
  });
  document.querySelectorAll("[data-card]").forEach(btn=>{
    btn.onclick = ()=>{
      const id = btn.getAttribute("data-card");
      if(id) openCard(id);
      track("insight_card_click", {"card_id": id});
    };
  });
}

function renderGlobalInsights(data) {
  const kwBox = document.getElementById("insightKeywords");
  const cardBox = document.getElementById("insightCards");
  const resetBtn = document.getElementById("insightResetBtn");
  const kwMeta = document.getElementById("insightKwMeta");
  const cardMeta = document.getElementById("insightCardMeta");
  const headline = document.getElementById("insightHeadline");

  if(headline){
    const date = data && data.date ? String(data.date) : "";
    headline.innerHTML = `오늘의 인기 <span class="pill">전체 사용자 기준</span>` + (date ? `<span class="pill ghost">${date}</span>` : "");
  }
  if(resetBtn) resetBtn.style.display = "none";
  if(kwMeta) kwMeta.textContent = "GA4 이벤트(검색) 기준으로 집계됩니다.";
  if(cardMeta) cardMeta.textContent = "GA4 이벤트(카드 열람) 기준으로 집계됩니다.";

  if(kwBox){
    const list = (data && Array.isArray(data.keywords)) ? data.keywords : [];
    if(list.length){
      kwBox.innerHTML = list.slice(0,10).map((it,i)=>{
        const kw = (it.term || it.keyword || "").toString();
        const c = (it.count ?? it.value ?? "").toString();
        return `
          <div class="stat-item">
            <div class="stat-left">
              <div class="stat-rank">${i+1}</div>
              <button class="stat-link" type="button" data-kw="${kw.replace(/"/g,'&quot;')}">${kw}</button>
            </div>
            <div class="stat-count">${c}</div>
          </div>
        `;
      }).join("");
    } else {
      kwBox.innerHTML = `<div class="stat-empty">아직 데이터가 충분히 쌓이지 않았어요.</div>`;
    }
  }

  if(cardBox){
    const list = (data && Array.isArray(data.cards)) ? data.cards : [];
    if(list.length){
      cardBox.innerHTML = list.slice(0,5).map((it,i)=>{
        const id = (it.id || it.card_id || "").toString();
        const c = (it.count ?? it.value ?? "").toString();
        const title = (CARD_DATA[id]?.title) || id;
        return `
          <div class="stat-item">
            <div class="stat-left">
              <div class="stat-rank">${i+1}</div>
              <button class="stat-link" type="button" data-card="${id}">${title}</button>
            </div>
            <div class="stat-count">${c}</div>
          </div>
        `;
      }).join("");
    } else {
      cardBox.innerHTML = `<div class="stat-empty">아직 데이터가 충분히 쌓이지 않았어요.</div>`;
    }
  }

  bindInsightButtons();
}

async function tryLoadGlobalInsights(force=false) {
  if(!hasGlobalInsights()) return false;
  if(!force && __GLOBAL_INSIGHTS_CACHE && (Date.now()-__GLOBAL_INSIGHTS_AT) < 60_000) return true;

  const api = window.SITE_CONFIG.POPULAR_API;
  try{
    const url = api.includes("?") ? (api + "&range=today") : (api + "?range=today");
    const res = await fetch(url, { cache: "no-store" });
    if(!res.ok) throw new Error("bad status");
    const data = await res.json();
    __GLOBAL_INSIGHTS_CACHE = data;
    __GLOBAL_INSIGHTS_AT = Date.now();
    __INSIGHTS_MODE = "global";
    renderGlobalInsights(data);
    return true;
  }catch(e){
    return false;
  }
}

function renderInsights() {
  if(__INSIGHTS_MODE === "global") {
    if(__GLOBAL_INSIGHTS_CACHE) renderGlobalInsights(__GLOBAL_INSIGHTS_CACHE);
    return;
  }
  renderLocalInsights();
}

async function initInsights() {
  // url param: ?insights=local 로 강제
  try{
    const u = new URL(location.href);
    const force = (u.searchParams.get("insights")||"").toLowerCase();
    if(force === "local"){ __INSIGHTS_MODE = "local"; renderLocalInsights(); return; }
  }catch(e){}
  const ok = await tryLoadGlobalInsights(true);
  if(!ok){ __INSIGHTS_MODE = "local"; renderLocalInsights(); }
}




const CLICK_KEY_PREFIX = "88_card_click_";
let currentFilter = "all";
let currentSort = "default";
let isCleanText = false;

function cleanBenefit(s) {
  const t = String(s||"")
    .replace(/[•]/g,"·")
    .replace(/\s*\/\s*/g," / ")
    .replace(/\s+/g," ")
    .trim();

  const max = 56;
  return t.length > max ? (t.slice(0, max-1) + "…") : t;
}


function norm(s){ return String(s||"").toLowerCase().replace(/\s+/g,""); }
function getClickCount(id){ return Number(localStorage.getItem(CLICK_KEY_PREFIX + id) || 0); }
function incCardClick(id){ localStorage.setItem(CLICK_KEY_PREFIX + id, String(getClickCount(id) + 1)); }

// ===== Favorites / Recents (client-only, additive) =====
function cardSourcesById(id) {
  const n = String(id).replace("card","");
  // GIF는 실제로 업로드된 카드만 지정하세요 (없는 경우 아예 요청하지 않음)
  // 예) card2: img/imj2.gif, card3: img/img3.gif
  const GIF_OVERRIDES = {
    // GIF가 있는 카드만 여기에 등록 (없으면 아예 요청하지 않음)
    // card2는 파일명이 img2.gif / imj2.gif 둘 중 하나일 수 있어 2단 폴백 지원
    card2: ["img/img2.gif", "img/imj2.gif"],
    card3: ["img/img3.gif"]
  };

  const g = GIF_OVERRIDES[id];
  const gif  = Array.isArray(g) ? (g[0] || "") : (g || "");
  const gif2 = Array.isArray(g) ? (g[1] || "") : "";

  return {
    gif,
    gif2,
    webp: `img/img${n}.webp`,
    jpg: `img/img${n}.jpg`
  };
}

// 호환: 카드 소스 헬퍼 (이름 차이로 인한 렌더 에러 방지)
const getCardSources = (id)=> cardSourcesById(id);

function renderGrid() {
  const gridG = document.getElementById("vendorGridGuarantee");
  const gridV = document.getElementById("vendorGridVerified");

  // (호환) 과거 버전에서 vendorGrid만 있던 경우도 안전 처리
  const legacy = document.getElementById("vendorGrid");
  if(!gridG && !gridV && !legacy) return;

  const q = norm(document.getElementById("searchInput")?.value || "");

  // (보증 놀이터) 이 배열에 카드 ID를 추가하면 보증 섹션으로 자동 분류됩니다.
  // 예) ["card1","card2","card3","card12"...]
  const GUARANTEE_ORDER = ["card1","card2","card3"];
  const GUARANTEE_SET = new Set(GUARANTEE_ORDER);

  const ids = Object.keys(CARD_DATA);

  // 기본값 보정(로딩/표시 오류 방지): priority 없으면 normal로 간주
  ids.forEach(id=>{
    const d = CARD_DATA[id] || {};
    if(!d.priority) d.priority = "normal";
    if(!d.tag) d.tag = "";
  });

  const isGuarantee = (id)=> GUARANTEE_SET.has(id);

  // 정렬: high 랜덤 -> normal 랜덤 -> 광고 마지막 (인기순은 별도)
  const shuffle = (arr)=> arr.slice().sort(()=>Math.random()-0.5);
  const orderByPriority = (arr)=>{
    const high = arr.filter(id=>CARD_DATA[id].priority==="high");
    const normal = arr.filter(id=>CARD_DATA[id].priority==="normal");
    const ad = arr.filter(id=>CARD_DATA[id].priority==="ad");
    return [...shuffle(high), ...shuffle(normal), ...ad];
  };

  // (보증) 지정 순서 유지 + 추가로 지정된 보증 카드가 있으면 뒤에 붙임
  const guaranteeAll = [
    ...GUARANTEE_ORDER.filter(id=>ids.includes(id)),
    ...ids.filter(id=>isGuarantee(id) && !GUARANTEE_ORDER.includes(id))
  ];

  const verifiedAll = ids.filter(id=>!isGuarantee(id));

  // 기본 순서(기본 정렬)
  let baseG = guaranteeAll;
  let baseV = orderByPriority(verifiedAll);

  // 필터/검색
  const match = (id)=>{
    const d = CARD_DATA[id];

    // 섹션 필터
    if(currentFilter==="guarantee" && !isGuarantee(id)) return false;
    if(currentFilter==="verified"  &&  isGuarantee(id)) return false;

    // 기존 태그 필터(호환)
    if(currentFilter==="rec" && d.tag!=="rec") return false;
    if(currentFilter==="new" && d.tag!=="new") return false;
    if(currentFilter==="ad"  && d.tag!=="ad") return false;

    if(q) {
      const hay = norm(`${d.title} ${d.code||""} ${d.benefit||""} ${d.notice||""} ${(d.recruitText||"")}`);
      if(!hay.includes(q)) return false;
    }
    return true;
  };

  let listG = baseG.filter(match);
  let listV = baseV.filter(match);

  if(currentSort==="pop") {
    listG.sort((a,b)=> getClickCount(b)-getClickCount(a));
    listV.sort((a,b)=> getClickCount(b)-getClickCount(a));
  }

  const cardHTML = (id)=>{
    const d = CARD_DATA[id] || {};
    const src = getCardSources(id);
    const firstSrc = src.gif || src.webp || src.jpg || "";
    return `
      <div class="card card--imageOnly" data-card="${id}" role="button" tabindex="0"
           aria-label="${(d.title||"카드").replace(/"/g,'&quot;')} 열기">
        <div class="img-box">
          <img class="cardThumb"
               src="${firstSrc}"
               data-gif="${src.gif}"
               data-gif2="${src.gif2||""}"
               data-webp="${src.webp}"
               data-jpg="${src.jpg}"
               loading="lazy" decoding="async"
               alt="${(d.title||"").replace(/"/g,'&quot;')}">
          <div class="img-title" aria-hidden="true">${d.title || ""}</div>
        </div>
      </div>
    `;
  };

  const outG = listG.map(cardHTML).join("");
  const outV = listV.map(cardHTML).join("");

  if(gridG) gridG.innerHTML = outG;
  if(gridV) gridV.innerHTML = outV;

  // 레거시 grid 지원(혹시 old markup이면 한 번에 뿌림)
  if(legacy && !gridG && !gridV) legacy.innerHTML = [...listG, ...listV].map(cardHTML).join("");

  // 섹션 빈 상태면 숨김
  document.querySelectorAll(".vendor-section").forEach(sec=>{
    const s = sec.getAttribute("data-section");
    const grid = sec.querySelector(".vendor-grid");
    const has = !!grid && grid.querySelectorAll(".card[data-card]").length > 0;
    sec.style.display = has ? "block" : "none";
  });

  // blur bg 세팅 + 이미지 에러 대응
  document.querySelectorAll(".img-box").forEach(box=>{
    const img = box.querySelector("img");
    if(!img) return;

    // GIF 우선 → WEBP → JPG 순서로 자동 폴백
    const chain = [img.dataset.gif, img.dataset.gif2, img.dataset.webp, img.dataset.jpg].filter(Boolean);
    let step = 0;

    const applyBg = ()=>{
      let bg = img.currentSrc || img.src || "";
      if(bg.endsWith(".gif")) bg = img.dataset.webp || img.dataset.jpg || bg; // GIF는 블러 배경에 부하가 커서 정적 이미지 우선
      box.style.setProperty("--bgimg", bg ? `url('${bg}')` : "none");
    };

    img.addEventListener("load", applyBg, { once:false, passive:true });

    img.onerror = ()=>{
      step += 1;
      if(chain[step]) {
        img.src = chain[step];
        return;
      }
      img.style.display="none";
      box.style.minHeight="130px";
    };

    // 초기 src가 비어있으면 체인 첫 값으로 세팅
    if(!img.getAttribute("src") && chain[0]) img.src = chain[0];
    applyBg();
  });

  setChipActive();
  bindCardClicks();
}

function setChipActive() {
  // 기존 v-chip(배찌) UI 제거 → select / toggle 상태만 동기화
  const filterSel = document.getElementById("filterSelect");
  const sortSel   = document.getElementById("sortSelect");
  const cleanTgl  = document.getElementById("cleanToggle");
  if(filterSel) filterSel.value = currentFilter;
  if(sortSel)   sortSel.value   = currentSort;
  if(cleanTgl)  cleanTgl.checked = !!isCleanText;
}

function setFilter(key) {
  currentFilter = key || "all";
  setChipActive();
  renderGrid();
if(currentFilter!=="all") {
    const top = document.getElementById("vendorTop");
    if(top) top.scrollIntoView({behavior:"smooth", block:"start"});
  }
  track("filter_change", {"filter": currentFilter, "results_count": document.querySelectorAll(".card[data-card]").length});
}

function setSort(key) {
  currentSort = key || "default";
  setChipActive();
  renderGrid();
track("sort_change", {"sort": currentSort, "results_count": document.querySelectorAll(".card[data-card]").length});
}


function bindCardClicks() {
  document.querySelectorAll(".card[data-card]").forEach(el=>{
    el.onclick = ()=> openCard(el.dataset.card);
  });

  // 공유 버튼(카드 내부) 클릭은 팝업 오픈 대신 공유 팝업을 엽니다.
  document.querySelectorAll("[data-share]").forEach(btn=>{
    const open = (e)=>{
      e.preventDefault();
      e.stopPropagation();
      const id = btn.getAttribute("data-share");
      openShare(id);
    };
    btn.addEventListener("click", open);
    btn.addEventListener("keydown", (e)=>{
      if(e.key==="Enter" || e.key===" "){ open(e); }
    });
  });

}

(function bindControlsAndSearch() {
  const filterSel = document.getElementById("filterSelect");
  const sortSel   = document.getElementById("sortSelect");
  const cleanTgl  = document.getElementById("cleanToggle");
  const cleanHint = document.getElementById("cleanHint");

  // 상태 복원
  const savedFilter = sessionStorage.getItem("88_filter");
  const savedSort   = sessionStorage.getItem("88_sort");
  const savedClean  = sessionStorage.getItem("88_clean_text");

  if(savedFilter) currentFilter = savedFilter;
  if(savedFilter === "pop") { currentFilter = "all"; currentSort = "pop"; }
  if(savedSort)   currentSort   = savedSort;
  if(savedClean === "1") isCleanText = true;

  setChipActive();
  if(cleanHint) cleanHint.style.display = "block";

  if(filterSel) {
    filterSel.addEventListener("change", ()=>{
      sessionStorage.setItem("88_filter", filterSel.value);
      setFilter(filterSel.value);
    });
  }

  if(sortSel) {
    sortSel.addEventListener("change", ()=>{
      sessionStorage.setItem("88_sort", sortSel.value);
      setSort(sortSel.value);
    });
  }

  if(cleanTgl) {
    cleanTgl.addEventListener("change", ()=>{
      isCleanText = !!cleanTgl.checked;
      sessionStorage.setItem("88_clean_text", isCleanText ? "1" : "0");
      setChipActive();
      renderGrid();
track("clean_text_toggle", {"state": isCleanText ? "on" : "off"});
    });
  }

  const input = document.getElementById("searchInput");
  if(input) {
    let kwTimer = null;
    input.addEventListener("input", ()=> {
      renderGrid();
clearTimeout(kwTimer);
      const v = input.value;
      kwTimer = setTimeout(()=> bumpSearch(v), 900);
    });
    input.addEventListener("keydown", (e)=>{
      if(e.key === "Enter"){ bumpSearch(input.value); }
    });
  }

  // (UI) 모바일: 필터/정렬을 "한 줄 요약 + 드롭다운"으로 compact 처리
  (function setupCompactControls(){
    const tools = document.querySelector(".vendor-tools");
    const controls = tools ? tools.querySelector(".v-controls") : null;
    if(!tools || !controls) return;
    const mql = window.matchMedia("(max-width:560px)");
    let details = null;
    let summaryEl = null;

    function makeSummary(){
      const f = filterSel ? (filterSel.options[filterSel.selectedIndex]?.text || "") : "";
      const s = sortSel ? (sortSel.options[sortSel.selectedIndex]?.text || "") : "";
      const c = (cleanTgl && cleanTgl.checked) ? "정제 ON" : "정제 OFF";
      const q = (input && input.value) ? input.value.trim() : "";
      const qShort = q ? (q.length > 10 ? (q.slice(0,10) + "…") : q) : "";
      const qPart = qShort ? ` · "${qShort}"` : "";
      return `${f} · ${s} · ${c}${qPart}`;
    }

    function update(){
      if(summaryEl) summaryEl.textContent = makeSummary();
    }

    function apply(on){
      if(on){
        if(details) { update(); return; }
        details = document.createElement("details");
        details.className = "v-compact";
        const summary = document.createElement("summary");
        summary.innerHTML = `<span class="sum"></span><span class="caret" aria-hidden="true">▾</span>`;
        summaryEl = summary.querySelector(".sum");
        details.appendChild(summary);

        // searchInput 바로 아래에 삽입
        const search = tools.querySelector("#searchInput");
        if(search) search.insertAdjacentElement("afterend", details);
        else tools.insertBefore(details, tools.firstChild);

        // 기존 컨트롤 DOM 이동(아이디/이벤트 그대로 유지)
        details.appendChild(controls);
        update();
      } else {
        if(!details) return;
        const search = tools.querySelector("#searchInput");
        if(search) search.insertAdjacentElement("afterend", controls);
        else tools.insertBefore(controls, tools.firstChild);
        details.remove();
        details = null;
        summaryEl = null;
      }
    }

    if(filterSel) filterSel.addEventListener("change", update);
    if(sortSel) sortSel.addEventListener("change", update);
    if(cleanTgl) cleanTgl.addEventListener("change", update);
    if(input) input.addEventListener("input", update);

    if(mql.addEventListener) mql.addEventListener("change", (e)=> apply(e.matches));
    else mql.addListener((e)=> apply(e.matches));

    apply(mql.matches);
  })();

})();/* ===== 팝업 + 접근성 ===== */
let currentCode="";
let currentCardId="";
let lastFocusEl=null;

function openCard(id) {
  const d = CARD_DATA[id];
  if(!d) return;

  currentCardId = id;
bumpView(id);
  incCardClick(id);
  track("card_open", {"card_id": id, "title": d.title || "", "tag": d.tag || "", "code": (d.code||"").slice(0,16)});

  const isRecruit = !!d.recruit;

  currentCode = (isRecruit ? "" : (d.code || ""));
  document.getElementById("pTitle").innerText = d.title || "";
  document.getElementById("pCode").innerText  = (d.code || "");

  document.getElementById("codeRow").style.display = isRecruit ? "none" : "block";
  document.getElementById("copyBtn").style.display = isRecruit ? "none" : "block";
  document.getElementById("pLink").style.display = isRecruit ? "none" : "block";

  // 혜택/주의
  const pBenefit = document.getElementById("pBenefit");
  const pNotice  = document.getElementById("pNotice");
  pBenefit.style.display = (d.benefit && !isRecruit) ? "block" : "none";
  pBenefit.innerText = (d.benefit && !isRecruit) ? ("혜택 : " + d.benefit) : "";
  pNotice.style.display = d.notice ? "block" : "none";
  pNotice.innerText = d.notice ? ("주의 : " + d.notice) : "";

  // 링크/텔레그램 (+UTM)
  const btnGo = document.getElementById("pLink");
  if(btnGo) {
    btnGo.href = d.link ? appendUtm(d.link) : "#";
  }

  const tg = (d.telegram || "UZU59").replace("@","");
  const pTelegram = document.getElementById("pTelegram");
  pTelegram.href = appendUtm("https://t.me/" + tg);
  pTelegram.innerText = isRecruit ? ("광고 문의 @" + tg) : ("텔레그램 상담 @" + tg);

  // 안내 3줄
  const rBox = document.getElementById("reasonBox");
  const rTitle = document.getElementById("reasonTitle");
  const r1 = document.getElementById("reason1");
  const r2 = document.getElementById("reason2");
  const r3 = document.getElementById("reason3");

  rBox.style.display = "block";
  if(isRecruit) {
    rTitle.innerText = "광고 문의 안내";
    r1.innerText = "• 광고/제휴 문의는 텔레그램으로만 진행합니다.";
    r2.innerText = "• 배너/카드/문구 구성은 협의 후 반영합니다.";
    r3.innerText = "• 문의: @" + tg;
  } else {
    const reasons = (d.reasons && d.reasons.length) ? d.reasons : ["안정성/이력 중심", "조건/안내가 비교적 명확", "문의 채널 고정"];
    rTitle.innerText = "안내";
    r1.innerText = "• " + (reasons[0] || "");
    r2.innerText = "• " + (reasons[1] || "");
    r3.innerText = "• " + (reasons[2] || "");
  }

  lastFocusEl = document.activeElement;
  const popup = document.getElementById("cardPopup");
  popup.style.display="flex";

  // 포커스 이동
  const focusTarget = document.getElementById("closeBtn");
  if(focusTarget) focusTarget.focus();
}

function closeCard() {
  const popup = document.getElementById("cardPopup");
  popup.style.display="none";
  if(lastFocusEl && lastFocusEl.focus) lastFocusEl.focus();
}

function copyCode() {
  if(!currentCode) return;
  navigator.clipboard.writeText(currentCode).then(()=>{
    alert("가입코드가 복사되었습니다");
    track("copy_code", {"code": currentCode, "card_id": currentCardId, "title": (CARD_DATA[currentCardId]?.title)||"", "tag": (CARD_DATA[currentCardId]?.tag)||""});
  }).catch(()=>{
    // fallback
    try {
      const t=document.createElement("textarea");
      t.value=currentCode;
      document.body.appendChild(t);
      t.select();
      document.execCommand("copy");
      t.remove();
      alert("가입코드가 복사되었습니다");
      track("copy_code", {"code": currentCode, "card_id": currentCardId, "title": (CARD_DATA[currentCardId]?.title)||"", "tag": (CARD_DATA[currentCardId]?.tag)||""});
    } catch(e) {}
  });
}

function copyToClipboard(text, okMsg) {
  if(!text) return;
  navigator.clipboard.writeText(text).then(()=>{
    if(okMsg) alert(okMsg);
  }).catch(()=>{
    // fallback
    try {
      const t=document.createElement("textarea");
      t.value=text;
      document.body.appendChild(t);
      t.select();
      document.execCommand("copy");
      t.remove();
      if(okMsg) alert(okMsg);
    } catch(e) {}
  });
}

function buildDeepLink(id) {
  try {
    const u = new URL(window.location.href);
    u.searchParams.set("v", id);
    return u.toString();
  } catch(e) {
    return window.location.href;
  }
}

function shareTextFor(id) {
  const d = CARD_DATA[id];
  if(!d) return "";
  const title = d.title || "";
  const benefit = cleanBenefit(d.benefit || "").replace(/\s+/g," ").trim();
  const code = d.code ? `가입코드: ${d.code}` : "";
  const link = buildDeepLink(id);
  return [`88 인증 놀이터 - ${title}`, benefit, code, link].filter(Boolean).join("\n");
}

function openShare(id) {
  const d = CARD_DATA[id];
  if(!d) return;

  currentCardId = id;
const popup = document.getElementById("sharePopup");
  const link = buildDeepLink(id);
  const linkInput = document.getElementById("shareLink");
  if(linkInput) linkInput.value = link;

  drawShareCard(d, link);

  lastFocusEl = document.activeElement;
  if(popup) popup.style.display="flex";
  const focusTarget = document.getElementById("closeShareBtn");
  if(focusTarget) focusTarget.focus();

  track("share_open", {"card_id": id, "title": d.title || ""});
}

function closeShare() {
  const popup = document.getElementById("sharePopup");
  if(popup) popup.style.display="none";
  try { if(lastFocusEl) lastFocusEl.focus(); } catch(e) {}
}

function copyShareLink() {
  const link = document.getElementById("shareLink")?.value || "";
  copyToClipboard(link, "공유 링크가 복사되었습니다");
  track("share_copy_link", {"card_id": currentCardId});
}

function copyShareText() {
  const txt = shareTextFor(currentCardId);
  copyToClipboard(txt, "공유 문구가 복사되었습니다");
  track("share_copy_text", {"card_id": currentCardId});
}

function downloadShareImage() {
  const c = document.getElementById("shareCanvas");
  if(!c) return;
  const a = document.createElement("a");
  const safe = (CARD_DATA[currentCardId]?.title || "share").replace(/[^a-z0-9가-힣_-]+/gi, "_");
  a.download = `88_${safe}.png`;
  a.href = c.toDataURL("image/png");
  document.body.appendChild(a);
  a.click();
  a.remove();
  track("share_download_image", {"card_id": currentCardId});
}

function roundRect(ctx, x, y, w, h, r){
  const rr = Math.min(r, w/2, h/2);
  ctx.beginPath();
  ctx.moveTo(x+rr, y);
  ctx.arcTo(x+w, y, x+w, y+h, rr);
  ctx.arcTo(x+w, y+h, x, y+h, rr);
  ctx.arcTo(x, y+h, x, y, rr);
  ctx.arcTo(x, y, x+w, y, rr);
  ctx.closePath();
}

function wrapText(ctx, text, x, y, maxWidth, lineHeight, maxLines){
  const words = (text||"").split(" ");
  let line = "";
  let lineCount = 0;
  for(let n=0; n<words.length; n++){
    const testLine = line + (line ? " " : "") + words[n];
    const metrics = ctx.measureText(testLine);
    if(metrics.width > maxWidth && line){
      ctx.fillText(line, x, y + lineCount*lineHeight);
      line = words[n];
      lineCount++;
      if(maxLines && lineCount >= maxLines) return;
    } else {
      line = testLine;
    }
  }
  if(line && (!maxLines || lineCount < maxLines)){
    ctx.fillText(line, x, y + lineCount*lineHeight);
  }
}

function drawShareCard(d, link) {
  const c = document.getElementById("shareCanvas");
  if(!c) return;
  const ctx = c.getContext("2d");
  const W = c.width, H = c.height;

  ctx.clearRect(0,0,W,H);

  // 배경
  const g = ctx.createLinearGradient(0,0,W,H);
  g.addColorStop(0,"#0b0b0f");
  g.addColorStop(1,"#12121a");
  ctx.fillStyle = g;
  ctx.fillRect(0,0,W,H);

  // 글로우
  ctx.fillStyle = "rgb(var(--accentRGB) / 0.12)";
  ctx.beginPath();
  ctx.ellipse(W*0.58, H*0.14, W*0.55, H*0.22, 0, 0, Math.PI*2);
  ctx.fill();

  ctx.fillStyle = "rgba(90,160,255,0.10)";
  ctx.beginPath();
  ctx.ellipse(W*0.32, H*0.22, W*0.46, H*0.18, 0, 0, Math.PI*2);
  ctx.fill();

  // 패널
  const pad = 72;
  const cardX = pad, cardY = pad, cardW = W - pad*2, cardH = H - pad*2;
  roundRect(ctx, cardX, cardY, cardW, cardH, 42);
  ctx.fillStyle = "rgba(255,255,255,0.06)";
  ctx.fill();
  ctx.strokeStyle = "rgba(255,255,255,0.10)";
  ctx.lineWidth = 2;
  ctx.stroke();

  // 헤더 pill
  const pillH = 64, pillW = 260;
  roundRect(ctx, cardX+44, cardY+44, pillW, pillH, 999);
  ctx.fillStyle = "rgb(var(--accentRGB) / 0.95)";
  ctx.fill();

  ctx.fillStyle = "#111";
  ctx.font = "900 34px system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Malgun Gothic, sans-serif";
  ctx.fillText("88 인증 놀이터", cardX+44+26, cardY+44+44);

  // 제목
  ctx.fillStyle = "#fff";
  ctx.font = "900 78px system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Malgun Gothic, sans-serif";
  wrapText(ctx, (d.title||""), cardX+44, cardY+160, cardW-88, 88, 2);

  // 혜택
  const benefit = cleanBenefit(d.benefit||"").replace(/\s+/g," ").trim();
  ctx.fillStyle = "rgba(255,255,255,0.86)";
  ctx.font = "700 40px system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Malgun Gothic, sans-serif";
  wrapText(ctx, benefit || "혜택 안내", cardX+44, cardY+360, cardW-88, 58, 3);

  // 코드/링크
  ctx.fillStyle = "rgba(255,255,255,0.75)";
  ctx.font = "800 36px system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Malgun Gothic, sans-serif";
  const code = d.code ? `가입코드: ${d.code}` : "가입코드: (없음)";
  ctx.fillText(code, cardX+44, cardY+600);

  ctx.font = "700 28px system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Malgun Gothic, sans-serif";
  const linkShort = (link||"").replace(/^https?:\/\//,'');
  wrapText(ctx, linkShort, cardX+44, cardY+655, cardW-88, 42, 2);

  // 안내
  ctx.fillStyle = "rgba(255,255,255,0.55)";
  ctx.font = "700 24px system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Malgun Gothic, sans-serif";
  wrapText(ctx, "※ 정보 제공/참고용 · 과몰입 주의", cardX+44, cardY+cardH-88, cardW-88, 34, 2);
}


function jumpToRec() {
  closeCard();
  setFilter("rec");
  const top = document.getElementById("vendorTop");
  if(top) top.scrollIntoView({behavior:"smooth", block:"start"});
  track("popup_secondary_cta", {"action":"jump_to_rec"});
}

(function bindPopupControls() {
  const popup = document.getElementById("cardPopup");
  const box = popup?.querySelector(".popup-box");
  const closeBtn = document.getElementById("closeBtn");
  const copyBtn = document.getElementById("copyBtn");
  const shareBtn = document.getElementById("shareBtn");
  const moreBtn = document.getElementById("moreRecBtn");
  const goBtn = document.getElementById("pLink");
  const tgBtn = document.getElementById("pTelegram");

  const sharePopup = document.getElementById("sharePopup");
  const closeShareBtn = document.getElementById("closeShareBtn");
  const copyShareLinkBtn = document.getElementById("copyShareLinkBtn");
  const downloadShareImgBtn = document.getElementById("downloadShareImgBtn");
  const copyShareTextBtn = document.getElementById("copyShareTextBtn");

  if(closeBtn) closeBtn.addEventListener("click", closeCard);
  if(copyBtn) copyBtn.addEventListener("click", copyCode);
  if(shareBtn) shareBtn.addEventListener("click", ()=> openShare(currentCardId));
  if(moreBtn) moreBtn.addEventListener("click", jumpToRec);

  if(goBtn) goBtn.addEventListener("click", ()=> track("outbound_click", {"type":"site", "card_id": currentCardId, "title": (CARD_DATA[currentCardId]?.title)||"", "url": (document.getElementById("pLink")?.href)||"" }));
  if(tgBtn) tgBtn.addEventListener("click", ()=> track("outbound_click", {"type":"telegram", "card_id": currentCardId, "title": (CARD_DATA[currentCardId]?.title)||"", "url": (document.getElementById("pTelegram")?.href)||"" }));

  if(closeShareBtn) closeShareBtn.addEventListener("click", closeShare);
  if(copyShareLinkBtn) copyShareLinkBtn.addEventListener("click", copyShareLink);
  if(downloadShareImgBtn) downloadShareImgBtn.addEventListener("click", downloadShareImage);
  if(copyShareTextBtn) copyShareTextBtn.addEventListener("click", copyShareText);

  // (A11y) allow Enter/Space on div.btn role=button
  [closeBtn, copyBtn, shareBtn].forEach(el=>{
    if(!el) return;
    el.addEventListener("keydown", (e)=>{
      if(e.key==="Enter" || e.key===" "){ e.preventDefault(); el.click(); }
    });
  });


  // 바깥 클릭 닫기
  if(popup) popup.addEventListener("click", (e)=>{
    if(e.target === popup) closeCard();
  });
  if(sharePopup) sharePopup.addEventListener("click", (e)=>{
    if(e.target === sharePopup) closeShare();
  });

  // ESC 닫기 + 포커스 트랩(최소)
  document.addEventListener("keydown", (e)=>{
    if(popup && popup.style.display==="flex") {
      if(e.key==="Escape") closeCard();
      if(e.key==="Tab") {
        const focusables = popup.querySelectorAll('a[href], button, [tabindex]:not([tabindex="-1"])');
        const list = Array.from(focusables).filter(el=>!el.hasAttribute("disabled") && el.offsetParent !== null);
        if(!list.length) return;
        const first = list[0];
        const last = list[list.length-1];
        if(e.shiftKey && document.activeElement===first) { e.preventDefault(); last.focus(); }
        else if(!e.shiftKey && document.activeElement===last) { e.preventDefault(); first.focus(); }
      }
    }
  });
})();

/* ===== +EV 감지 시 추천 필터 자동 ON (오늘만) ===== */
function maybeAutoRecFilter() {
  const ev = localStorage.getItem("88_ev_positive");
  const evDate = localStorage.getItem("88_ev_date");
  const today = dateKeyLocal();
  const hint = document.getElementById("evAutoHint");

  if(ev==="1" && evDate===today) {
    if(!sessionStorage.getItem("88_ev_autoon_done")) {
      sessionStorage.setItem("88_ev_autoon_done","1");
      currentFilter = "rec";
      if(hint) {
        hint.style.display="block";
        hint.innerText = "✅ 분석기에서 +EV가 감지되어 ‘추천’ 필터가 자동 활성화되었습니다. (오늘만)";
      }
      track("ev_autofilter", {"state":"on"});
    } else {
      if(hint) {
        hint.style.display="block";
        hint.innerText = "✅ 오늘 +EV 기록이 있어 ‘추천’ 필터를 빠르게 확인할 수 있습니다.";
      }
    }
  } else {
    if(hint) {
      hint.style.display="none";
      hint.innerText = "";
    }
  }
}

function openFromUrl() {
  try {
    const u = new URL(window.location.href);
    const v = u.searchParams.get("v");
    if(v && CARD_DATA[v]) {
      openCard(v);
    }
  } catch(e) {}
}

/* ===== 초기화 ===== */
(function init() {
  saveUtmFromUrl();
  refreshChecklist();
  setMarginMode("2");
  maybeAutoRecFilter();
  renderGrid();
initInsights();
  openFromUrl();
})();
</script>
<script>
/* ===== logo shadow preset (2단계) + quick memo ===== */
(function(){
  function miniToast(msg){
    try{
      let el = document.getElementById("miniToast88");
      if(!el){
        el = document.createElement("div");
        el.id = "miniToast88";
        el.style.position = "fixed";
        el.style.left = "50%";
        el.style.bottom = "88px";
        el.style.transform = "translateX(-50%)";
        el.style.padding = "10px 12px";
        el.style.borderRadius = "999px";
        el.style.background = "rgba(0,0,0,.68)";
        el.style.border = "1px solid rgba(255,255,255,.14)";
        el.style.color = "#fff";
        el.style.fontSize = "13px";
        el.style.fontWeight = "800";
        el.style.zIndex = "99999";
        el.style.opacity = "0";
        el.style.transition = "opacity .18s ease, transform .18s ease";
        document.body.appendChild(el);
      }
      el.textContent = msg;
      el.style.opacity = "1";
      el.style.transform = "translateX(-50%) translateY(-4px)";
      clearTimeout(el.__t);
      el.__t = setTimeout(()=>{ el.style.opacity="0"; el.style.transform="translateX(-50%)"; }, 1400);
    }catch(e){}
  }

  try{
    // logo shadow: minimal(default) / presence
    const qs = new URLSearchParams(location.search);
    const fromQS = qs.get("logoShadow");
    const saved = localStorage.getItem("logoShadowPreset");
    const presetRaw = (fromQS || saved || "minimal").toLowerCase();
    const preset = (presetRaw === "presence" || presetRaw === "bold" || presetRaw === "strong") ? "presence" : "minimal";
    document.body.dataset.logoShadow = preset;
    if(fromQS) localStorage.setItem("logoShadowPreset", preset);

    // quick memo (local only)
    const key = "88st_quickMemo_v1";
    const keyHist = "88st_quickMemoHist_v1";
    const ta = document.getElementById("quickMemoText");
    const btnSave = document.getElementById("quickMemoSave");
    const btnClear = document.getElementById("quickMemoClear");

    const btnAppend = document.getElementById("memoAppendAnalysis");
    const btnCopy = document.getElementById("memoCopy");
    const histList = document.getElementById("memoHistoryList");
    const chips = document.querySelectorAll("[data-memo-insert]");

    function safeJsonParse(v, fallback){
      try{ return JSON.parse(v); }catch(e){ return fallback; }
    }
    function loadHist(){
      const raw = localStorage.getItem(keyHist);
      const arr = safeJsonParse(raw, []);
      return Array.isArray(arr) ? arr : [];
    }
    function saveHist(arr){
      try{ localStorage.setItem(keyHist, JSON.stringify(arr.slice(0,5))); }catch(e){}
    }
    function tsLabel(ms){
      try{
        const d = new Date(ms);
        const mm = String(d.getMonth()+1).padStart(2,"0");
        const dd = String(d.getDate()).padStart(2,"0");
        const hh = String(d.getHours()).padStart(2,"0");
        const mi = String(d.getMinutes()).padStart(2,"0");
        return `${mm}.${dd} ${hh}:${mi}`;
      }catch(e){ return ""; }
    }
    function renderHist(){
      if(!histList) return;
      const arr = loadHist();
      if(!arr.length){
        histList.innerHTML = '<div class="text" style="color:rgba(255,255,255,.55);font-size:12px;">저장된 메모가 없습니다.</div>';
        return;
      }
      histList.innerHTML = arr.map((it, idx)=>{
        const text = (it && it.text) ? String(it.text) : "";
        const t = (it && it.t) ? Number(it.t) : 0;
        return `
          <div class="memo-history-item" data-memo-idx="${idx}">
            <div class="memo-history-meta">
              <span>${tsLabel(t)}</span>
              <span style="color:rgba(245,226,122,.75);font-weight:900;">불러오기</span>
            </div>
            <div class="memo-history-text">${text.replace(/[<>&]/g, s => ({'<':'&lt;','>':'&gt;','&':'&amp;'}[s]))}</div>
          </div>
        `;
      }).join("");
    }
    function addHist(text){
      const t = Date.now();
      const v = (text||"").trim();
      if(!v) return;
      const arr = loadHist();
      // 동일 메모 중복 방지
      if(arr.length && arr[0] && String(arr[0].text||"").trim() === v) return;
      arr.unshift({t, text: v});
      saveHist(arr);
    }

    function pillsText(id){
      const el = document.getElementById(id);
      if(!el) return [];
      const pills = Array.from(el.querySelectorAll(".odds-pill"));
      return pills.map(p => (p.textContent||"").trim()).filter(Boolean);
    }
    function buildAnalysisLine(){
      const margin = (document.getElementById("oddsMarginValue")?.textContent||"").trim();
      if(!margin || margin === "—") return "";
      const fair = pillsText("oddsFairPills");
      const prob = pillsText("oddsProbPills");
      const fairTxt = fair.length ? fair.join(" / ") : "—";
      const probTxt = prob.length ? prob.join(" / ") : "—";
      return `[배당 구조 분석] 마진 ${margin} | 공정배당 ${fairTxt} | 정규확률 ${probTxt}`;
    }

    if(ta){
      ta.value = localStorage.getItem(key) || "";
      renderHist();

      btnSave && btnSave.addEventListener("click", ()=>{
        const v = (ta.value||"").trim();
        localStorage.setItem(key, v);
        addHist(v);
        renderHist();
        miniToast("메모 저장 완료");
      });

      btnClear && btnClear.addEventListener("click", ()=>{
        ta.value = "";
        localStorage.removeItem(key);
        miniToast("메모 비움");
      });

      // history click to load
      histList && histList.addEventListener("click", (e)=>{
        const item = e.target.closest(".memo-history-item");
        if(!item) return;
        const idx = Number(item.getAttribute("data-memo-idx"));
        const arr = loadHist();
        const it = arr[idx];
        if(it && typeof it.text === "string"){
          ta.value = it.text;
          localStorage.setItem(key, it.text);
          miniToast("메모 불러옴");
        }
      });

      // template chips insert
      chips && chips.forEach(btn=>{
        btn.addEventListener("click", ()=>{
          const ins = btn.getAttribute("data-memo-insert") || "";
          const start = ta.selectionStart ?? ta.value.length;
          const end = ta.selectionEnd ?? ta.value.length;
          const before = ta.value.slice(0, start);
          const after = ta.value.slice(end);
          const glue = (before && !before.endsWith("\n")) ? "\n" : "";
          ta.value = before + glue + ins + after;
          const pos = (before + glue + ins).length;
          ta.focus();
          ta.setSelectionRange(pos, pos);
        });
      });

      // append analysis summary
      btnAppend && btnAppend.addEventListener("click", ()=>{
        const line = buildAnalysisLine();
        if(!line){
          miniToast("먼저 '분석 실행'을 눌러주세요");
          return;
        }
        const cur = (ta.value||"").trim();
        ta.value = cur ? (cur + "\n" + line) : line;
        localStorage.setItem(key, ta.value.trim());
        addHist(ta.value.trim());
        renderHist();
        miniToast("분석 요약 추가");
      });

      // copy to clipboard
      btnCopy && btnCopy.addEventListener("click", async ()=>{
        const v = (ta.value||"").trim();
        if(!v){ miniToast("복사할 메모가 없습니다"); return; }
        try{
          await navigator.clipboard.writeText(v);
          miniToast("메모 복사됨");
        }catch(e){
          // fallback
          try{
            ta.focus();
            ta.select();
            document.execCommand("copy");
            miniToast("메모 복사됨");
          }catch(e2){
            miniToast("복사 실패");
          }finally{
            ta.setSelectionRange(ta.value.length, ta.value.length);
          }
        }
      });
    }

  }catch(e){}
})();
</script>
<script>
/* ===== Risk Management Calculator (v13.1) ===== */
function _num(v){
  if(v==null) return NaN;
  const s = String(v).replace(/[,\s]/g,'');
  const n = parseFloat(s);
  return Number.isFinite(n) ? n : NaN;
}
function _fmt(n){
  if(!Number.isFinite(n)) return "-";
  try { return Math.round(n).toLocaleString('ko-KR'); } catch(e){ return String(Math.round(n)); }
}
function setRiskMode(mode){
  const map = { stop: "riskStop", fixed: "riskFixed", kelly: "riskKelly" };
  const btns = { stop:"rModeStop", fixed:"rModeFixed", kelly:"rModeKelly" };
  Object.keys(map).forEach(k=>{
    const wrap = document.getElementById(map[k]);
    if(wrap) wrap.style.display = (k===mode) ? "block" : "none";
    const b = document.getElementById(btns[k]);
    if(b){
      if(k===mode) b.classList.add("active");
      else b.classList.remove("active");
    }
  });
}
function calcRiskStop(){
  const bankroll = _num(document.getElementById("rBankroll1")?.value);
  const lossPct = _num(document.getElementById("rLossPct")?.value);
  const stopPct = _num(document.getElementById("rStopPct")?.value);
  const out = document.getElementById("riskStopOut");
  const hint = document.getElementById("riskStopHint");
  if(!out||!hint) return;

  if(!Number.isFinite(bankroll) || bankroll<=0 || !Number.isFinite(lossPct) || lossPct<=0){
    out.textContent = "총 자본과 손실 한도 %를 입력해줘.";
    hint.textContent = "";
    return;
  }
  const lossLimit = bankroll * (lossPct/100);
  const triggerPct = (Number.isFinite(stopPct) && stopPct>0) ? stopPct : 80;
  const stopAt = lossLimit * (triggerPct/100);

  const suggest1 = bankroll * 0.01;
  const suggest2 = bankroll * 0.02;

  out.textContent = `손실 한도: ${_fmt(lossLimit)}원  ·  중단 기준: -${_fmt(stopAt)}원`;
  hint.textContent = `참고: 1% 비중=${_fmt(suggest1)}원 / 2% 비중=${_fmt(suggest2)}원 (상황에 따라 더 낮게 권장)`;
}
function presetStake(pct){
  const el = document.getElementById("rStakePct");
  if(el) el.value = String(pct);
  calcRiskFixed();
}
function calcRiskFixed(){
  const bankroll = _num(document.getElementById("rBankroll2")?.value);
  const stakePct = _num(document.getElementById("rStakePct")?.value);
  const out = document.getElementById("riskFixedOut");
  const hint = document.getElementById("riskFixedHint");
  if(!out||!hint) return;

  if(!Number.isFinite(bankroll) || bankroll<=0 || !Number.isFinite(stakePct) || stakePct<=0){
    out.textContent = "총 자본과 베팅 비중 %를 입력해줘.";
    hint.textContent = "";
    return;
  }
  const stake = bankroll * (stakePct/100);
  out.textContent = `추천 1회 베팅액(고정 ${stakePct}%): ${_fmt(stake)}원`;
  hint.textContent = `참고: 연패/변동 구간이면 비중을 절반으로 낮추는게 안전합니다.`;
}
function calcRiskKelly(){
  const bankroll = _num(document.getElementById("rBankroll3")?.value);
  const odds = _num(document.getElementById("rOdds")?.value);
  const winPct = _num(document.getElementById("rWinPct")?.value);
  const factorPct = _num(document.getElementById("rKellyFactor")?.value);
  const maxPct = _num(document.getElementById("rMaxPct")?.value);

  const out = document.getElementById("riskKellyOut");
  const hint = document.getElementById("riskKellyHint");
  if(!out||!hint) return;

  if(!Number.isFinite(bankroll) || bankroll<=0 || !Number.isFinite(odds) || odds<=1 || !Number.isFinite(winPct) || winPct<=0){
    out.textContent = "총 자본 / 배당(Decimal) / 승률% 를 입력해줘.";
    hint.textContent = "";
    return;
  }
  const p = Math.min(Math.max(winPct/100, 0.0001), 0.9999);
  const b = odds - 1;
  const breakeven = 1/odds;

  // full Kelly fraction
  let f = (b*p - (1-p)) / b; // = (odds*p - 1)/(odds-1)
  if(!Number.isFinite(f) || f < 0) f = 0;
  const kellyPct = f * 100;

  const factor = (Number.isFinite(factorPct) && factorPct>0) ? (factorPct/100) : 0.25;
  let conservative = f * factor;

  const cap = (Number.isFinite(maxPct) && maxPct>0) ? (maxPct/100) : 0.03;
  const finalFrac = Math.min(conservative, cap);

  const stake = bankroll * finalFrac;

  if(f<=0){
    out.textContent = `엣지 없음(손익분기 ${Math.round(breakeven*1000)/10}% 이상 필요) → 추천 0원`;
    hint.textContent = `승률 추정(${Math.round(p*1000)/10}%)이 손익분기보다 낮습니다. 과몰입 방지 차원에서 패스 권장.`;
    return;
  }

  out.textContent = `풀 켈리 ${Math.round(kellyPct*10)/10}% → 보수(${Math.round(factor*100)}%) 적용 ${Math.round(conservative*1000)/10}% (상한 ${Math.round(cap*1000)/10}%) · 추천 ${_fmt(stake)}원`;
  hint.textContent = `손익분기 승률: ${Math.round(breakeven*1000)/10}% · 승률 추정치가 불확실하면 보수 배수/상한을 더 낮춰주세요.`;
}

// defaults
document.addEventListener("DOMContentLoaded", ()=>{
  // sane defaults (빈칸이면 불필요한 자동 계산 방지)
  const rLossPct = document.getElementById("rLossPct"); if(rLossPct && !rLossPct.value) rLossPct.value = "5";
  const rStopPct = document.getElementById("rStopPct"); if(rStopPct && !rStopPct.value) rStopPct.value = "80";
  const rKellyFactor = document.getElementById("rKellyFactor"); if(rKellyFactor && !rKellyFactor.value) rKellyFactor.value = "25";
  const rMaxPct = document.getElementById("rMaxPct"); if(rMaxPct && !rMaxPct.value) rMaxPct.value = "3";
});


/* === Insight/Memo Tabs + Quick Memo persistence === */
(function initInsightMemoTabs(){
  const sec = document.getElementById("insightMemoSection");
  if(!sec) return;

  const tabs = Array.from(sec.querySelectorAll(".im-tab[data-imtab]"));
  const panels = Array.from(sec.querySelectorAll(".im-panel[data-impanel]"));
  if(!tabs.length || !panels.length) return;

  const KEY = "insightMemoTab";

  function setTab(name){
    tabs.forEach(btn=>{
      const active = btn.dataset.imtab === name;
      btn.classList.toggle("active", active);
      btn.setAttribute("aria-selected", active ? "true" : "false");
      btn.tabIndex = active ? 0 : -1;
    });
    panels.forEach(p=>{
      const active = p.dataset.impanel === name;
      p.classList.toggle("active", active);
      p.hidden = !active;
    });
    try{ localStorage.setItem(KEY, name); }catch(e){}
  }

  let saved = null;
  try{ saved = localStorage.getItem(KEY); }catch(e){}
  const valid = saved && panels.some(p=>p.dataset.impanel === saved);
  setTab(valid ? saved : "insight");

  tabs.forEach(btn=>{
    btn.addEventListener("click", ()=> setTab(btn.dataset.imtab));
    btn.addEventListener("keydown", (e)=>{
      if(e.key !== "ArrowLeft" && e.key !== "ArrowRight") return;
      e.preventDefault();
      const i = tabs.indexOf(document.activeElement);
      if(i < 0) return;
      const ni = (e.key === "ArrowRight") ? (i+1) % tabs.length : (i-1+tabs.length) % tabs.length;
      tabs[ni].focus();
    });
  });
})();

(function initQuickMemo(){
  const ta = document.getElementById("quickMemoText");
  const save = document.getElementById("quickMemoSave");
  const clear = document.getElementById("quickMemoClear");
  if(!ta || !save || !clear) return;

  const KEY = "quickMemoText";
  try{
    const v = localStorage.getItem(KEY);
    if(v != null) ta.value = v;
  }catch(e){}

  save.addEventListener("click", ()=>{
    try{ localStorage.setItem(KEY, ta.value || ""); }catch(e){}
    if(typeof toast === "function") toast("메모 저장됨");
  });

  clear.addEventListener("click", ()=>{
    ta.value = "";
    try{ localStorage.removeItem(KEY); }catch(e){}
    if(typeof toast === "function") toast("메모 비움");
  });
})();
</script>
</div></body>
</html>
