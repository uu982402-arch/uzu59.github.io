!function(){"use strict";var t={GA4_ID:"G-KWT87FBY6S",POPULAR_API:"disabled"};window.SITE_CONFIG=window.SITE_CONFIG||t,window.SITE_CONFIG.GA4_ID||(window.SITE_CONFIG.GA4_ID=t.GA4_ID),void 0===window.SITE_CONFIG.POPULAR_API&&(window.SITE_CONFIG.POPULAR_API=t.POPULAR_API);var e=window.SITE_CONFIG.GA4_ID;function isDebug(){try{return"1"===new URLSearchParams(window.location.search).get("debug")||"1"===localStorage.getItem("ga_debug")}catch(t){return!1}}var a=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"],r="88_utm";function saveUtmFromUrl(){try{var t=function getUrlUtm(){try{for(var t=new URLSearchParams(window.location.search),e={},r=0;r<a.length;r++){var n=a[r],o=t.get(n);o&&(e[n]=o)}return e}catch(t){return{}}}(),e=!1;for(var n in t)if(t[n]){e=!0;break}if(!e)return;t.__ts=Date.now(),localStorage.setItem(r,JSON.stringify(t))}catch(t){}}function loadStoredUtm(){try{var t=localStorage.getItem(r);if(!t)return null;var e=JSON.parse(t);return e&&e.__ts?Date.now()-e.__ts>12096e5?null:e:null}catch(t){return null}}function getUtmQuery(){try{var t=loadStoredUtm();if(!t)return"";for(var e=new URLSearchParams,r=0;r<a.length;r++){var n=a[r];t[n]&&e.set(n,t[n])}var o=e.toString();return o?"?"+o:""}catch(t){return""}}function appendUtm(t){try{for(var e=new URL(t,window.location.href),r=new URLSearchParams(e.search),n=new URLSearchParams(getUtmQuery().replace(/^\?/,"")),o=0;o<a.length;o++){var i=a[o];!r.get(i)&&n.get(i)&&r.set(i,n.get(i))}return e.search=r.toString(),e.toString()}catch(e){return t}}function propagateUtmToLinks(){try{if(!loadStoredUtm())return;document.querySelectorAll("a[href]").forEach(function(t){try{var e=t.getAttribute("href")||"";if(!e||e.startsWith("#")||e.startsWith("javascript:")||e.startsWith("mailto:")||e.startsWith("tel:"))return;var r=t.hasAttribute("data-cta")||t.hasAttribute("data-utm")||t.hasAttribute("data-propagate-utm"),n=new URL(e,window.location.href);if(n.origin!==window.location.origin)return;var o=/^\/analysis\/?$/.test(n.pathname)||/^\/tool-/.test(n.pathname)||/^\/tool\//.test(n.pathname)||/^\/landing-/.test(n.pathname)||/^\/bonus-checklist\/?$/.test(n.pathname);if(!r&&!o)return;for(var i=new URLSearchParams(n.search),c=0;c<a.length;c++)if(i.get(a[c]))return;t.setAttribute("href",appendUtm(n.toString()))}catch(t){}})}catch(t){}}function track(t,e){try{if("function"!=typeof window.gtag)return;var r=Object.assign({},e||{});void 0===r.schema_ver&&(r.schema_ver="88st_ga4_v1"),void 0===r.vendor_id&&void 0!==r.card_id&&(r.vendor_id=r.card_id),void 0===r.vendor_name&&void 0!==r.title&&(r.vendor_name=r.title),isDebug()&&void 0===r.debug_mode&&(r.debug_mode=!0),void 0===r.page_path&&(r.page_path=window.location.pathname),void 0===r.page_location&&(r.page_location=window.location.href),void 0===r.page_referrer&&(r.page_referrer=document.referrer||""),void 0===r.page_title&&document&&document.title&&(r.page_title=(document.title||"").slice(0,80));var n=loadStoredUtm();if(n)for(var o=0;o<a.length;o++){var i=a[o];void 0===r[i]&&n[i]&&(r[i]=n[i])}if(void 0===r.sid&&(r.sid=function getSessionId(){try{var t="88st_sid",e=sessionStorage.getItem(t);return e||(e="sid_"+Math.random().toString(36).slice(2)+"_"+Date.now().toString(36),sessionStorage.setItem(t,e),e)}catch(t){return"sid_na"}}()),"cta_click"===t&&r.cta&&void 0===r.cta_id&&(r.cta_id=r.cta),"outbound_click"===t){if(r.type&&void 0===r.outbound_type&&(r.outbound_type=r.type),void 0===r.destination_domain&&"string"==typeof r.url)try{r.destination_domain=new URL(r.url,window.location.href).hostname}catch(t){}void 0===r.transport_type&&(r.transport_type="beacon")}if(isDebug())try{console.log("[88ST track]",t,r)}catch(t){}window.gtag("event",t,r)}catch(t){}}function detectCtaLocation(t){try{var e=t.getAttribute("data-cta-location");if(e)return e;if(t.closest&&t.closest(".dock"))return"dock";if(t.closest&&t.closest(".header"))return"header";if(t.closest&&t.closest("nav"))return"nav";if(t.closest&&t.closest("#analyzerSection"))return"home_analyzer";if(t.closest&&t.closest("#whySection"))return"home_why";if(t.closest&&t.closest(".fab"))return"fab";if(t.closest&&t.closest(".vendor-header"))return"vendor_header";if(t.closest&&t.closest(".vendor-tools"))return"vendor_tools";if(t.closest&&t.closest(".landing-seo"))return"footer_links";var a=t.closest&&t.closest(".section")?t.closest(".section"):null;return a&&a.id?a.id:"unknown"}catch(t){return"unknown"}}function bindClickDelegates(){document.addEventListener("click",function(t){var e=t.target,a=e&&e.closest?e.closest("[data-cta]"):null;if(a){var r=a.getAttribute("data-cta")||"",n=(a.textContent||"").replace(/\s+/g," ").trim().slice(0,60),o="";try{a.tagName&&"a"===a.tagName.toLowerCase()&&(o=(a.getAttribute("href")||"").slice(0,140))}catch(t){}track("cta_click",{cta:r,cta_location:detectCtaLocation(a),cta_text:n,cta_href:o})}var i=e&&e.closest?e.closest("a[href]"):null;if(i){if(i.hasAttribute("data-no-auto-outbound")||i.hasAttribute("data-outbound-manual")||i.hasAttribute("data-no-auto-track"))return;if(!(o=i.getAttribute("href")||""))return;if(o.startsWith("#")||o.startsWith("javascript:")||o.startsWith("mailto:")||o.startsWith("tel:"))return;try{var c=new URL(o,window.location.href);if(c.origin!==window.location.origin&&("http:"===c.protocol||"https:"===c.protocol)){var s="external";/^https?:\/\/t\.me\//i.test(c.toString())&&(s="telegram"),track("outbound_click",{type:s,url:c.toString()})}}catch(t){}}},!0)}window.UTM_KEYS=window.UTM_KEYS||a,window.saveUtmFromUrl=window.saveUtmFromUrl||saveUtmFromUrl,window.getUtmQuery=window.getUtmQuery||getUtmQuery,window.appendUtm=window.appendUtm||appendUtm,window.appendUtmToUrl=window.appendUtmToUrl||appendUtm,window.track=window.track||track,function initGA4(){try{if(!e||"disabled"===e||/^G-XXXX/i.test(e)||"G-XXXXXXXXXX"===e)return;if(window.dataLayer=window.dataLayer||[],window.gtag=window.gtag||function(){window.dataLayer.push(arguments)},window.__88st_ga_inited||(window.__88st_ga_inited=!0,window.gtag("js",new Date),window.gtag("config",e,{send_page_view:!0,anonymize_ip:!0})),!document.querySelector('script[src*="gtag/js?id='+encodeURIComponent(e)+'"]')){var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id="+encodeURIComponent(e),document.head.appendChild(t)}}catch(t){}}(),saveUtmFromUrl(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){propagateUtmToLinks(),bindClickDelegates()}):(propagateUtmToLinks(),bindClickDelegates())}();