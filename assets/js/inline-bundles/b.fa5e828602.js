const CARD_DATA={card1:{title:"어느날",code:"ST95",link:"http://oday-147.com",telegram:"UZU59",benefit:"고액전용 전용 무제제 삼치기OK / 입금플러스5+2 10+3 20+4 외 첫충 10%",notice:"가입코드 미입력 시 혜택 적용 불가"},card2:{title:"OK Bet",code:"88ST",link:"https://ok-8888.com/?code=88ST",telegram:"UZU59",benefit:"신규가입 77만원 쿠폰지급, 코인 입/출금 가능, 롤 세트별 베팅, 벤픽 후 마감, BJ, 스타리그 업데이트",notice:"가입코드 미입력 시 혜택 적용 불가"},card3:{title:"SPEED Bet",code:"88ST",link:"/speed/",telegram:"UZU59",benefit:"신규가입 77만원 쿠폰지급, 코인 입/출금 가능, 롤 세트별 베팅, 벤픽 후 마감, BJ, 스타리그 업데이트",notice:"가입코드 미입력 시 혜택 적용 불가"},card4:{title:"VEGAS",code:"6789",link:"https://las403.com",telegram:"UZU59",benefit:"스포츠·고액전용 입플 최대 30% 페이백 / 카지노 입플",notice:"가입코드 미입력 시 혜택 적용 불가"},card6:{title:"CHOY BET",code:"TAN",link:"https://cy-40.com",telegram:"DY0302",benefit:"신규 30% / 매충 10% / 페이백 10 / 입플 %",notice:"가입코드 미입력 시 혜택 적용 불가"},card7:{title:"CAPS",code:"RUST",link:"https://caps-22.com/",telegram:"UZU59",benefit:"미겜 첫충 5% / 페이백 5% / 출석 30만원",notice:"가입코드 미입력 시 혜택 적용 불가"},card8:{title:"BETZY",code:"BANGU",link:"https://b88-et.com",telegram:"UZU59",benefit:"스포츠 첫충 10% / 미겜 첫충 5% / 페이백 5% / 출석 30만원",notice:"가입코드 미입력 시 혜택 적용 불가"},card10:{title:"RED HULK",code:"HERO",link:"https://rhk-777.com",telegram:"SDTR8",benefit:"입금플러스 신규 30% / 매충 10% / 페이백5% 콤프(1%/3%)%",notice:"가입코드 미입력 시 혜택 적용 불가"},card11:{title:"TOP GUN",code:"GAS7",link:"https://topgun-88.com",telegram:"SDTR8",benefit:"입금플러스 신규 30% / 매충 10% / 페이백5% 콤프(1%/3%)%",notice:"가입코드 미입력 시 혜택 적용 불가"}},INSIGHTS_BY_SPORT={"축구":["배당이 1~2시간 내 급변하면 라인 조정 구간일 수 있습니다.","무승부 배당이 갑자기 내려가면 시장은 '언더/조심'을 보는 경우가 많습니다.","양팀 득점(BTTS) 라인이 흔들리면 선발/부상 뉴스 반영 가능성이 큽니다.","전반 라인이 움직이면 초반 템포(압박/로테이션)를 체크하세요."],"농구":["핸디(스프레드)가 크게 움직이면 핵심 선수 결장/로테 반영일 수 있습니다.","OU(언더오버) 하락은 페이스 다운/수비 지표 반영 가능성이 큽니다.","백투백 일정은 4Q 클러치에서 체력 영향이 큽니다.","홈코트 이점이 큰 팀은 초반 라인이 유리하게 잡히는 경우가 많습니다."],"야구":["선발 변경은 배당 구조가 통째로 바뀌니 최신 라인을 우선 확인하세요.","불펜 소모가 큰 팀은 후반 이닝 변동성이 큽니다.","바람/구장 특성은 OU에 크게 영향을 줍니다.","승패보다 5이닝(1st5) 라인이 더 깔끔할 때가 있습니다."],"배구":["세트 핸디가 흔들리면 주전 로테/컨디션 이슈 가능성이 있습니다.","서브/리시브 지표 차이가 크면 언더독도 세트를 가져갈 수 있습니다.","원정 장거리 이동은 집중력 이슈로 초반 세트에 영향을 줄 수 있습니다.","전력 차가 크면 OU보다 -1.5 세트가 더 안정적일 때가 있습니다."],"e스포츠":["맵 풀/밴픽 상성이 라인보다 중요할 때가 많습니다.","로스터 교체 직후는 변동성이 커서 보수적으로 접근하세요.","언더독이 특정 맵에서 강하면 세트/맵 핸디를 확인하세요.","최근 5경기보다 상대전적/메타 적응력을 같이 보세요."],"하키":["골리(선발 골텐더) 변경은 승/OU에 큰 영향이 있습니다.","백투백 원정은 수비 붕괴로 고득점 게임이 나올 수 있습니다.","파워플레이 효율 차이는 언더독 변수로 작용합니다.","초반 10분 라인이 흔들리면 경기 템포 이슈 가능성이 큽니다."]};function hideLoader(){const t=document.getElementById("loader");t&&(t.classList.add("hide"),setTimeout(()=>{t&&t.remove&&t.remove()},450))}function dateKeyLocal(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function pickInsight(t){const n=INSIGHTS_BY_SPORT[t]||[];return n.length?n[Math.floor(Math.random()*n.length)]:"배당 흐름을 체크하고 라인 변화를 확인하세요."}function refreshInsight(){const t=document.getElementById("insightSport"),n=t?t.value:"축구",e=document.getElementById("insight");e&&(e.innerText=pickInsight(n)),localStorage.setItem("insightSport",n)}!function(){try{const t=new URL(window.location.href).searchParams.get("v"),n=window.location.hash||"";if(t&&/^card\d+$/.test(t))return void window.location.replace("/cert/?v="+encodeURIComponent(t));if("#vendorTop"===n||"#vendors-guarantee"===n||"#vendors-verified"===n)return void window.location.replace("/cert/")}catch(t){}}(),window.addEventListener("load",hideLoader),setTimeout(hideLoader,2500),document.addEventListener("DOMContentLoaded",()=>setTimeout(hideLoader,250)),function(){const t=localStorage.getItem("insightSport"),n=document.getElementById("insightSport");t&&n&&(n.value=t),refreshInsight()}(),function(){const t=document.querySelector(".logoImg");if(!t)return;const n=(t,n,e)=>Math.max(n,Math.min(e,t)),e=(t,n)=>Math.round(t+(255-t)*n),o=()=>{try{const o=64,c=64,r=document.createElement("canvas");r.width=o,r.height=c;const a=r.getContext("2d",{willReadFrequently:!0});if(!a)return;a.clearRect(0,0,o,c);const i=t.naturalWidth||o,s=t.naturalHeight||c,d=Math.max(o/i,c/s),u=i*d,l=s*d,m=(o-u)/2,g=(c-l)/2;a.drawImage(t,m,g,u,l);const f=a.getImageData(0,0,o,c).data;let p=0,h=0,S=0,_=0;for(let t=0;t<f.length;t+=4){const n=f[t+3];if(n<40)continue;const e=f[t],o=f[t+1],c=f[t+2],r=Math.max(e,o,c),a=Math.min(e,o,c);if(r<15)continue;if(a>245)continue;const i=n/255;p+=e*i,h+=o*i,S+=c*i,_+=i}if(_<5)return;p=Math.round(p/_),h=Math.round(h/_),S=Math.round(S/_),p=n(p,40,230),h=n(h,40,230),S=n(S,60,245);const k=e(p,.35),b=e(h,.35),v=e(S,.35),y=document.documentElement.style;y.setProperty("--accentRGB",`${p} ${h} ${S}`),y.setProperty("--accent",`rgb(${p} ${h} ${S})`),y.setProperty("--accent2",`rgb(${k} ${b} ${v})`),y.setProperty("--gold",`rgb(${p} ${h} ${S})`),y.setProperty("--gold2",`rgb(${k} ${b} ${v})`)}catch(t){}};t.complete&&t.naturalWidth?o():t.addEventListener("load",o,{once:!0})}();const UPDATE_LOG=[{date:"02/06",text:"메인 UI/UX/CTA 버튼색상) 변경"},{date:"02/06",text:"SPEED/OK Bet 보증 업체 추가 되었습니다."},{date:"02/06",text:"메인 로고 변경 되었습니다."}];!function(){const t=document.getElementById("updateLog");t&&(t.innerHTML=UPDATE_LOG.map(t=>`\n    <div class="log-item">\n      <div class="log-date">${t.date}</div>\n      <div class="log-text">${t.text}</div>\n    </div>\n  `).join(""))}();const CHECKLIST_POOL=["라인 급변 경기(갑자기 내려간 배당)는 이유부터 확인하기","마진(수수료) 높은 경기면 한 단계 보수적으로 접근하기","1회 배팅금은 자본의 1~3% 범위로 제한하기","선발/결장/로테 뉴스 체크 후 배당 변동 재확인하기","연패/연승 팀은 ‘시장 과열’ 구간인지 먼저 보기","변동성 큰 리그는 단폴/소액으로 테스트하기","무리한 마틴/추격 배팅은 금지(손실 제한선 미리 설정)"];function refreshChecklist(){const t=[...CHECKLIST_POOL].sort(()=>Math.random()-.5).slice(0,3),n=document.getElementById("checklistText");n&&(n.innerHTML="• "+t.join("<br>• "))}!function(){const t="88_session_plan_v1",n=document.getElementById("spBank"),e=document.getElementById("spLossPct"),o=document.getElementById("spStakePct"),c=document.getElementById("spMaxBets"),r=document.getElementById("spSummary"),a=document.getElementById("spSaveBtn"),i=document.getElementById("spClearBtn");function s(t){try{return Math.round(t).toLocaleString("ko-KR")}catch(n){return String(Math.round(t))}}function d(t){let n=document.getElementById("miniToast88");n||(n=document.createElement("div"),n.id="miniToast88",n.style.position="fixed",n.style.left="50%",n.style.bottom="24px",n.style.transform="translateX(-50%)",n.style.padding="10px 12px",n.style.borderRadius="12px",n.style.background="rgba(18,18,18,.92)",n.style.border="1px solid rgba(255,255,255,.14)",n.style.color="#fff",n.style.fontWeight="900",n.style.fontSize="13px",n.style.zIndex="9999",n.style.opacity="0",n.style.transition="opacity .18s ease, transform .18s ease",document.body.appendChild(n)),n.textContent=t,n.style.opacity="1",n.style.transform="translateX(-50%) translateY(-2px)",clearTimeout(n.__t),n.__t=setTimeout(()=>{n.style.opacity="0",n.style.transform="translateX(-50%) translateY(0px)"},1200)}function u(){const t=toNum(n.value),a=toNum(e.value),i=toNum(o.value),d=toNum(c.value);if(!Number.isFinite(t)||t<=0)return void(r.textContent="총 자본을 입력하면 자동으로 요약이 표시됩니다.");const u=Number.isFinite(a)&&a>0?a:5,l=Number.isFinite(i)&&i>0?i:2,m=Number.isFinite(d)&&d>0?d:3,g=t*(u/100),f=t*(l/100),p=f*m,h=.8*g;r.innerHTML=`손실 한도: <b>${s(g)}</b>원 (${u}%) · 중단 트리거(80%): <b>${s(h)}</b>원<br>1회 상한: <b>${s(f)}</b>원 (${l}%) · 최대 경기 수: <b>${m}</b> (일일 노출 상한 ≈ ${s(p)}원)`}n&&e&&o&&c&&r&&a&&i&&([n,e,o,c].forEach(t=>t.addEventListener("input",u)),a.addEventListener("click",()=>{!function(){const r={bank:String(n.value||"").trim(),lossPct:String(e.value||"").trim(),stakePct:String(o.value||"").trim(),maxBets:String(c.value||"").trim(),ts:Date.now()};try{localStorage.setItem(t,JSON.stringify(r))}catch(t){}}(),d("세션 플랜 저장됨")}),i.addEventListener("click",()=>{!function(){n.value="",e.value="5",o.value="2",c.value="3";try{localStorage.removeItem(t)}catch(t){}u()}(),d("초기화 완료")}),e.value||(e.value="5"),o.value||(o.value="2"),c.value||(c.value="3"),function(){try{const r=localStorage.getItem(t);if(!r)return;const a=JSON.parse(r);a&&"object"==typeof a&&(null!=a.bank&&(n.value=a.bank),null!=a.lossPct&&(e.value=a.lossPct),null!=a.stakePct&&(o.value=a.stakePct),null!=a.maxBets&&(c.value=a.maxBets))}catch(t){}u()}(),u())}();let marginMode="2";function setMarginMode(t){marginMode=t;const n=document.getElementById("mMode2"),e=document.getElementById("mMode3"),o=document.getElementById("margin2"),c=document.getElementById("margin3");n&&e&&o&&c&&("2"===t?(n.classList.add("active"),e.classList.remove("active"),o.style.display="block",c.style.display="none"):(e.classList.add("active"),n.classList.remove("active"),c.style.display="block",o.style.display="none"))}function toNum(t){const n=Number(String(t).replace(/,/g,"").trim());return Number.isFinite(n)?n:NaN}function calcSimpleMargin(){const t=document.getElementById("oddsSummaryCard"),n=document.getElementById("oddsMarginValue"),e=document.getElementById("oddsOverroundSub"),o=document.getElementById("oddsFairPills"),c=document.getElementById("oddsProbPills"),r=document.getElementById("oddsSummaryNote"),a=document.getElementById("simpleMarginResult"),i=document.getElementById("simpleMarginHint"),s=document.getElementById("oddsSport"),d=s?String(s.value||"").trim():"",u="2"===marginMode?"2-way":"3-way",l=s=>{t&&n&&(n.textContent=s,e&&(e.textContent=""),o&&(o.innerHTML=""),c&&(c.innerHTML=""),r&&(r.textContent="")),a&&(a.textContent=s),i&&(i.textContent="")},m=(t,n,e)=>{t&&(t.innerHTML="",n.forEach(n=>{const o=document.createElement("span");o.className="odds-pill "+(n.cls||""),o.innerHTML=`<span class="k">${n.k}</span> <span class="v">${e(n.v)}</span>`,t.appendChild(o)}))},g=d?d+" · ":"";if("2"===marginMode){const t=toNum(document.getElementById("m2A").value),s=toNum(document.getElementById("m2B").value);if([t,s].some(t=>!Number.isFinite(t)||t<=1))return l("배당 2개를 정확히 입력해 주세요. (1.01 이상)");const d=1/t+1/s,f=100*d,p=100*(d-1),h=1/t/d*100,S=1/s/d*100,_=100/h,k=100/S;n&&(n.textContent=`${p>=0?"+":""}${p.toFixed(2)}%`),e&&(e.textContent=`오버라운드 ${f.toFixed(2)}%`),m(o,[{k:"홈",v:_,cls:"home"},{k:"원정",v:k,cls:"away"}],t=>Number(t).toFixed(2)),m(c,[{k:"홈",v:h,cls:"home"},{k:"원정",v:S,cls:"away"}],t=>Number(t).toFixed(1)+"%"),r&&(r.textContent=`${g}${u} 입력 배당에서 오버라운드를 제거해 공정 배당 · 정규화 확률을 계산합니다.`),a&&(a.textContent=`${g}마진 : ${p.toFixed(2)}%`),i&&(i.innerHTML=`정규화 확률: 홈 ${h.toFixed(1)}% / 원정 ${S.toFixed(1)}%<br>공정 배당(정규화): 홈 ${_.toFixed(2)} / 원정 ${k.toFixed(2)}<br>오버라운드: ${f.toFixed(2)}% (100% 초과분 = 마진)`)}else{const t=toNum(document.getElementById("m3H").value),s=toNum(document.getElementById("m3D").value),d=toNum(document.getElementById("m3A").value);if([t,s,d].some(t=>!Number.isFinite(t)||t<=1))return l("배당 3개를 정확히 입력해 주세요. (1.01 이상)");const f=1/t+1/s+1/d,p=100*f,h=100*(f-1),S=1/t/f*100,_=1/s/f*100,k=1/d/f*100,b=100/S,v=100/_,y=100/k;n&&(n.textContent=`${h>=0?"+":""}${h.toFixed(2)}%`),e&&(e.textContent=`오버라운드 ${p.toFixed(2)}%`),m(o,[{k:"홈",v:b,cls:"home"},{k:"무",v:v,cls:"draw"},{k:"원정",v:y,cls:"away"}],t=>Number(t).toFixed(2)),m(c,[{k:"홈",v:S,cls:"home"},{k:"무",v:_,cls:"draw"},{k:"원정",v:k,cls:"away"}],t=>Number(t).toFixed(1)+"%"),r&&(r.textContent=`${g}${u} 입력 배당에서 오버라운드를 제거해 공정 배당 · 정규화 확률을 계산합니다.`),a&&(a.textContent=`${g}마진 : ${h.toFixed(2)}%`),i&&(i.innerHTML=`정규화 확률: 홈 ${S.toFixed(1)}% / 무 ${_.toFixed(1)}% / 원정 ${k.toFixed(1)}%<br>공정 배당(정규화): 홈 ${b.toFixed(2)} / 무 ${v.toFixed(2)} / 원정 ${y.toFixed(2)}<br>오버라운드: ${p.toFixed(2)}% (100% 초과분 = 마진)`)}}!function(){const t=(t,n)=>{CARD_DATA[t]=Object.assign({tag:"",priority:"normal",recruit:!1,reasons:[]},CARD_DATA[t],n)};t("card1",{tag:"rec",priority:"high",reasons:["고액전용 전용 무제제 삼치기OK","입금플러스 5+2 10+3 20+4"," 승인 문의 필수!!"]}),t("card2",{tag:"rec",priority:"high",reasons:["1레벨 카지노 배팅한도:3000만원 ","신규 가입 혜택","테더 입.출금 가능"]}),t("card3",{tag:"rec",priority:"high",reasons:["1레벨 카지노 배팅한도:3000만원","신규 가입 혜택","테더 입.출금 가능"]}),t("card4",{tag:"rec",priority:"normal",reasons:["입플 폭이 넓어 선택지 다양","혜택 분리 안내","문의 채널 고정"]}),t("card6",{tag:"new",priority:"normal",reasons:["신규/매충/페이백 조합","유지형 구성","문의 라인이 명확"]}),t("card7",{tag:"rec",priority:"normal",reasons:["미겜 혜택 요약","첫충/페이백/출석 구성","코드 입력 필수"]}),t("card8",{tag:"rec",priority:"normal",reasons:["스포츠+미겜 혜택","첫충/페이백/출석 구성","코드 입력 필수"]}),t("card10",{tag:"new",priority:"normal",reasons:["입플/페이백 중심 안내","고액 유저 기준 혜택","문의 채널 고정"]}),t("card11",{tag:"new",priority:"normal",reasons:["입플/페이백 중심 안내","고액 유저 기준 혜택","문의 채널 고정"]})}();const STATS_KEY="88_local_stats_v1";function dayKeyLocal(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function loadStats(){try{const t=localStorage.getItem(STATS_KEY);return ensureToday(t?JSON.parse(t):{})}catch(t){return ensureToday({})}}function saveStats(t){try{localStorage.setItem(STATS_KEY,JSON.stringify(t))}catch(t){}}function ensureToday(t){const n=dayKeyLocal();return t&&"object"==typeof t||(t={}),t.day!==n&&(t.day=n,t.today={views:{},searches:{}}),t.today||(t.today={views:{},searches:{}}),t.today.views||(t.today.views={}),t.today.searches||(t.today.searches={}),t.total||(t.total={views:{},searches:{}}),t.total.views||(t.total.views={}),t.total.searches||(t.total.searches={}),t}function bumpObjCount(t,n,e=1){n&&(t[n]=(t[n]||0)+e)}function normKw(t){return String(t||"").replace(/[\u0000-\u001f]/g," ").trim()}function tokenize(t){const n=normKw(t);return n?n.split(/[\s,\/|]+/g).map(t=>t.trim()).filter(t=>t.length>=2).slice(0,12):[]}function bumpView(t){const n=loadStats();bumpObjCount(n.today.views,t,1),bumpObjCount(n.total.views,t,1),saveStats(n),renderInsights()}function bumpSearch(t){const n=loadStats();track("search",{search_term:String(t||"").trim().slice(0,80),results_count:document.querySelectorAll(".card[data-card]").length,q_len:String(t||"").trim().length});const e=tokenize(t);e.length&&(e.forEach(t=>{const e=t.replace(/[a-z0-9]/gi,t=>t.toUpperCase());bumpObjCount(n.today.searches,e,1),bumpObjCount(n.total.searches,e,1)}),saveStats(n),renderInsights())}function topN(t,n=5){return Object.entries(t||{}).sort((t,n)=>n[1]-t[1]||t[0].localeCompare(n[0])).slice(0,n)}function renderLocalInsights(){const t=document.getElementById("insightKeywords"),n=document.getElementById("insightCards"),e=document.getElementById("insightResetBtn");if(!t&&!n)return;const o=loadStats();if(t){const n=topN(o.today.searches,10);if(n.length)t.innerHTML=n.map(([t,n],e)=>`\n        <div class="stat-item">\n          <div class="stat-left">\n            <div class="stat-rank">${e+1}</div>\n            <button class="stat-link" type="button" data-kw="${t.replace(/"/g,"&quot;")}">${t}</button>\n          </div>\n          <div class="stat-count">${n}</div>\n        </div>\n      `).join("");else{const n=["CAPS","VEGAS","페이백","USDT","파워볼","키노","슬롯","미니게임"];t.innerHTML=n.map((t,n)=>`\n        <div class="stat-item">\n          <div class="stat-left">\n            <div class="stat-rank">${n+1}</div>\n            <button class="stat-link" type="button" data-kw="${t}">${t}</button>\n          </div>\n          <div class="stat-count">추천</div>\n        </div>\n      `).join("")}}if(n){const t=topN(o.today.views,5);t.length?n.innerHTML=t.map(([t,n],e)=>`\n          <div class="stat-item">\n            <div class="stat-left">\n              <div class="stat-rank">${e+1}</div>\n              <button class="stat-link" type="button" data-card="${t}">${CARD_DATA[t]?.title||t}</button>\n            </div>\n            <div class="stat-count">${n}</div>\n          </div>\n        `).join(""):n.innerHTML='<div class="note-mini" style="padding:12px 14px 14px;">아직 오늘 열어본 카드가 없습니다. 카드 상세를 열면 TOP 리스트가 자동으로 채워집니다.</div>'}document.querySelectorAll("[data-kw]").forEach(t=>{t.onclick=()=>{const n=t.getAttribute("data-kw")||"",e=document.getElementById("searchInput");e&&(e.value=n,renderGrid(),e.focus()),track("insight_kw_click",{kw:n})}}),document.querySelectorAll("[data-card]").forEach(t=>{t.onclick=()=>{const n=t.getAttribute("data-card");n&&openCard(n),track("insight_card_click",{card_id:n})}}),e&&(e.onclick=()=>{try{localStorage.removeItem(STATS_KEY)}catch(t){}renderInsights(),track("insight_reset",{})})}let __INSIGHTS_MODE="auto",__GLOBAL_INSIGHTS_CACHE=null,__GLOBAL_INSIGHTS_AT=0;function hasGlobalInsights(){const t=window.SITE_CONFIG&&window.SITE_CONFIG.POPULAR_API||"";return t&&"disabled"!==t&&!/^\s*$/.test(t)}function bindInsightButtons(){document.querySelectorAll("[data-kw]").forEach(t=>{t.onclick=()=>{const n=t.getAttribute("data-kw")||"",e=document.getElementById("searchInput");e&&(e.value=n,renderGrid(),e.focus()),track("insight_kw_click",{kw:n})}}),document.querySelectorAll("[data-card]").forEach(t=>{t.onclick=()=>{const n=t.getAttribute("data-card");n&&openCard(n),track("insight_card_click",{card_id:n})}})}function renderGlobalInsights(t){const n=document.getElementById("insightKeywords"),e=document.getElementById("insightCards"),o=document.getElementById("insightResetBtn"),c=document.getElementById("insightKwMeta"),r=document.getElementById("insightCardMeta"),a=document.getElementById("insightHeadline");if(a){const n=t&&t.date?String(t.date):"";a.innerHTML='오늘의 인기 <span class="pill">전체 사용자 기준</span>'+(n?`<span class="pill ghost">${n}</span>`:"")}if(o&&(o.style.display="none"),c&&(c.textContent="GA4 이벤트(검색) 기준으로 집계됩니다."),r&&(r.textContent="GA4 이벤트(카드 열람) 기준으로 집계됩니다."),n){const e=t&&Array.isArray(t.keywords)?t.keywords:[];e.length?n.innerHTML=e.slice(0,10).map((t,n)=>{const e=(t.term||t.keyword||"").toString(),o=(t.count??t.value??"").toString();return`\n          <div class="stat-item">\n            <div class="stat-left">\n              <div class="stat-rank">${n+1}</div>\n              <button class="stat-link" type="button" data-kw="${e.replace(/"/g,"&quot;")}">${e}</button>\n            </div>\n            <div class="stat-count">${o}</div>\n          </div>\n        `}).join(""):n.innerHTML='<div class="stat-empty">아직 데이터가 충분히 쌓이지 않았어요.</div>'}if(e){const n=t&&Array.isArray(t.cards)?t.cards:[];n.length?e.innerHTML=n.slice(0,5).map((t,n)=>{const e=(t.id||t.card_id||"").toString(),o=(t.count??t.value??"").toString();return`\n          <div class="stat-item">\n            <div class="stat-left">\n              <div class="stat-rank">${n+1}</div>\n              <button class="stat-link" type="button" data-card="${e}">${CARD_DATA[e]?.title||e}</button>\n            </div>\n            <div class="stat-count">${o}</div>\n          </div>\n        `}).join(""):e.innerHTML='<div class="stat-empty">아직 데이터가 충분히 쌓이지 않았어요.</div>'}bindInsightButtons()}async function tryLoadGlobalInsights(t=!1){if(!hasGlobalInsights())return!1;if(!t&&__GLOBAL_INSIGHTS_CACHE&&Date.now()-__GLOBAL_INSIGHTS_AT<6e4)return!0;const n=window.SITE_CONFIG.POPULAR_API;try{const t=n.includes("?")?n+"&range=today":n+"?range=today",e=await fetch(t,{cache:"no-store"});if(!e.ok)throw new Error("bad status");const o=await e.json();return __GLOBAL_INSIGHTS_CACHE=o,__GLOBAL_INSIGHTS_AT=Date.now(),__INSIGHTS_MODE="global",renderGlobalInsights(o),!0}catch(t){return!1}}function renderInsights(){"global"!==__INSIGHTS_MODE?renderLocalInsights():__GLOBAL_INSIGHTS_CACHE&&renderGlobalInsights(__GLOBAL_INSIGHTS_CACHE)}async function initInsights(){try{const t=new URL(location.href);if("local"===(t.searchParams.get("insights")||"").toLowerCase())return __INSIGHTS_MODE="local",void renderLocalInsights()}catch(t){}await tryLoadGlobalInsights(!0)||(__INSIGHTS_MODE="local",renderLocalInsights())}const CLICK_KEY_PREFIX="88_card_click_";let currentFilter="all",currentSort="default",isCleanText=!1;function cleanBenefit(t){const n=String(t||"").replace(/[•]/g,"·").replace(/\s*\/\s*/g," / ").replace(/\s+/g," ").trim();return n.length>56?n.slice(0,55)+"…":n}function norm(t){return String(t||"").toLowerCase().replace(/\s+/g,"")}function getClickCount(t){return Number(localStorage.getItem("88_card_click_"+t)||0)}function incCardClick(t){localStorage.setItem("88_card_click_"+t,String(getClickCount(t)+1))}function cardSourcesById(t){const n=String(t).replace("card",""),e={card2:["img/img2.gif","img/imj2.gif"],card3:["img/img3.gif"]}[t];return{gif:Array.isArray(e)?e[0]||"":e||"",gif2:Array.isArray(e)&&e[1]||"",webp:`img/img${n}.webp`,jpg:`img/img${n}.jpg`}}const getCardSources=t=>cardSourcesById(t);function renderGrid(){const t=document.getElementById("vendorGridGuarantee"),n=document.getElementById("vendorGridVerified"),e=document.getElementById("vendorGrid");if(!t&&!n&&!e)return;const o=norm(document.getElementById("searchInput")?.value||""),c=["card1","card2","card3"],r=new Set(c),a=Object.keys(CARD_DATA);a.forEach(t=>{const n=CARD_DATA[t]||{};n.priority||(n.priority="normal"),n.tag||(n.tag="")});const i=t=>r.has(t),s=t=>t.slice().sort(()=>Math.random()-.5);let d=[...c.filter(t=>a.includes(t)),...a.filter(t=>i(t)&&!c.includes(t))],u=(t=>{const n=t.filter(t=>"high"===CARD_DATA[t].priority),e=t.filter(t=>"normal"===CARD_DATA[t].priority),o=t.filter(t=>"ad"===CARD_DATA[t].priority);return[...s(n),...s(e),...o]})(a.filter(t=>!i(t)));const l=t=>{const n=CARD_DATA[t];if("guarantee"===currentFilter&&!i(t))return!1;if("verified"===currentFilter&&i(t))return!1;if("rec"===currentFilter&&"rec"!==n.tag)return!1;if("new"===currentFilter&&"new"!==n.tag)return!1;if("ad"===currentFilter&&"ad"!==n.tag)return!1;if(o){if(!norm(`${n.title} ${n.code||""} ${n.benefit||""} ${n.notice||""} ${n.recruitText||""}`).includes(o))return!1}return!0};let m=d.filter(l),g=u.filter(l);"pop"===currentSort&&(m.sort((t,n)=>getClickCount(n)-getClickCount(t)),g.sort((t,n)=>getClickCount(n)-getClickCount(t)));const f=t=>{const n=CARD_DATA[t]||{},e=getCardSources(t),o=e.gif||e.webp||e.jpg||"";return`\n      <div class="card card--imageOnly" data-card="${t}" role="button" tabindex="0"\n           aria-label="${(n.title||"카드").replace(/"/g,"&quot;")} 열기">\n        <div class="img-box">\n          <img class="cardThumb"\n               src="${o}"\n               data-gif="${e.gif}"\n               data-gif2="${e.gif2||""}"\n               data-webp="${e.webp}"\n               data-jpg="${e.jpg}"\n               loading="lazy" decoding="async"\n               alt="${(n.title||"").replace(/"/g,"&quot;")}">\n          <div class="img-title" aria-hidden="true">${n.title||""}</div>\n        </div>\n      </div>\n    `},p=m.map(f).join(""),h=g.map(f).join("");t&&(t.innerHTML=p),n&&(n.innerHTML=h),!e||t||n||(e.innerHTML=[...m,...g].map(f).join("")),document.querySelectorAll(".vendor-section").forEach(t=>{t.getAttribute("data-section");const n=t.querySelector(".vendor-grid"),e=!!n&&n.querySelectorAll(".card[data-card]").length>0;t.style.display=e?"block":"none"}),document.querySelectorAll(".img-box").forEach(t=>{const n=t.querySelector("img");if(!n)return;const e=[n.dataset.gif,n.dataset.gif2,n.dataset.webp,n.dataset.jpg].filter(Boolean);let o=0;const c=()=>{let e=n.currentSrc||n.src||"";e.endsWith(".gif")&&(e=n.dataset.webp||n.dataset.jpg||e),t.style.setProperty("--bgimg",e?`url('${e}')`:"none")};n.addEventListener("load",c,{once:!1,passive:!0}),n.onerror=()=>{o+=1,e[o]?n.src=e[o]:(n.style.display="none",t.style.minHeight="130px")},!n.getAttribute("src")&&e[0]&&(n.src=e[0]),c()}),setChipActive(),bindCardClicks()}function setChipActive(){const t=document.getElementById("filterSelect"),n=document.getElementById("sortSelect"),e=document.getElementById("cleanToggle");t&&(t.value=currentFilter),n&&(n.value=currentSort),e&&(e.checked=!!isCleanText)}function setFilter(t){if(currentFilter=t||"all",setChipActive(),renderGrid(),"all"!==currentFilter){const t=document.getElementById("vendorTop");t&&t.scrollIntoView({behavior:"smooth",block:"start"})}track("filter_change",{filter:currentFilter,results_count:document.querySelectorAll(".card[data-card]").length})}function setSort(t){currentSort=t||"default",setChipActive(),renderGrid(),track("sort_change",{sort:currentSort,results_count:document.querySelectorAll(".card[data-card]").length})}function bindCardClicks(){document.querySelectorAll(".card[data-card]").forEach(t=>{t.onclick=()=>openCard(t.dataset.card)})}!function(){const t=document.getElementById("filterSelect"),n=document.getElementById("sortSelect"),e=document.getElementById("cleanToggle"),o=document.getElementById("cleanHint"),c=sessionStorage.getItem("88_filter"),r=sessionStorage.getItem("88_sort"),a=sessionStorage.getItem("88_clean_text");c&&(currentFilter=c),"pop"===c&&(currentFilter="all",currentSort="pop"),r&&(currentSort=r),"1"===a&&(isCleanText=!0),setChipActive(),o&&(o.style.display="block"),t&&t.addEventListener("change",()=>{sessionStorage.setItem("88_filter",t.value),setFilter(t.value)}),n&&n.addEventListener("change",()=>{sessionStorage.setItem("88_sort",n.value),setSort(n.value)}),e&&e.addEventListener("change",()=>{isCleanText=!!e.checked,sessionStorage.setItem("88_clean_text",isCleanText?"1":"0"),setChipActive(),renderGrid(),track("clean_text_toggle",{state:isCleanText?"on":"off"})});const i=document.getElementById("searchInput");if(i){let t=null;i.addEventListener("input",()=>{renderGrid(),clearTimeout(t);const n=i.value;t=setTimeout(()=>bumpSearch(n),900)}),i.addEventListener("keydown",t=>{"Enter"===t.key&&bumpSearch(i.value)})}!function(){const o=document.querySelector(".vendor-tools"),c=o?o.querySelector(".v-controls"):null;if(!o||!c)return;const r=window.matchMedia("(max-width:560px)");let a=null,s=null;function d(){s&&(s.textContent=function(){const o=t&&t.options[t.selectedIndex]?.text||"",c=n&&n.options[n.selectedIndex]?.text||"",r=e&&e.checked?"정제 ON":"정제 OFF",a=i&&i.value?i.value.trim():"",s=a?a.length>10?a.slice(0,10)+"…":a:"";return`${o} · ${c} · ${r}${s?` · "${s}"`:""}`}())}function u(t){if(t){if(a)return void d();a=document.createElement("details"),a.className="v-compact";const t=document.createElement("summary");t.innerHTML='<span class="sum"></span><span class="caret" aria-hidden="true">▾</span>',s=t.querySelector(".sum"),a.appendChild(t);const n=o.querySelector("#searchInput");n?n.insertAdjacentElement("afterend",a):o.insertBefore(a,o.firstChild),a.appendChild(c),d()}else{if(!a)return;const t=o.querySelector("#searchInput");t?t.insertAdjacentElement("afterend",c):o.insertBefore(c,o.firstChild),a.remove(),a=null,s=null}}t&&t.addEventListener("change",d),n&&n.addEventListener("change",d),e&&e.addEventListener("change",d),i&&i.addEventListener("input",d),r.addEventListener?r.addEventListener("change",t=>u(t.matches)):r.addListener(t=>u(t.matches)),u(r.matches)}()}();let currentCode="",currentCardId="",lastFocusEl=null;function openCard(t){const n=CARD_DATA[t];if(!n)return;currentCardId=t,bumpView(t),incCardClick(t),track("card_open",{card_id:t,title:n.title||"",tag:n.tag||"",code:(n.code||"").slice(0,16)});const e=!!n.recruit;currentCode=e?"":n.code||"",document.getElementById("pTitle").innerText=n.title||"",document.getElementById("pCode").innerText=n.code||"",document.getElementById("codeRow").style.display=e?"none":"block",document.getElementById("copyBtn").style.display=e?"none":"block",document.getElementById("pLink").style.display=e?"none":"block";const o=document.getElementById("pBenefit"),c=document.getElementById("pNotice");o.style.display=n.benefit&&!e?"block":"none",o.innerText=n.benefit&&!e?"혜택 : "+n.benefit:"",c.style.display=n.notice?"block":"none",c.innerText=n.notice?"주의 : "+n.notice:"";const r=document.getElementById("pLink");r&&(r.href=n.link?appendUtm(n.link):"#");const a=document.getElementById("pTelegram");a&&(a.href="https://t.me/UZU59",a.innerText="문의 (텔레그램)");try{const e=document.querySelector('.card[data-card="'+t+'"]'),o=e?e.closest(".vendor-section"):null,c=o&&o.id?o.id:"vendorTop";window.__88stAddRecentVendor&&window.__88stAddRecentVendor({id:t,title:n.title||t,href:"/?v="+encodeURIComponent(t)+"#"+c}),window.__88stRefreshUserMenu&&window.__88stRefreshUserMenu()}catch(t){}const i=document.getElementById("favBtn");if(i&&window.__88stIsFavVendor){const n=window.__88stIsFavVendor(t);i.textContent=n?"★ 즐겨찾기":"☆ 즐겨찾기",i.classList.toggle("is-on",!!n)}lastFocusEl=document.activeElement;document.getElementById("cardPopup").style.display="flex";const s=document.getElementById("closeBtn");s&&s.focus()}function closeCard(){document.getElementById("cardPopup").style.display="none",lastFocusEl&&lastFocusEl.focus&&lastFocusEl.focus()}function copyCode(){currentCode&&navigator.clipboard.writeText(currentCode).then(()=>{alert("가입코드가 복사되었습니다"),track("copy_code",{code:currentCode,card_id:currentCardId,title:CARD_DATA[currentCardId]?.title||"",tag:CARD_DATA[currentCardId]?.tag||""})}).catch(()=>{try{const t=document.createElement("textarea");t.value=currentCode,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove(),alert("가입코드가 복사되었습니다"),track("copy_code",{code:currentCode,card_id:currentCardId,title:CARD_DATA[currentCardId]?.title||"",tag:CARD_DATA[currentCardId]?.tag||""})}catch(t){}})}function copyToClipboard(t,n){t&&navigator.clipboard.writeText(t).then(()=>{n&&alert(n)}).catch(()=>{try{const e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),e.remove(),n&&alert(n)}catch(t){}})}function jumpToRec(){closeCard(),setFilter("rec");const t=document.getElementById("vendorTop");t&&t.scrollIntoView({behavior:"smooth",block:"start"}),track("popup_secondary_cta",{action:"jump_to_rec"})}function maybeAutoRecFilter(){const t=localStorage.getItem("88_ev_positive"),n=localStorage.getItem("88_ev_date"),e=dateKeyLocal(),o=document.getElementById("evAutoHint");"1"===t&&n===e?sessionStorage.getItem("88_ev_autoon_done")?o&&(o.style.display="block",o.innerText="✅ 오늘 +EV 기록이 있어 ‘추천’ 필터를 빠르게 확인할 수 있습니다."):(sessionStorage.setItem("88_ev_autoon_done","1"),currentFilter="rec",o&&(o.style.display="block",o.innerText="✅ 분석기에서 +EV가 감지되어 ‘추천’ 필터가 자동 활성화되었습니다. (오늘만)"),track("ev_autofilter",{state:"on"})):o&&(o.style.display="none",o.innerText="")}function openFromUrl(){try{const t=new URL(window.location.href).searchParams.get("v");t&&CARD_DATA[t]&&openCard(t)}catch(t){}}function _num(t){if(null==t)return NaN;const n=String(t).replace(/[,\s]/g,""),e=parseFloat(n);return Number.isFinite(e)?e:NaN}function _fmt(t){if(!Number.isFinite(t))return"-";try{return Math.round(t).toLocaleString("ko-KR")}catch(n){return String(Math.round(t))}}function setRiskMode(t){const n={stop:"riskStop",fixed:"riskFixed",kelly:"riskKelly"},e={stop:"rModeStop",fixed:"rModeFixed",kelly:"rModeKelly"};Object.keys(n).forEach(o=>{const c=document.getElementById(n[o]);c&&(c.style.display=o===t?"block":"none");const r=document.getElementById(e[o]);r&&(o===t?r.classList.add("active"):r.classList.remove("active"))})}function calcRiskStop(){const t=_num(document.getElementById("rBankroll1")?.value),n=_num(document.getElementById("rLossPct")?.value),e=_num(document.getElementById("rStopPct")?.value),o=document.getElementById("riskStopOut"),c=document.getElementById("riskStopHint");if(!o||!c)return;if(!Number.isFinite(t)||t<=0||!Number.isFinite(n)||n<=0)return o.textContent="총 자본과 손실 한도 %를 입력해줘.",void(c.textContent="");const r=t*(n/100),a=r*((Number.isFinite(e)&&e>0?e:80)/100),i=.01*t,s=.02*t;o.textContent=`손실 한도: ${_fmt(r)}원  ·  중단 기준: -${_fmt(a)}원`,c.textContent=`참고: 1% 비중=${_fmt(i)}원 / 2% 비중=${_fmt(s)}원 (상황에 따라 더 낮게 권장)`}function presetStake(t){const n=document.getElementById("rStakePct");n&&(n.value=String(t)),calcRiskFixed()}function calcRiskFixed(){const t=_num(document.getElementById("rBankroll2")?.value),n=_num(document.getElementById("rStakePct")?.value),e=document.getElementById("riskFixedOut"),o=document.getElementById("riskFixedHint");if(!e||!o)return;if(!Number.isFinite(t)||t<=0||!Number.isFinite(n)||n<=0)return e.textContent="총 자본과 베팅 비중 %를 입력해줘.",void(o.textContent="");const c=t*(n/100);e.textContent=`추천 1회 베팅액(고정 ${n}%): ${_fmt(c)}원`,o.textContent="참고: 연패/변동 구간이면 비중을 절반으로 낮추는게 안전합니다."}function calcRiskKelly(){const t=_num(document.getElementById("rBankroll3")?.value),n=_num(document.getElementById("rOdds")?.value),e=_num(document.getElementById("rWinPct")?.value),o=_num(document.getElementById("rKellyFactor")?.value),c=_num(document.getElementById("rMaxPct")?.value),r=document.getElementById("riskKellyOut"),a=document.getElementById("riskKellyHint");if(!r||!a)return;if(!Number.isFinite(t)||t<=0||!Number.isFinite(n)||n<=1||!Number.isFinite(e)||e<=0)return r.textContent="총 자본 / 배당(Decimal) / 승률% 를 입력해줘.",void(a.textContent="");const i=Math.min(Math.max(e/100,1e-4),.9999),s=n-1,d=1/n;let u=(s*i-(1-i))/s;(!Number.isFinite(u)||u<0)&&(u=0);const l=100*u,m=Number.isFinite(o)&&o>0?o/100:.25;let g=u*m;const f=Number.isFinite(c)&&c>0?c/100:.03,p=t*Math.min(g,f);if(u<=0)return r.textContent=`엣지 없음(손익분기 ${Math.round(1e3*d)/10}% 이상 필요) → 추천 0원`,void(a.textContent=`승률 추정(${Math.round(1e3*i)/10}%)이 손익분기보다 낮습니다. 과몰입 방지 차원에서 패스 권장.`);r.textContent=`풀 켈리 ${Math.round(10*l)/10}% → 보수(${Math.round(100*m)}%) 적용 ${Math.round(1e3*g)/10}% (상한 ${Math.round(1e3*f)/10}%) · 추천 ${_fmt(p)}원`,a.textContent=`손익분기 승률: ${Math.round(1e3*d)/10}% · 승률 추정치가 불확실하면 보수 배수/상한을 더 낮춰주세요.`}!function(){const t=document.getElementById("cardPopup"),n=(t?.querySelector(".popup-box"),document.getElementById("closeBtn")),e=document.getElementById("copyBtn"),o=document.getElementById("favBtn"),c=document.getElementById("moreRecBtn"),r=document.getElementById("pLink"),a=document.getElementById("pTelegram");n&&n.addEventListener("click",closeCard),e&&e.addEventListener("click",copyCode),o&&o.addEventListener("click",()=>{try{const t=currentCardId,n=CARD_DATA[t]?.title||t,e=!!window.__88stToggleFavVendor&&window.__88stToggleFavVendor({id:t,title:n});o.textContent=e?"★ 즐겨찾기":"☆ 즐겨찾기",o.classList.toggle("is-on",!!e),window.__88stRefreshUserMenu&&window.__88stRefreshUserMenu(),track&&track("fav_vendor_toggle",{card_id:t,state:e?"on":"off"})}catch(t){}}),c&&c.addEventListener("click",jumpToRec),r&&r.addEventListener("click",()=>track("outbound_click",{type:"external",card_id:currentCardId,title:CARD_DATA[currentCardId]?.title||"",url:document.getElementById("pLink")?.href||""})),a&&a.addEventListener("click",()=>track("outbound_click",{type:"telegram",card_id:currentCardId,title:CARD_DATA[currentCardId]?.title||"",url:document.getElementById("pTelegram")?.href||""})),[n,e,o].forEach(t=>{t&&t.addEventListener("keydown",n=>{"Enter"!==n.key&&" "!==n.key||(n.preventDefault(),t.click())})}),t&&t.addEventListener("click",n=>{n.target===t&&closeCard()}),document.addEventListener("keydown",n=>{if(t&&"flex"===t.style.display&&("Escape"===n.key&&closeCard(),"Tab"===n.key)){const e=t.querySelectorAll('a[href], button, [tabindex]:not([tabindex="-1"])'),o=Array.from(e).filter(t=>!t.hasAttribute("disabled")&&null!==t.offsetParent);if(!o.length)return;const c=o[0],r=o[o.length-1];n.shiftKey&&document.activeElement===c?(n.preventDefault(),r.focus()):n.shiftKey||document.activeElement!==r||(n.preventDefault(),c.focus())}})}(),function(){try{"function"==typeof saveUtmFromUrl&&saveUtmFromUrl()}catch(t){}try{"function"==typeof maybeAutoRecFilter&&maybeAutoRecFilter()}catch(t){}try{"function"==typeof renderGrid&&renderGrid()}catch(t){}try{"function"==typeof openFromUrl&&openFromUrl()}catch(t){}}(),function(){function t(t){try{let n=document.getElementById("miniToast88");n||(n=document.createElement("div"),n.id="miniToast88",n.style.position="fixed",n.style.left="50%",n.style.bottom="88px",n.style.transform="translateX(-50%)",n.style.padding="10px 12px",n.style.borderRadius="999px",n.style.background="rgba(0,0,0,.68)",n.style.border="1px solid rgba(255,255,255,.14)",n.style.color="#fff",n.style.fontSize="13px",n.style.fontWeight="800",n.style.zIndex="99999",n.style.opacity="0",n.style.transition="opacity .18s ease, transform .18s ease",document.body.appendChild(n)),n.textContent=t,n.style.opacity="1",n.style.transform="translateX(-50%) translateY(-4px)",clearTimeout(n.__t),n.__t=setTimeout(()=>{n.style.opacity="0",n.style.transform="translateX(-50%)"},1400)}catch(t){}}try{const r=new URLSearchParams(location.search).get("logoShadow"),a=localStorage.getItem("logoShadowPreset"),i=(r||a||"minimal").toLowerCase(),s="presence"===i||"bold"===i||"strong"===i?"presence":"minimal";document.body.dataset.logoShadow=s,r&&localStorage.setItem("logoShadowPreset",s);const d="88st_quickMemo_v1",u="88st_quickMemoHist_v1",l=document.getElementById("quickMemoText"),m=document.getElementById("quickMemoSave"),g=document.getElementById("quickMemoClear"),f=document.getElementById("memoAppendAnalysis"),p=document.getElementById("memoCopy"),h=document.getElementById("memoHistoryList"),S=document.querySelectorAll("[data-memo-insert]");function n(){const t=function(t,n){try{return JSON.parse(t)}catch(t){return n}}(localStorage.getItem(u),[]);return Array.isArray(t)?t:[]}function e(){if(!h)return;const t=n();t.length?h.innerHTML=t.map((t,n)=>{const e=t&&t.text?String(t.text):"";return`\n          <div class="memo-history-item" data-memo-idx="${n}">\n            <div class="memo-history-meta">\n              <span>${function(t){try{const n=new Date(t),e=String(n.getMonth()+1).padStart(2,"0"),o=String(n.getDate()).padStart(2,"0");return`${e}.${o} ${String(n.getHours()).padStart(2,"0")}:${String(n.getMinutes()).padStart(2,"0")}`}catch(t){return""}}(t&&t.t?Number(t.t):0)}</span>\n              <span style="color:rgba(245,226,122,.75);font-weight:900;">불러오기</span>\n            </div>\n            <div class="memo-history-text">${e.replace(/[<>&]/g,t=>({"<":"&lt;",">":"&gt;","&":"&amp;"}[t]))}</div>\n          </div>\n        `}).join(""):h.innerHTML='<div class="text" style="color:var(--muted);font-size:12px;">저장된 메모가 없습니다.</div>'}function o(t){const e=Date.now(),o=(t||"").trim();if(!o)return;const c=n();c.length&&c[0]&&String(c[0].text||"").trim()===o||(c.unshift({t:e,text:o}),function(t){try{localStorage.setItem(u,JSON.stringify(t.slice(0,5)))}catch(t){}}(c))}function c(t){const n=document.getElementById(t);if(!n)return[];return Array.from(n.querySelectorAll(".odds-pill")).map(t=>(t.textContent||"").trim()).filter(Boolean)}l&&(l.value=localStorage.getItem(d)||"",e(),m&&m.addEventListener("click",()=>{const n=(l.value||"").trim();localStorage.setItem(d,n),o(n),e(),t("메모 저장 완료")}),g&&g.addEventListener("click",()=>{l.value="",localStorage.removeItem(d),t("메모 비움")}),h&&h.addEventListener("click",e=>{const o=e.target.closest(".memo-history-item");if(!o)return;const c=Number(o.getAttribute("data-memo-idx")),r=n()[c];r&&"string"==typeof r.text&&(l.value=r.text,localStorage.setItem(d,r.text),t("메모 불러옴"))}),S&&S.forEach(t=>{t.addEventListener("click",()=>{const n=t.getAttribute("data-memo-insert")||"",e=l.selectionStart??l.value.length,o=l.selectionEnd??l.value.length,c=l.value.slice(0,e),r=l.value.slice(o),a=c&&!c.endsWith("\n")?"\n":"";l.value=c+a+n+r;const i=(c+a+n).length;l.focus(),l.setSelectionRange(i,i)})}),f&&f.addEventListener("click",()=>{const n=function(){const t=(document.getElementById("oddsMarginValue")?.textContent||"").trim();if(!t||"—"===t)return"";const n=c("oddsFairPills"),e=c("oddsProbPills");return`[배당 구조 분석] 마진 ${t} | 공정배당 ${n.length?n.join(" / "):"—"} | 정규확률 ${e.length?e.join(" / "):"—"}`}();if(!n)return void t("먼저 '분석 실행'을 눌러주세요");const r=(l.value||"").trim();l.value=r?r+"\n"+n:n,localStorage.setItem(d,l.value.trim()),o(l.value.trim()),e(),t("분석 요약 추가")}),p&&p.addEventListener("click",async()=>{const n=(l.value||"").trim();if(n)try{await navigator.clipboard.writeText(n),t("메모 복사됨")}catch(n){try{l.focus(),l.select(),document.execCommand("copy"),t("메모 복사됨")}catch(n){t("복사 실패")}finally{l.setSelectionRange(l.value.length,l.value.length)}}else t("복사할 메모가 없습니다")}))}catch(_){}}(),document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("rLossPct");t&&!t.value&&(t.value="5");const n=document.getElementById("rStopPct");n&&!n.value&&(n.value="80");const e=document.getElementById("rKellyFactor");e&&!e.value&&(e.value="25");const o=document.getElementById("rMaxPct");o&&!o.value&&(o.value="3")}),function(){const t=document.getElementById("insightMemoSection");if(!t)return;const n=Array.from(t.querySelectorAll(".im-tab[data-imtab]")),e=Array.from(t.querySelectorAll(".im-panel[data-impanel]"));if(!n.length||!e.length)return;const o="insightMemoTab";function c(t){n.forEach(n=>{const e=n.dataset.imtab===t;n.classList.toggle("active",e),n.setAttribute("aria-selected",e?"true":"false"),n.tabIndex=e?0:-1}),e.forEach(n=>{const e=n.dataset.impanel===t;n.classList.toggle("active",e),n.hidden=!e});try{localStorage.setItem(o,t)}catch(t){}}let r=null;try{r=localStorage.getItem(o)}catch(t){}c(r&&e.some(t=>t.dataset.impanel===r)?r:"insight"),n.forEach(t=>{t.addEventListener("click",()=>c(t.dataset.imtab)),t.addEventListener("keydown",t=>{if("ArrowLeft"!==t.key&&"ArrowRight"!==t.key)return;t.preventDefault();const e=n.indexOf(document.activeElement);if(e<0)return;const o="ArrowRight"===t.key?(e+1)%n.length:(e-1+n.length)%n.length;n[o].focus()})})}(),function(){const t=document.getElementById("quickMemoText"),n=document.getElementById("quickMemoSave"),e=document.getElementById("quickMemoClear");if(!t||!n||!e)return;const o="quickMemoText";try{const n=localStorage.getItem(o);null!=n&&(t.value=n)}catch(t){}n.addEventListener("click",()=>{try{localStorage.setItem(o,t.value||"")}catch(t){}"function"==typeof toast&&toast("메모 저장됨")}),e.addEventListener("click",()=>{t.value="";try{localStorage.removeItem(o)}catch(t){}"function"==typeof toast&&toast("메모 비움")})}();