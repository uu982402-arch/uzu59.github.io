/*
  88ST Global Theme Toggle
  - Supports: system(auto) / dark / light
  - Works across all pages by overriding core tokens (--bg, --panel, --muted, etc.)
  - Designed to be safe with legacy inline CSS (uses html[data-theme] + !important)
*/

/* ----- Core tokens (defaults assume existing dark theme) ----- */
:root{
  /* text helpers (some pages hardcode colors; these are used by our overrides) */
  --stText: rgba(255,255,255,.92);
  --stTextMuted: rgba(255,255,255,.72);
  --stBorder: rgba(255,255,255,.14);

  /* logo surface */
  --stLogoBg: rgba(20,20,24,.26);
  --stLogoBorder: rgba(255,255,255,.12);

  /* toggle surface */
  --stToggleBg: rgba(20,20,24,.45);
  --stToggleBorder: rgba(255,255,255,.16);
  --stToggleShadow: 0 14px 34px rgba(0,0,0,.35);
}

html{ color-scheme: dark; }

/* ----- Light theme overrides ----- */
html[data-theme="light"]{
  color-scheme: light;

  /* neutral palette (keeps accent variables untouched) */
  --bg: #f6f7fb !important;
  --panel: rgba(255,255,255,.86) !important;
  --panel2: rgba(245,247,252,.92) !important;
  --chip: rgba(235,239,246,.96) !important;
  --muted: rgba(20,25,35,.72) !important;
  --glassBorder: rgba(10,20,30,.14) !important;

  --stText: rgba(10,18,26,.92);
  --stTextMuted: rgba(10,18,26,.64);
  --stBorder: rgba(10,20,30,.14);

  --stLogoBg: rgba(255,255,255,.86);
  --stLogoBorder: rgba(10,20,30,.10);

  --stToggleBg: rgba(255,255,255,.74);
  --stToggleBorder: rgba(10,20,30,.12);
  --stToggleShadow: 0 14px 34px rgba(10,20,30,.16);
}

/* Background + base text (overrides common inline styles) */
html[data-theme="light"] body{
  background:
    radial-gradient(1200px 620px at 50% -10%, rgba(95,178,255,.14), transparent 58%),
    radial-gradient(900px 540px at 15% 25%, rgba(120,170,255,.10), transparent 55%),
    radial-gradient(900px 640px at 85% 35%, rgba(80,140,255,.08), transparent 55%),
    linear-gradient(180deg, #ffffff, var(--bg)) !important;
  color: var(--stText) !important;
}

/* Make common containers readable in light mode */
html[data-theme="light"] :where(.wrap,.container,.card,.panel,.box,.section,.footer,.sheet,.modal,.scam-box){
  color: var(--stText) !important;
}
html[data-theme="light"] :where(.sub,.text,.muted,small,.small,.hint,.desc){
  color: var(--muted) !important;
}

/* Links: keep them clearly clickable in light mode */
html[data-theme="light"] a{
  color: #0b5fff;
}
html[data-theme="light"] a:hover{ opacity:.9; }

/* Inputs: force contrast in light mode */
html[data-theme="light"] :where(input,select,textarea){
  background: rgba(255,255,255,.92) !important;
  color: rgba(10,18,26,.92) !important;
  border-color: rgba(10,20,30,.18) !important;
}

/* Notice bars appear on many pages */
html[data-theme="light"] .notice-bar{
  background: rgba(255,255,255,.76) !important;
  border-color: rgba(10,20,30,.12) !important;
  color: rgba(10,18,26,.90) !important;
}
html[data-theme="light"] .notice-bar a{ color: rgba(10,18,26,.90) !important; }
html[data-theme="light"] .notice-toggle{
  border-color: rgba(10,20,30,.18) !important;
  background: rgba(10,20,30,.06) !important;
  color: rgba(10,18,26,.90) !important;
}

/* Logo surface unify (landing pages + other domains) */
:where(.logoImg, .logo-img){
  background: var(--stLogoBg) !important;
  border-color: var(--stLogoBorder) !important;
}

/* ----- Floating theme control ----- */
#stThemeToggle{
  position:fixed;
  right:14px;
  bottom:14px;
  z-index:9999;
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  border-radius:999px;
  border:1px solid var(--stToggleBorder);
  background: var(--stToggleBg);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: var(--stToggleShadow);
  color: var(--stText);
  cursor:pointer;
  user-select:none;
  appearance:none;
  -webkit-appearance:none;
  transition: transform .14s ease, opacity .14s ease, border-color .14s ease;
}
#stThemeToggle:hover{ opacity:.98; }
#stThemeToggle:active{ transform: scale(.98); }
#stThemeToggle .stIcon{ width:18px; height:18px; display:grid; place-items:center; font-size:16px; }
#stThemeToggle .stLabel{ font-weight:1000; font-size:12px; letter-spacing:.2px; }
#stThemeToggle .stMode{ font-weight:900; font-size:11px; opacity:.72; }

@media (max-width:420px){
  #stThemeToggle{ padding:10px 11px; gap:8px; }
  #stThemeToggle .stMode{ display:none; }
}
