!function(){const e="88st_theme_mode_v1",t=document.documentElement;function getSaved(){return localStorage.getItem(e)||"system"}function save(t){localStorage.setItem(e,t)}function resolve(e){return"dark"===e?"dark":"light"===e?"light":function prefersDark(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}()?"dark":"light"}function setTheme(e){const n=resolve(e);t.classList.add("_themeTransition"),window.setTimeout(()=>t.classList.remove("_themeTransition"),260),t.dataset.theme=n,t.dataset.themeMode=e,function updateToggleLabel(){const e=document.getElementById("_88stThemeToggle");if(!e)return;const n=t.dataset.theme||"dark",o=t.dataset.themeMode||"system",d=e.querySelector(".icon"),i=e.querySelector(".mode");d&&(d.textContent=function iconFor(e){return"light"===e?"‚òÄÔ∏è":"üåô"}(n));i&&(i.textContent=function labelFor(e){return"system"===e?"SYSTEM":"dark"===e?"DARK":"LIGHT"}(o))}(),dockToggle();try{window.dispatchEvent(new CustomEvent("88st:theme",{detail:{theme:n,mode:e}}))}catch(e){}}function dockToggle(){if(!document.getElementById("_88stThemeToggle"))return;let e=0;const n=document.getElementById("_88stShellHeader")||document.querySelector(".st-shell-header");if(n){const t=getComputedStyle(n);if("none"!==t.display&&"hidden"!==t.visibility){const t=n.getBoundingClientRect();t.top<=0&&t.bottom>0&&(e=Math.round(t.bottom)+8)}}e=Math.min(Math.max(e,0),110),t.style.setProperty("--_88stToggleTopExtra",`${e}px`)}function boot(){!function ensureToggle(){if(document.getElementById("_88stThemeToggle"))return;const e=document.createElement("div");e.id="_88stThemeToggle",e.setAttribute("role","button"),e.setAttribute("aria-label","ÌÖåÎßà Î≥ÄÍ≤Ω"),e.innerHTML='\n      <div class="icon" aria-hidden="true">üåô</div>\n      <div style="display:flex;flex-direction:column;gap:2px;line-height:1;">\n        <div class="label">ÌÖåÎßà</div>\n        <div class="mode">SYSTEM</div>\n      </div>\n    ',e.addEventListener("click",()=>{const e=function cycle(e){return"system"===e?"dark":"dark"===e?"light":"system"}(getSaved());save(e),setTheme(e)}),e.addEventListener("contextmenu",e=>{e.preventDefault(),save("system"),setTheme("system")}),document.body.appendChild(e)}(),function initMetaThemeColor(){const ensure=(e,t)=>{const n=document.createElement("meta");n.name="theme-color",n.content=e,t&&(n.media=t),document.head.appendChild(n)};0===Array.from(document.querySelectorAll('meta[name="theme-color"]')).length&&(ensure("#0b0c10","(prefers-color-scheme: dark)"),ensure("#f6f8ff","(prefers-color-scheme: light)"))}(),function bindSystemListener(){if(!window.matchMedia)return;const e=window.matchMedia("(prefers-color-scheme: dark)"),handler=()=>{"system"===getSaved()&&setTheme("system")};e.addEventListener?e.addEventListener("change",handler):e.addListener&&e.addListener(handler)}(),setTheme(getSaved()),window.addEventListener("resize",dockToggle),window.addEventListener("orientationchange",dockToggle),window.addEventListener("scroll",()=>{window.requestAnimationFrame(dockToggle)},{passive:!0})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",boot):boot()}();