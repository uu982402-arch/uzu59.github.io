<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>ìŠ¤í¬ì¸  ë°°ë‹¹ ë¶„ì„ê¸° | 88 ì»¤ë®¤ë‹ˆí‹°</title>
<meta name="description" content="ì¢…ëª©(ì¶•êµ¬/ë†êµ¬/ì•¼êµ¬/ë°°êµ¬/eìŠ¤í¬ì¸ /í•˜í‚¤)ë³„ ë°°ë‹¹ ì…ë ¥ìœ¼ë¡œ ìŠ¹ë¦¬ í™•ë¥ (ë°°ë‹¹ ê¸°ë°˜Â·ì¶”ì •), ì˜¤ë²„ë¼ìš´ë“œ(ë§ˆì§„), ë°¸ë¥˜(EV), ê¶Œì¥ ë¹„ì¤‘(ë³´ìˆ˜ì  Kelly)ê¹Œì§€ ê³„ì‚°í•˜ëŠ” ë¶„ì„ê¸°ì…ë‹ˆë‹¤. (íŒë‹¨ ë³´ì¡°ìš©)" />
<link rel="canonical" href="https://88st.cloud/analysis.html" />
<meta name="robots" content="index,follow" />

<style>
*,
*::before,
*::after{ box-sizing:border-box; }

:root{
  --bg:#0b0b0b;
  --panel:#121212;
  --panel2:#111;
  --gold:#d4af37;
  --gold2:#f5e27a;
  --muted:#cfcfcf;
  --chip:#1f1f1f;
  --good:#b7ffcf;
  --warn:#ffb3b3;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,system-ui;
  background:
    radial-gradient(1200px 500px at 50% -10%, rgba(212,175,55,.14), transparent 55%),
    radial-gradient(900px 500px at 10% 20%, rgba(90,160,255,.08), transparent 60%),
    linear-gradient(180deg, #07070a, var(--bg));
  color:#fff;
  scroll-behavior:smooth;
}

/* ===== ìƒë‹¨ ê³µì§€/ì´ë²¤íŠ¸ ë°°ë„ˆ (ìë™ ìˆœí™˜) ===== */
.notice-bar{
  position:sticky;
  top:0;
  z-index:1600;
  background:linear-gradient(135deg,var(--gold),var(--gold2));
  color:#000;
  font-weight:900;
  font-size:13px;
  padding:10px 12px;
  text-align:center;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
}
.notice-bar a{ color:#000; text-decoration:none; }

/* ===== ë¡œë”© í™”ë©´ ===== */
#loader{
  position:fixed;
  inset:0;
  z-index:2000;
  background:
    radial-gradient(900px 500px at 50% 30%, rgba(212,175,55,.18), transparent 55%),
    linear-gradient(180deg,#07070a,#0b0b0b);
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  gap:14px;
}
#loader .logoWrap{
  width:min(220px, 60vw);
  aspect-ratio:1/1;
  display:flex;
  align-items:center;
  justify-content:center;
  filter: drop-shadow(0 0 24px rgba(212,175,55,.22));
}
#loader img{
  width:100%;
  height:100%;
  object-fit:contain;
  animation: pulse 1.4s ease-in-out infinite;
}
#loader .text{
  font-weight:900;
  letter-spacing:.6px;
  color:#e9e9e9;
  opacity:.85;
  font-size:13px;
}
@keyframes pulse{
  0%{ transform:scale(1); opacity:.85; }
  50%{ transform:scale(1.03); opacity:1; }
  100%{ transform:scale(1); opacity:.85; }
}
#loader.hide{
  opacity:0;
  pointer-events:none;
  transition: opacity .35s ease;
}

/* ===== ì‚¬ì¹­ì£¼ì˜ íŒì—… (1ì¼ 1íšŒ) ===== */
.scam-popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.75);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:3000;
  padding:18px;
}
.scam-box{
  background:rgba(17,17,17,.95);
  border:1px solid rgba(255,255,255,.08);
  border-radius:18px;
  padding:22px;
  width:100%;
  max-width:380px;
  text-align:center;
  box-shadow:0 18px 60px rgba(0,0,0,.75);
  backdrop-filter: blur(10px);
}
.scam-box h3{
  color:#ff6b6b;
  margin:0 0 10px;
  font-weight:900;
}
.scam-box p{
  font-size:13px;
  color:#ddd;
  line-height:1.55;
  margin:0;
}
.scam-box .btn{
  margin-top:12px;
  padding:12px;
  border-radius:12px;
  background:linear-gradient(135deg,var(--gold),var(--gold2));
  color:#000;
  font-weight:900;
  cursor:pointer;
  user-select:none;
}

/* ìƒë‹¨ */
.header{ text-align:center; padding:14px 0 10px; }
.logo-link{display:inline-block;text-decoration:none}
.logo-img{
  display:block; margin:0 auto 6px;
  width:180px; max-width:72%; height:auto;
  filter:drop-shadow(0 0 10px rgba(212,175,55,.25));
}
@media(max-width:480px){ .logo-img{width:140px;max-width:82%} }
.sub{ font-size:12px; color:#9a9a9a; }

/* ë ˆì´ì•„ì›ƒ */
.wrap{ max-width:980px; margin:0 auto; padding:10px 14px 28px; }
.card{
  background:rgba(18,18,18,.85);
  border:1px solid rgba(255,255,255,.06);
  border-radius:18px; padding:14px;
  box-shadow:0 10px 26px rgba(0,0,0,.45);
  margin-bottom:14px;
  backdrop-filter: blur(10px);
}
.title{ font-weight:900; color:var(--gold2); margin-bottom:10px; font-size:14px; }
.note{ color:#bdbdbd; font-size:12px; line-height:1.5; margin-top:8px; }
.small-hint{ font-size:11px; color:#8f8f8f; margin-top:6px; line-height:1.4; }

/* ì»¨íŠ¸ë¡¤ */
.controls{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
@media(max-width:560px){ .controls{ grid-template-columns:1fr; } }
.select, .textinput{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.08);
  background:#0f0f0f;
  color:#fff;
  outline:none;
  font-weight:800;
}
.textinput{ font-weight:700; }
.row2{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
  margin-top:10px;
}
@media(max-width:560px){ .row2{ grid-template-columns:1fr; } }

/* ì…ë ¥ */
.grid{ display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:10px; }
@media(max-width:560px){ .grid{grid-template-columns:1fr} }
.field label{ display:block; font-size:12px; color:#bbb; margin:2px 0 6px; }
.field input{
  width:100%; padding:12px; border-radius:14px;
  border:1px solid rgba(255,255,255,.08);
  background:#0f0f0f; color:#fff; outline:none;
}
.field input::placeholder{color:#555}

/* ì„¹ì…˜ ë°•ìŠ¤ */
.box{
  margin-top:12px;
  padding:12px;
  border-radius:16px;
  background:rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.06);
}
.box-title{
  font-weight:900;
  margin:0 0 8px;
  color:var(--gold2);
  font-size:13px;
}
.box-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}
.toggle{
  cursor:pointer;
  font-size:12px;
  color:#cfcfcf;
  user-select:none;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.08);
  background:rgba(0,0,0,.25);
}

/* ì•¡ì…˜ */
.actions{ display:flex; gap:10px; margin-top:12px; flex-wrap:wrap; }
.btn{
  flex:1; min-width:160px;
  border:none; border-radius:14px; padding:12px;
  font-weight:900; cursor:pointer;
}
.primary{ background:linear-gradient(135deg,#1da1f2,#78d6ff); color:#00121a; }
.secondary{ background:#1f1f1f; color:#fff; border:1px solid rgba(255,255,255,.06); }
.gold{ background:linear-gradient(135deg,var(--gold),var(--gold2)); color:#111; }

/* ê²°ê³¼ */
.result{
  background:rgba(255,255,255,.04);
  border:1px solid rgba(255,255,255,.06);
  border-radius:16px;
  padding:12px;
  margin-top:12px;
}
.kv{
  display:flex; justify-content:space-between; gap:10px;
  padding:8px 0; border-bottom:1px solid rgba(255,255,255,.06);
  font-size:13px;
}
.kv:last-child{border-bottom:none}
.k{color:#cfcfcf}
.v{font-weight:900}
.warn{color:var(--warn)}
.good{color:var(--good)}

hr.sep{
  border:none; height:1px; background:rgba(255,255,255,.06);
  margin:12px 0;
}

.footer-links{ display:flex; gap:10px; margin-top:14px; flex-wrap:wrap; }
.linkbtn{
  flex:1; min-width:160px;
  display:block; text-align:center; padding:12px;
  border-radius:14px; text-decoration:none; font-weight:900;
  background:var(--chip); color:#fff;
  border:1px solid rgba(255,255,255,.06);
}

/* ì²´í¬ë¦¬ìŠ¤íŠ¸ */
.checklist{
  color:#cfcfcf;
  font-size:13px;
  line-height:1.55;
}
.checklist strong{ color:#fff; }

/* ë§ˆì§„ ëŒ€ì‹œë³´ë“œ */
.m-grid{
  display:grid; gap:10px;
  grid-template-columns:1fr 1fr 1fr;
}
@media(max-width:800px){ .m-grid{ grid-template-columns:1fr; } }
.m-card{
  border:1px solid rgba(255,255,255,.08);
  background:rgba(0,0,0,.25);
  border-radius:16px;
  padding:12px;
}
.m-head{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
.m-name{ font-weight:900; color:#fff; font-size:13px; }
.m-pill{
  font-size:11px;
  font-weight:900;
  padding:4px 8px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.25);
}
.m-good{ color:#0b0b0b; background:linear-gradient(135deg,#b7ffcf,#7bffb0); border:none; }
.m-ok{ color:#0b0b0b; background:linear-gradient(135deg,#f5e27a,#ffd86a); border:none; }
.m-bad{ color:#0b0b0b; background:linear-gradient(135deg,#ffb3b3,#ff6b6b); border:none; }
.m-line{ margin-top:8px; font-size:12px; color:#cfcfcf; line-height:1.45; }
.m-big{
  font-size:16px;
  font-weight:900;
  margin-top:8px;
  color:#fff;
}
.m-sub{ font-size:11px; color:#9a9a9a; margin-top:6px; line-height:1.4; }

/* íˆìŠ¤í† ë¦¬ */
.hist-head{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
}
.hist-actions{
  display:flex; gap:8px; flex-wrap:wrap;
}
.chip{
  font-size:12px;
  font-weight:900;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.08);
  background:rgba(0,0,0,.25);
  color:#fff;
  cursor:pointer;
  user-select:none;
}
.hist-list{ display:grid; gap:10px; margin-top:10px; }
.hist-item{
  border:1px solid rgba(255,255,255,.08);
  background:rgba(0,0,0,.22);
  border-radius:16px;
  padding:12px;
}
.hist-top{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
}
.hist-title{ font-weight:900; font-size:13px; }
.hist-meta{ font-size:11px; color:#9a9a9a; }
.hist-tags{ margin-top:8px; display:flex; gap:8px; flex-wrap:wrap; }
.tag{
  font-size:11px;
  font-weight:900;
  padding:4px 8px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.25);
}
.tag-good{ background:linear-gradient(135deg,#b7ffcf,#7bffb0); color:#0b0b0b; border:none; }
.tag-bad{ background:linear-gradient(135deg,#ffb3b3,#ff6b6b); color:#0b0b0b; border:none; }
.tag-mid{ background:linear-gradient(135deg,#f5e27a,#ffd86a); color:#0b0b0b; border:none; }

.compare-wrap{
  display:none;
  margin-top:12px;
  border:1px solid rgba(255,255,255,.08);
  background:rgba(0,0,0,.22);
  border-radius:16px;
  padding:12px;
}
.compare-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
@media(max-width:760px){ .compare-grid{ grid-template-columns:1fr; } }
.compare-box{
  border:1px solid rgba(255,255,255,.08);
  background:rgba(0,0,0,.22);
  border-radius:16px;
  padding:12px;
}
.compare-box .h{ font-weight:900; color:var(--gold2); margin-bottom:8px; font-size:13px; }
.compare-box .p{ font-size:12px; color:#cfcfcf; line-height:1.5; }

/* ===== ë¶„ì„ê¸° ì§„ì… ê´‘ê³  íŒì—… (Aì•ˆ: 1ì¼ 1íšŒ, 2ê°œ ë…¸ì¶œ) ===== */
.ad-popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.78);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:2600;
  padding:18px;
}
.ad-box{
  width:100%;
  max-width:420px;
  background:rgba(17,17,17,.95);
  border:1px solid rgba(255,255,255,.08);
  border-radius:18px;
  padding:18px;
  box-shadow:0 18px 60px rgba(0,0,0,.75);
  backdrop-filter: blur(10px);
}
.ad-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:10px;
}
.ad-title{
  font-weight:900;
  color:var(--gold2);
  font-size:14px;
}
.ad-close{
  cursor:pointer;
  user-select:none;
  font-size:12px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.10);
  background:rgba(0,0,0,.28);
  color:#fff;
}
.ad-grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}
@media(max-width:360px){
  .ad-grid{ grid-template-columns:1fr; }
}
.ad-item{
  border:1px solid rgba(255,255,255,.08);
  background:rgba(0,0,0,.25);
  border-radius:14px;
  padding:12px;
  cursor:pointer;
}
.ad-item .name{ font-weight:900; font-size:13px; }
.ad-item .sub{ font-size:11px; color:#bdbdbd; margin-top:4px; line-height:1.4; }
.ad-item .badge{
  display:inline-block;
  margin-top:8px;
  font-size:11px;
  font-weight:900;
  padding:4px 8px;
  border-radius:999px;
  background:linear-gradient(135deg,var(--gold),var(--gold2));
  color:#111;
}
.ad-actions{
  display:flex;
  gap:10px;
  margin-top:12px;
}
.ad-actions .btnx{
  flex:1;
  text-align:center;
  padding:10px 12px;
  border-radius:14px;
  font-weight:900;
  cursor:pointer;
  border:1px solid rgba(255,255,255,.08);
  background:#1f1f1f;
  color:#fff;
  text-decoration:none;
}
.ad-actions .btnx.primary{
  background:linear-gradient(135deg,#1da1f2,#78d6ff);
  color:#00121a;
  border:none;
}
.ad-note{
  margin-top:10px;
  font-size:11px;
  color:#9a9a9a;
  line-height:1.4;
}
</style>
</head>

<body>

<!-- âœ… ìƒë‹¨ ê³µì§€/ì´ë²¤íŠ¸ ë°°ë„ˆ(ìë™ ìˆœí™˜) -->
<div class="notice-bar">
  <a id="noticeLink" href="https://t.me/UZU59" target="_blank" rel="noopener">
    <span id="noticeText"></span>
  </a>
</div>

<!-- âœ… ë¡œë”© í™”ë©´ -->
<div id="loader">
  <div class="logoWrap">
    <img src="img/logo-88-community.png" alt="88 ë¡œê³  ë¡œë”©">
  </div>
  <div class="text">Loading...</div>
</div>

<!-- âœ… ì‚¬ì¹­ì£¼ì˜ íŒì—… (1ì¼ 1íšŒ) -->
<div class="scam-popup" id="scamPopup">
  <div class="scam-box">
    <h3>âš ï¸ ì‚¬ì¹­ ì£¼ì˜ ì•ˆë‚´</h3>
    <p>
      88 ì»¤ë®¤ë‹ˆí‹° ê³µì‹ ê´€ë¦¬ì í…”ë ˆê·¸ë¨ì€<br>
      <b>@UZU59</b> ë‹¨ í•˜ë‚˜ì…ë‹ˆë‹¤.<br><br>
      ê·¸ ì™¸ ê³„ì •ì€ ì‚¬ì¹­ì¼ ìˆ˜ ìˆìœ¼ë‹ˆ<br>
      ë°˜ë“œì‹œ ì£¼ì˜í•´ ì£¼ì„¸ìš”.
    </p>
    <div class="btn" onclick="closeScam()">í™•ì¸</div>
  </div>
</div>

<!-- âœ… ë¶„ì„ê¸° ì§„ì… ê´‘ê³  íŒì—… (1ì¼ 1íšŒ) -->
<div class="ad-popup" id="adPopup">
  <div class="ad-box">
    <div class="ad-head">
      <div class="ad-title">ğŸ ì§€ê¸ˆ ë§ì´ ì°¾ëŠ” ì¶”ì²œ ë†€ì´í„°</div>
      <div class="ad-close" onclick="closeAdPopup(true)">ì˜¤ëŠ˜ ê·¸ë§Œ ë³´ê¸°</div>
    </div>

    <div class="ad-grid" id="adGrid"></div>

    <div class="ad-actions">
      <a class="btnx primary" href="./#vendors" aria-label="ì¸ì¦ ë†€ì´í„° ë³´ê¸°">ì¸ì¦ ë†€ì´í„° ë³´ê¸°</a>
      <a class="btnx" href="https://t.me/UZU59" target="_blank" rel="noopener">ë¬¸ì˜</a>
    </div>

    <div class="ad-note">â€» íŒì—…ì€ 1ì¼ 1íšŒë§Œ í‘œì‹œë©ë‹ˆë‹¤. (ì›ì¹˜ ì•Šìœ¼ë©´ ë‹«ê¸°)</div>
    <div class="ad-close" style="margin-top:10px;text-align:center;" onclick="closeAdPopup(false)">ë‹«ê¸°</div>
  </div>
</div>

<!-- SEOìš© ìˆ¨ê¹€ H1 -->
<h1 style="position:absolute;left:-9999px;">
ìŠ¤í¬ì¸  ë°°ë‹¹ ë¶„ì„ê¸° | 88 ì»¤ë®¤ë‹ˆí‹°
</h1>

<div class="header">
  <a class="logo-link" href="./" aria-label="í™ˆìœ¼ë¡œ ì´ë™">
    <img src="img/logo-88-community.png" alt="88 ì»¤ë®¤ë‹ˆí‹°" class="logo-img">
  </a>
  <div class="sub">ìŠ¤í¬ì¸  ë°°ë‹¹ ë¶„ì„ê¸° (í†µí•©í˜• Â· íˆìŠ¤í† ë¦¬/ë§ˆì§„/EV/ë¹„êµ)</div>
</div>

<div class="wrap">

  <!-- âœ… ë°°íŒ… ì²´í¬ë¦¬ìŠ¤íŠ¸ (ëœë¤ 3ì¤„) -->
  <div class="card">
    <div class="title">ë°°íŒ… ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸ (ëœë¤ 3ì¤„)</div>
    <div class="checklist" id="checklistText"></div>
    <div class="actions" style="margin-top:10px;">
      <button class="btn secondary" onclick="refreshChecklist()">ì²´í¬ë¦¬ìŠ¤íŠ¸ ìƒˆë¡œê³ ì¹¨</button>
      <a class="btn gold" style="text-decoration:none;text-align:center;line-height:1.1;" href="https://t.me/UZU59" target="_blank" rel="noopener">ë¬¸ì˜</a>
    </div>
    <div class="small-hint">â€» ê³¼ëª°ì… ë°©ì§€/ë¦¬ìŠ¤í¬ ê´€ë¦¬ìš© ì•ˆë‚´ì…ë‹ˆë‹¤.</div>
  </div>

  <!-- âœ… ì˜¤ëŠ˜ ë§ˆì§„ ë‚®ì€ TOP3 (ë©”ì¸/OU/í•¸ë”” ê°ê°) -->
  <div class="card">
    <div class="title">ì˜¤ëŠ˜ ë§ˆì§„ ë‚®ì€ TOP3</div>
    <div class="small-hint" style="margin-top:-6px;">â€» ì˜¤ëŠ˜(ë¡œì»¬ ê¸°ì¤€) ì €ì¥ëœ íˆìŠ¤í† ë¦¬ ì¤‘ â€œë§ˆì§„ ë‚®ìŒâ€ íŒì • ìƒìœ„ 3ê°œì”© ìë™ ë…¸ì¶œ</div>

    <div class="box">
      <div class="box-title">ë©”ì¸ TOP3</div>
      <div id="top3Main" class="hist-list"></div>
    </div>

    <div class="box">
      <div class="box-title">ì˜¤ë²„/ì–¸ë” TOP3</div>
      <div id="top3OU" class="hist-list"></div>
    </div>

    <div class="box">
      <div class="box-title">í•¸ë””ìº¡ TOP3</div>
      <div id="top3Handi" class="hist-list"></div>
    </div>
  </div>

  <!-- âœ… ì„¤ì •/ì…ë ¥/ê³„ì‚° -->
  <div class="card" id="settingsCard">
    <div class="title">ì„¤ì •</div>

    <div class="controls">
      <select id="sport" class="select" onchange="onSportChange()">
        <option value="soccer">ì¶•êµ¬</option>
        <option value="basketball">ë†êµ¬</option>
        <option value="baseball">ì•¼êµ¬</option>
        <option value="volleyball">ë°°êµ¬</option>
        <option value="esports">eìŠ¤í¬ì¸ </option>
        <option value="hockey">í•˜í‚¤</option>
      </select>

      <select id="level" class="select" onchange="onLevelChange()">
        <option value="simple">ê°„ë‹¨</option>
        <option value="mid">ì¤‘ê¸‰</option>
        <option value="adv">ê³ ê¸‰</option>
      </select>
    </div>

    <!-- âœ… íŒ€/ë¦¬ê·¸ ì…ë ¥(ì„ íƒ) -->
    <div class="row2">
      <div>
        <input id="league" class="textinput" placeholder="ë¦¬ê·¸/ëŒ€íšŒëª… (ì„ íƒ)">
        <div class="small-hint">â€» ì…ë ¥í•˜ì§€ ì•Šì•„ë„ ë¶„ì„ ê°€ëŠ¥ / ê³µìœ  ì‹œ ì…ë ¥í•œ ë‚´ìš©ë§Œ í¬í•¨ë©ë‹ˆë‹¤.</div>
      </div>
      <div>
        <input id="teams" class="textinput" placeholder="íŒ€ëª… (ì„ íƒ) ì˜ˆ: ë§¨ì‹œí‹° vs ë¦¬ë²„í’€">
        <div class="small-hint">â€» íŒ€/ë¦¬ê·¸ëŠ” ì„ íƒì‚¬í•­ì…ë‹ˆë‹¤.</div>
      </div>
    </div>

    <div class="small-hint" id="sportHint" style="margin-top:10px;"></div>

    <!-- ===== ë©”ì¸ ì‹œì¥ ===== -->
    <div class="box">
      <div class="box-title" id="mainMarketTitle">ë©”ì¸ ë°°ë‹¹</div>

      <!-- 2-way -->
      <div id="main2" style="display:none;">
        <div class="grid">
          <div class="field">
            <label id="main2LabelA">ì„ íƒ A ë°°ë‹¹</label>
            <input id="main2OddsA" inputmode="decimal" placeholder="ì˜ˆ: 1.85">
          </div>
          <div class="field">
            <label id="main2LabelB">ì„ íƒ B ë°°ë‹¹</label>
            <input id="main2OddsB" inputmode="decimal" placeholder="ì˜ˆ: 2.05">
          </div>
        </div>
      </div>

      <!-- 3-way -->
      <div id="main3" style="display:none;">
        <div class="grid">
          <div class="field">
            <label id="main3LabelH">í™ˆ ë°°ë‹¹</label>
            <input id="main3OddsH" inputmode="decimal" placeholder="ì˜ˆ: 2.10">
          </div>
          <div class="field">
            <label id="main3LabelD">ë¬´ ë°°ë‹¹</label>
            <input id="main3OddsD" inputmode="decimal" placeholder="ì˜ˆ: 3.20">
          </div>
          <div class="field">
            <label id="main3LabelA">ì›ì • ë°°ë‹¹</label>
            <input id="main3OddsA" inputmode="decimal" placeholder="ì˜ˆ: 3.40">
          </div>
          <div class="field">
            <label> </label>
            <input disabled value="â€» ì¶•êµ¬ëŠ” 3ë°°ë‹¹ì´ ê¸°ë³¸ì…ë‹ˆë‹¤">
          </div>
        </div>
      </div>

      <!-- ì¤‘ê¸‰/ê³ ê¸‰: ë‚´ í™•ë¥ /ë² íŒ…ê¸ˆ -->
      <div id="valueInputs" style="display:none;">
        <div class="grid">
          <div class="field">
            <label id="myProbLabel">ë‚´ ì˜ˆìƒ í™•ë¥ (ì„ íƒ) %</label>
            <input id="myProb" inputmode="decimal" placeholder="ì˜ˆ: 55  ë˜ëŠ”  45,28,27">
            <div class="small-hint" id="myProbHint"></div>
          </div>
          <div class="field">
            <label>ë² íŒ…ê¸ˆ(ì„ íƒ)</label>
            <input id="stake" inputmode="numeric" placeholder="ì˜ˆ: 100000">
            <div class="small-hint">â€» ì…ë ¥ ì‹œ ê¸°ëŒ€ê°’(EV)ì„ ì› ë‹¨ìœ„ë¡œë„ í‘œì‹œí•©ë‹ˆë‹¤.</div>
          </div>
        </div>
      </div>
    </div>

    <!-- ===== ì˜¤ë²„ì–¸ë” ===== -->
    <div class="box" id="totalBox" style="display:none;">
      <div class="box-head">
        <div class="box-title" style="margin:0;">ì˜¤ë²„/ì–¸ë” (ì„ íƒ)</div>
        <div class="toggle" onclick="toggleBox('totalBody')">ì ‘ê¸°/í¼ì¹˜ê¸°</div>
      </div>
      <div id="totalBody">
        <div class="grid">
          <div class="field">
            <label>ê¸°ì¤€ì  (ì˜ˆ: 2.5, 7.5, 2.25/2.75 ë“±)</label>
            <input id="totalLine" inputmode="decimal" placeholder="ì˜ˆ: 2.5 ë˜ëŠ” 2.25">
          </div>
          <div class="field">
            <label>ì˜¤ë²„ ë°°ë‹¹</label>
            <input id="overOdds" inputmode="decimal" placeholder="ì˜ˆ: 1.95">
          </div>
          <div class="field">
            <label>ì–¸ë” ë°°ë‹¹</label>
            <input id="underOdds" inputmode="decimal" placeholder="ì˜ˆ: 1.85">
          </div>
          <div class="field">
            <label>ì•„ì‹œì•ˆ OU ê·¼ì‚¬(ì„ íƒ) Â· í‘¸ì‹œ í™•ë¥  %</label>
            <input id="pushProb" inputmode="decimal" placeholder="ì˜ˆ: 6 (ë¯¸ì…ë ¥ ì‹œ ìë™ ê·¼ì‚¬)">
            <div class="small-hint">â€» 2.25/2.75 ë“±ì—ì„œ â€œí‘¸ì‹œ(í™˜ë¶ˆ)â€ì´ ë°œìƒí•˜ëŠ” êµ¬ì¡°ë¥¼ ê·¼ì‚¬í•©ë‹ˆë‹¤.</div>
          </div>
          <div class="field">
            <label>ë‚´ ì˜ˆìƒ í™•ë¥ (ì˜¤ë²„) % (ê³ ê¸‰)</label>
            <input id="myOverProb" inputmode="decimal" placeholder="ì˜ˆ: 52">
          </div>
        </div>
        <div class="small-hint">â€» ê³ ê¸‰ì—ì„œ ë‚´ ì˜ˆìƒ í™•ë¥ (ì˜¤ë²„)ì„ ë„£ìœ¼ë©´ ì˜¤ë²„ EV/ë¹„ì¤‘ ê³„ì‚°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</div>
      </div>
    </div>

    <!-- ===== í•¸ë””ìº¡ ===== -->
    <div class="box" id="handicapBox" style="display:none;">
      <div class="box-head">
        <div class="box-title" style="margin:0;">í•¸ë””ìº¡ (ì„ íƒ Â· ì–‘ìª½ ë°°ë‹¹ ì…ë ¥ ì‹œ ì •ë°€ ë§ˆì§„)</div>
        <div class="toggle" onclick="toggleBox('handicapBody')">ì ‘ê¸°/í¼ì¹˜ê¸°</div>
      </div>
      <div id="handicapBody">
        <div class="grid">
          <div class="field">
            <label>í•¸ë”” ë¼ì¸ (ì˜ˆ: -1.5, +3.5)</label>
            <input id="handicapLine" inputmode="decimal" placeholder="ì˜ˆ: -1.5">
          </div>
          <div class="field">
            <label>í•¸ë”” ì„ íƒ A ë°°ë‹¹ (ì˜ˆ: -1.5 ìª½)</label>
            <input id="handicapOddsA" inputmode="decimal" placeholder="ì˜ˆ: 1.90">
          </div>
          <div class="field">
            <label>í•¸ë”” ì„ íƒ B ë°°ë‹¹ (ë°˜ëŒ€í¸ ë°°ë‹¹)</label>
            <input id="handicapOddsB" inputmode="decimal" placeholder="ì˜ˆ: 1.90">
          </div>
          <div class="field">
            <label>ë‚´ ì˜ˆìƒ í™•ë¥ (ì„ íƒ A) % (ê³ ê¸‰)</label>
            <input id="myHandicapProb" inputmode="decimal" placeholder="ì˜ˆ: 51">
          </div>
        </div>
        <div class="small-hint">â€» ì–‘ìª½ ë°°ë‹¹ì´ ìˆìœ¼ë©´ í•¸ë”” ë§ˆì§„ì´ ì •í™•í•˜ê²Œ ê³„ì‚°ë©ë‹ˆë‹¤.</div>
      </div>
    </div>

    <!-- âœ… ë§ˆì§„ ëŒ€ì‹œë³´ë“œ(ë©”ì¸/OU/í•¸ë””) -->
    <div class="box">
      <div class="box-head">
        <div class="box-title" style="margin:0;">ë§ˆì§„ ëŒ€ì‹œë³´ë“œ (ë©”ì¸/OU/í•¸ë””)</div>
        <div class="toggle" onclick="toggleBox('marginDash')">ì ‘ê¸°/í¼ì¹˜ê¸°</div>
      </div>
      <div id="marginDash">
        <div class="m-grid">
          <div class="m-card">
            <div class="m-head">
              <div class="m-name">ë©”ì¸ ë§ˆì§„</div>
              <div class="m-pill" id="mMainPill">-</div>
            </div>
            <div class="m-big" id="mMainVal">-</div>
            <div class="m-sub" id="mMainSub">ë°°ë‹¹ ì…ë ¥ í›„ â€œê³„ì‚°í•˜ê¸°â€ë¥¼ ëˆ„ë¥´ë©´ í‘œì‹œë©ë‹ˆë‹¤.</div>
          </div>

          <div class="m-card">
            <div class="m-head">
              <div class="m-name">ì˜¤ë²„/ì–¸ë” ë§ˆì§„</div>
              <div class="m-pill" id="mOuPill">-</div>
            </div>
            <div class="m-big" id="mOuVal">-</div>
            <div class="m-sub" id="mOuSub">ì•„ì‹œì•ˆ ë¼ì¸(2.25/2.75 ë“±)ì€ í‘¸ì‹œ ê·¼ì‚¬ í¬í•¨.</div>
          </div>

          <div class="m-card">
            <div class="m-head">
              <div class="m-name">í•¸ë””ìº¡ ë§ˆì§„</div>
              <div class="m-pill" id="mHcPill">-</div>
            </div>
            <div class="m-big" id="mHcVal">-</div>
            <div class="m-sub" id="mHcSub">ì–‘ìª½ ë°°ë‹¹ì„ ì…ë ¥í•´ì•¼ ì •ë°€ ê³„ì‚°ë©ë‹ˆë‹¤.</div>
          </div>
        </div>

        <div class="small-hint" style="margin-top:10px;">
          âœ… ì¢…ëª©/ìœ í˜•ë³„ â€œë§ˆì§„ ë‚®ìŒâ€ íŒì • ê¸°ì¤€ì´ ë‹¤ë¦…ë‹ˆë‹¤. (ë©”ì¸/OU/í•¸ë”” ê°ê° ë¶„ë¦¬) <br>
          âœ… â€œë§ˆì§„ ë‚®ìŒâ€ì¼ìˆ˜ë¡ í†µìƒ ìœ ì €ì—ê²Œ ìœ ë¦¬í•œ êµ¬ì¡°ì…ë‹ˆë‹¤. (ì ˆëŒ€ ë³´ì¥ ì•„ë‹˜)
        </div>
      </div>
    </div>

    <div class="actions">
      <button class="btn primary" onclick="calc()">ê³„ì‚°í•˜ê¸°</button>
      <button class="btn secondary" onclick="resetAll()">ì´ˆê¸°í™”</button>
      <button class="btn gold" onclick="copyResult()">ê²°ê³¼ ë³µì‚¬</button>
      <button class="btn secondary" onclick="shareResult()">ê³µìœ </button>
    </div>

    <div class="note">
      â€» ë³¸ ë„êµ¬ëŠ” â€œíŒë‹¨ ë³´ì¡°ìš©â€ì…ë‹ˆë‹¤. ìŠ¹ë¥ ì„ ë³´ì¥í•˜ì§€ ì•Šìœ¼ë©°, ì†ì‹¤ì„ ê°ë‹¹ ê°€ëŠ¥í•œ ë²”ìœ„ ë‚´ì—ì„œ ì´ìš©í•˜ì„¸ìš”.
    </div>

    <div class="result" id="result" style="display:none;"></div>

    <div class="footer-links">
      <a class="linkbtn" href="/">í™ˆìœ¼ë¡œ</a>
      <a class="linkbtn" href="https://t.me/UZU59" target="_blank" rel="noopener">ë¬¸ì˜ (í…”ë ˆê·¸ë¨)</a>
    </div>
  </div>

  <!-- âœ… ìµœê·¼ ê³„ì‚° íˆìŠ¤í† ë¦¬ + ë¹„êµ -->
  <div class="card">
    <div class="hist-head">
      <div class="title" style="margin:0;">ìµœê·¼ ê³„ì‚° íˆìŠ¤í† ë¦¬</div>
      <div class="hist-actions">
        <div class="chip" onclick="clearHistory()">ì „ì²´ ì‚­ì œ</div>
        <div class="chip" onclick="toggleCompare()">ë¹„êµ(2ê°œ ë‚˜ë€íˆ)</div>
      </div>
    </div>
    <div class="small-hint">âœ… í•­ëª© í´ë¦­ â†’ ì…ë ¥ì¹¸ ìë™ ë³µì› + ì¦‰ì‹œ ì¬ê³„ì‚°</div>

    <div class="compare-wrap" id="compareWrap">
      <div class="small-hint" style="margin-bottom:10px;">
        ë¹„êµ ëª¨ë“œ: ì•„ë˜ íˆìŠ¤í† ë¦¬ì—ì„œ 2ê°œë¥¼ ì„ íƒí•˜ë©´ ë‚˜ë€íˆ í‘œì‹œë©ë‹ˆë‹¤.
      </div>
      <div class="compare-grid">
        <div class="compare-box">
          <div class="h">ë¹„êµ A</div>
          <div class="p" id="compareA">ì„ íƒí•˜ì„¸ìš”</div>
        </div>
        <div class="compare-box">
          <div class="h">ë¹„êµ B</div>
          <div class="p" id="compareB">ì„ íƒí•˜ì„¸ìš”</div>
        </div>
      </div>
      <div class="actions" style="margin-top:10px;">
        <button class="btn secondary" onclick="resetCompare()">ë¹„êµ ì´ˆê¸°í™”</button>
        <button class="btn gold" onclick="closeCompare()">ë¹„êµ ë‹«ê¸°</button>
      </div>
    </div>

    <div class="hist-list" id="historyList"></div>
  </div>

  <!-- âœ… â€œë§ˆì§„ ë‚®ì€ ê²½ê¸° ì˜ˆì‹œâ€ ì„¤ëª… ì¹´ë“œ -->
  <div class="card">
    <div class="title">â€œë§ˆì§„ ë‚®ì€ ê²½ê¸°â€ ì˜ˆì‹œ/ì„¤ëª…</div>
    <div class="small-hint">
      â€¢ ê°™ì€ ê²½ê¸°ë¼ë„ ë¶ë©”ì´ì»¤/ì‹œì¥(ë©”ì¸Â·OUÂ·í•¸ë””)ì— ë”°ë¼ ë§ˆì§„ì´ í¬ê²Œ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
      â€¢ â€œë§ˆì§„ ë‚®ìŒâ€ì€ <b>ë°°ë‹¹ êµ¬ì¡°(ìˆ˜ìˆ˜ë£Œ)ê°€ ìƒëŒ€ì ìœ¼ë¡œ ìœ ë¦¬</b>í•˜ë‹¤ëŠ” ëœ»ì´ì§€, ì ì¤‘ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>
      â€¢ í™•ë¥ (ë‚´ ì˜ˆìƒì¹˜)ì´ ì—†ë‹¤ë©´ EVëŠ” ê³„ì‚°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (ì¤‘ê¸‰/ê³ ê¸‰ì—ì„œ ì„ íƒ ì…ë ¥)
    </div>

    <div class="box">
      <div class="box-title">ì˜ˆì‹œ</div>
      <div class="small-hint">
        1) ë©”ì¸ 2wayì—ì„œ ì–‘ìª½ ë°°ë‹¹ì´ 1.95 / 1.95ë¼ë©´ ì˜¤ë²„ë¼ìš´ë“œëŠ” ì•½ 1.0256(ë§ˆì§„ 2.56%)ë¡œ ë‚®ì€ í¸.<br>
        2) OUì—ì„œ 1.85 / 1.85ëŠ” ì˜¤ë²„ë¼ìš´ë“œ ì•½ 1.081(ë§ˆì§„ 8.1%)ë¡œ ìƒëŒ€ì ìœ¼ë¡œ ë†’ì€ í¸.<br>
        3) ì•„ì‹œì•ˆ OU(2.25/2.75)ëŠ” â€œí‘¸ì‹œâ€ê°€ ì„ì—¬ êµ¬ì¡°ê°€ ë³µì¡í•´ì ¸ ê·¼ì‚¬ ê³„ì‚°ì´ í•„ìš”í•©ë‹ˆë‹¤.
      </div>
    </div>
  </div>

</div>

<script>
/* âœ… ë¡œë”© í™”ë©´ ë‹«ê¸°(ìµœëŒ€ 2.5ì´ˆ ì•ˆì „ì¥ì¹˜ í¬í•¨) */
function hideLoader(){
  const l = document.getElementById("loader");
  if(!l) return;
  l.classList.add("hide");
  setTimeout(()=> l.remove(), 450);
}
window.addEventListener("load", hideLoader);
setTimeout(hideLoader, 2500);

/* âœ… ì‚¬ì¹­ì£¼ì˜ íŒì—… (1ì¼ 1íšŒ) */
(function(){
  const key="scam_popup_date";
  const today=new Date().toISOString().slice(0,10);
  try{
    if(localStorage.getItem(key)!==today){
      document.getElementById("scamPopup").style.display="flex";
    }
  }catch(e){}
})();
function closeScam(){
  const today=new Date().toISOString().slice(0,10);
  try{ localStorage.setItem("scam_popup_date",today); }catch(e){}
  document.getElementById("scamPopup").style.display="none";
}

/* âœ… ìƒë‹¨ ê³µì§€ ë°°ë„ˆ ìë™ ìˆœí™˜ */
const NOTICE_LIST = [
  "ğŸ”” 88 ì»¤ë®¤ë‹ˆí‹° ê³µì‹ ì•ˆë‚´ Â· ê´€ë¦¬ì ì‚¬ì¹­ ì£¼ì˜ (@UZU59)",
  "ğŸ“Š ìŠ¤í¬ì¸  ë¶„ì„ê¸° + ë§ˆì§„/EV/íˆìŠ¤í† ë¦¬ í†µí•©",
  "â­ +EV ë°œìƒ ì‹œ ë©”ì¸ì—ì„œ ì¶”ì²œ í•„í„° ìë™ ON",
  "âš ï¸ ê³¼ëª°ì… ê¸ˆì§€ Â· ì†ì‹¤ ê°ë‹¹ ê°€ëŠ¥í•œ ë²”ìœ„ë¡œ ì´ìš©"
];
let noticeIndex = 0;
const noticeTextEl = document.getElementById("noticeText");
function rotateNotice(){
  noticeTextEl.innerText = NOTICE_LIST[noticeIndex];
  noticeIndex = (noticeIndex + 1) % NOTICE_LIST.length;
}
rotateNotice();
setInterval(rotateNotice, 4000);

/* =========================
   ë¶„ì„ê¸° ì§„ì… ê´‘ê³  íŒì—… (Aì•ˆ)
   - 1ì¼ 1íšŒ í‘œì‹œ
   - ë©”ì¸(index)ì—ì„œ ì €ì¥ëœ í´ë¦­ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì¸ê¸° ìˆœ ìš°ì„ 
========================= */
(function initAdPopup(){
  const KEY = "88_analysis_adpopup_date";
  const today = new Date().toISOString().slice(0,10);

  try{
    if(localStorage.getItem(KEY) === today) return;
  }catch(e){}

  // index.html í´ë¦­ ì§‘ê³„(ìˆìœ¼ë©´ í™œìš©)
  let clickMap = {};
  try{
    clickMap = JSON.parse(localStorage.getItem("88_card_clicks") || "{}") || {};
  }catch(e){ clickMap = {}; }

  // ë©”ì¸ í˜ì´ì§€ ìƒë‹¨ ìš°ì„  ì—…ì²´ + ê´‘ê³ ëª¨ì§‘ í¬í•¨
  const ads = [
    {key:"card1", title:"B WIN", sub:"ê³ ì•¡ì „ìš© Â· ì…ê¸ˆí”ŒëŸ¬ìŠ¤ ì§€ì›", href:"./#vendors", badge:"ì¶”ì²œ"},
    {key:"card2", title:"CAPS", sub:"ê³ ì•¡ì „ìš© Â· í˜ì´ë°±/ì¶œì„", href:"./#vendors", badge:"ì¶”ì²œ"},
    {key:"card3", title:"BETZY", sub:"ìŠ¤í¬ì¸ /ë¯¸ê²œ Â· í˜ì´ë°±", href:"./#vendors", badge:"ì¶”ì²œ"},
    {key:"card7", title:"ê´‘ê³  ëª¨ì§‘", sub:"ì—¬ê¸°ì— ê´‘ê³ ê°€ ë…¸ì¶œë©ë‹ˆë‹¤", href:"./#vendors", badge:"AD"},
    {key:"card8", title:"ê´‘ê³  ëª¨ì§‘", sub:"ë¬¸ì˜ í›„ ë“±ë¡ ê°€ëŠ¥", href:"./#vendors", badge:"AD"}
  ];

  const ranked = [...ads].sort((a,b)=>{
    const ca = Number(clickMap[a.key] || 0);
    const cb = Number(clickMap[b.key] || 0);
    return cb - ca;
  });

  const picks = ranked.slice(0,2);
  const grid = document.getElementById("adGrid");
  const pop = document.getElementById("adPopup");
  if(!grid || !pop) return;

  grid.innerHTML = picks.map(x=>`
    <div class="ad-item" onclick="goAd('${x.href}')">
      <div class="name">${x.title}</div>
      <div class="sub">${x.sub}</div>
      <div class="badge">${x.badge}</div>
    </div>
  `).join("");

  pop.style.display = "flex";
})();

function goAd(href){
  location.href = href;
}
function closeAdPopup(disableToday){
  const pop = document.getElementById("adPopup");
  if(pop) pop.style.display = "none";
  if(disableToday){
    try{
      const today = new Date().toISOString().slice(0,10);
      localStorage.setItem("88_analysis_adpopup_date", today);
    }catch(e){}
  }
}

/* âœ… ë°°íŒ… ì²´í¬ë¦¬ìŠ¤íŠ¸ (ëœë¤ 3ì¤„) */
const CHECKLIST_POOL = [
  "ë¼ì¸ ê¸‰ë³€ ê²½ê¸°(ê°‘ìê¸° ë‚´ë ¤ê°„ ë°°ë‹¹)ëŠ” ì´ìœ ë¶€í„° í™•ì¸í•˜ê¸°",
  "ë§ˆì§„(ìˆ˜ìˆ˜ë£Œ) ë†’ì€ ê²½ê¸°ë©´ í•œ ë‹¨ê³„ ë³´ìˆ˜ì ìœ¼ë¡œ ì ‘ê·¼í•˜ê¸°",
  "1íšŒ ë°°íŒ…ê¸ˆì€ ìë³¸ì˜ 1~3% ë²”ìœ„ë¡œ ì œí•œí•˜ê¸°",
  "ì„ ë°œ/ê²°ì¥/ë¡œí…Œ ë‰´ìŠ¤ ì²´í¬ í›„ ë°°ë‹¹ ë³€ë™ ì¬í™•ì¸í•˜ê¸°",
  "ì—°íŒ¨/ì—°ìŠ¹ íŒ€ì€ 'ì‹œì¥ ê³¼ì—´' êµ¬ê°„ì¸ì§€ ë¨¼ì € ë³´ê¸°",
  "ë³€ë™ì„± í° ë¦¬ê·¸ëŠ” ë‹¨í´/ì†Œì•¡ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ê¸°",
  "ì—°ì† ì¶”ê²© ë°°íŒ…(ë¬¼íƒ€ê¸°) ê¸ˆì§€ â€” ê³„íšëœ ê¸ˆì•¡ë§Œ ì‚¬ìš©í•˜ê¸°",
  "í™•ë¥ ì´ ì—†ë‹¤ë©´ EVë„ ì—†ë‹¤: ê°(ì´‰) ëŒ€ì‹  ê·¼ê±° ë§Œë“¤ê¸°"
];
function refreshChecklist(){
  const pool = [...CHECKLIST_POOL].sort(()=>Math.random()-0.5);
  const pick = pool.slice(0,3);
  document.getElementById("checklistText").innerHTML = "â€¢ " + pick.join("<br>â€¢ ");
}
refreshChecklist();

/* =========================
   ìƒíƒœ/ì €ì¥
========================= */
const LS_KEY = "88_analysis_multi_v3";
const HIST_KEY = "88_analysis_history_v3";
let LAST_TEXT = "";

const SPORT_CFG = {
  soccer: {
    name: "ì¶•êµ¬",
    main: "3way",
    labels: {H:"í™ˆ", D:"ë¬´", A:"ì›ì •"},
    hint: "ì¶•êµ¬ëŠ” ê¸°ë³¸ 3ë°°ë‹¹(í™ˆ/ë¬´/ì›ì •). ì¤‘ê¸‰/ê³ ê¸‰ì—ì„œ ì˜¤ë²„ì–¸ë”ë¥¼ ê°™ì´ ë³´ëŠ” ê±¸ ì¶”ì²œí•©ë‹ˆë‹¤.",
    template: { openHandicap:false, openTotal:true }
  },
  basketball: {
    name:"ë†êµ¬",
    main:"2way",
    labels:{A:"ìŠ¹", B:"íŒ¨"},
    hint:"ë†êµ¬ëŠ” 2ë°°ë‹¹(ìŠ¹/íŒ¨) ì¤‘ì‹¬. ì¤‘ê¸‰/ê³ ê¸‰ì—ì„œëŠ” í•¸ë””+ì˜¤ë²„ì–¸ë”ë¥¼ í•¨ê»˜ ì¶”ì²œ.",
    template: { openHandicap:true, openTotal:true }
  },
  baseball: {
    name:"ì•¼êµ¬",
    main:"2way",
    labels:{A:"ìŠ¹", B:"íŒ¨"},
    hint:"ì•¼êµ¬ëŠ” ìŠ¹/íŒ¨(2ë°°ë‹¹) + ì˜¤ë²„ì–¸ë”/í•¸ë””(ëŸ°ë¼ì¸)ë¥¼ í•¨ê»˜ ë³´ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.",
    template: { openHandicap:true, openTotal:true }
  },
  volleyball: {
    name:"ë°°êµ¬",
    main:"2way",
    labels:{A:"ìŠ¹", B:"íŒ¨"},
    hint:"ë°°êµ¬ëŠ” 2ë°°ë‹¹(ìŠ¹/íŒ¨) ì¤‘ì‹¬. ì¤‘ê¸‰/ê³ ê¸‰ì—ì„œ í•¸ë””/OUë¥¼ í•¨ê»˜ í™•ì¸í•˜ì„¸ìš”.",
    template: { openHandicap:true, openTotal:true }
  },
  esports: {
    name:"eìŠ¤í¬ì¸ ",
    main:"2way",
    labels:{A:"ìŠ¹", B:"íŒ¨"},
    hint:"eìŠ¤í¬ì¸ ëŠ” ë§¤ì¹˜ ìŠ¹/íŒ¨(2ë°°ë‹¹) ì¤‘ì‹¬. ê³ ê¸‰ì—ì„œ EV/ë¹„ì¤‘ ê³„ì‚°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.",
    template: { openHandicap:false, openTotal:false }
  },
  hockey: {
    name:"í•˜í‚¤",
    main:"2way",
    labels:{A:"ìŠ¹", B:"íŒ¨"},
    hint:"í•˜í‚¤ëŠ” 2ë°°ë‹¹(ìŠ¹/íŒ¨) ê¸°ë³¸. ì¤‘ê¸‰/ê³ ê¸‰ì—ì„œ ì˜¤ë²„ì–¸ë”ê°€ ë„ì›€ì´ ë©ë‹ˆë‹¤.",
    template: { openHandicap:false, openTotal:true }
  }
};

/* ì¢…ëª©/ìœ í˜•ë³„ â€œë§ˆì§„ ë‚®ìŒâ€ ê¸°ì¤€(%) */
const MARGIN_RULES = {
  soccer:    { mainLow:5.5,  ouLow:6.5,  hcLow:6.5 },
  basketball:{ mainLow:4.5,  ouLow:5.5,  hcLow:5.5 },
  baseball:  { mainLow:4.5,  ouLow:5.5,  hcLow:6.0 },
  volleyball:{ mainLow:4.5,  ouLow:5.5,  hcLow:5.5 },
  esports:   { mainLow:6.5,  ouLow:7.5,  hcLow:7.5 },
  hockey:    { mainLow:5.5,  ouLow:6.5,  hcLow:6.5 }
};

function $(id){ return document.getElementById(id); }
function val(id){ const el=$(id); return el?el.value:""; }
function setVal(id,v){ const el=$(id); if(el && v!=null) el.value=v; }

function saveState(){
  const state = {
    sport: val("sport"),
    level: val("level"),
    league: val("league"),
    teams: val("teams"),
    main2OddsA: val("main2OddsA"),
    main2OddsB: val("main2OddsB"),
    main3OddsH: val("main3OddsH"),
    main3OddsD: val("main3OddsD"),
    main3OddsA: val("main3OddsA"),
    myProb: val("myProb"),
    stake: val("stake"),
    handicapLine: val("handicapLine"),
    handicapOddsA: val("handicapOddsA"),
    handicapOddsB: val("handicapOddsB"),
    myHandicapProb: val("myHandicapProb"),
    totalLine: val("totalLine"),
    overOdds: val("overOdds"),
    underOdds: val("underOdds"),
    myOverProb: val("myOverProb"),
    pushProb: val("pushProb"),
    handicapCollapsed: isCollapsed("handicapBody"),
    totalCollapsed: isCollapsed("totalBody"),
    marginCollapsed: isCollapsed("marginDash")
  };
  try{ localStorage.setItem(LS_KEY, JSON.stringify(state)); }catch(e){}
}
function loadState(){
  try{
    const raw = localStorage.getItem(LS_KEY);
    if(!raw) return;
    const s = JSON.parse(raw);

    if(s.sport) setVal("sport", s.sport);
    if(s.level) setVal("level", s.level);

    onSportChange(true);
    onLevelChange(true);

    setVal("league", s.league);
    setVal("teams", s.teams);
    setVal("main2OddsA", s.main2OddsA);
    setVal("main2OddsB", s.main2OddsB);
    setVal("main3OddsH", s.main3OddsH);
    setVal("main3OddsD", s.main3OddsD);
    setVal("main3OddsA", s.main3OddsA);
    setVal("myProb", s.myProb);
    setVal("stake", s.stake);
    setVal("handicapLine", s.handicapLine);
    setVal("handicapOddsA", s.handicapOddsA);
    setVal("handicapOddsB", s.handicapOddsB);
    setVal("myHandicapProb", s.myHandicapProb);
    setVal("totalLine", s.totalLine);
    setVal("overOdds", s.overOdds);
    setVal("underOdds", s.underOdds);
    setVal("myOverProb", s.myOverProb);
    setVal("pushProb", s.pushProb);

    if(typeof s.handicapCollapsed === "boolean") setCollapsed("handicapBody", s.handicapCollapsed);
    if(typeof s.totalCollapsed === "boolean") setCollapsed("totalBody", s.totalCollapsed);
    if(typeof s.marginCollapsed === "boolean") setCollapsed("marginDash", s.marginCollapsed);
  }catch(e){}
}

/* ì…ë ¥ ì´ë²¤íŠ¸ ìë™ ì €ì¥ */
[
  "sport","level","league","teams",
  "main2OddsA","main2OddsB","main3OddsH","main3OddsD","main3OddsA",
  "myProb","stake",
  "handicapLine","handicapOddsA","handicapOddsB","myHandicapProb",
  "totalLine","overOdds","underOdds","myOverProb","pushProb"
].forEach(id=>{
  const el=$(id);
  if(el) el.addEventListener("input", saveState);
});

/* =========================
   UI: í…œí”Œë¦¿ + ë‚œì´ë„
========================= */
function onSportChange(silent){
  const sport = val("sport");
  const cfg = SPORT_CFG[sport] || SPORT_CFG.soccer;

  $("sportHint").innerText = `ì„ íƒ ì¢…ëª©: ${cfg.name} Â· ${cfg.hint}`;

  const is3 = cfg.main === "3way";
  $("main2").style.display = is3 ? "none" : "block";
  $("main3").style.display = is3 ? "block" : "none";
  $("mainMarketTitle").innerText = is3 ? "ë©”ì¸ ë°°ë‹¹ (í™ˆ/ë¬´/ì›ì •)" : "ë©”ì¸ ë°°ë‹¹ (ìŠ¹/íŒ¨)";

  if(!is3){
    $("main2LabelA").innerText = `${cfg.labels.A} ë°°ë‹¹`;
    $("main2LabelB").innerText = `${cfg.labels.B} ë°°ë‹¹`;
  }else{
    $("main3LabelH").innerText = `${cfg.labels.H} ë°°ë‹¹`;
    $("main3LabelD").innerText = `${cfg.labels.D} ë°°ë‹¹`;
    $("main3LabelA").innerText = `${cfg.labels.A} ë°°ë‹¹`;
  }

  applyTemplate();
  updateMyProbHints(cfg, val("level"));

  if(!silent) hideResult();
  saveState();
}

function onLevelChange(silent){
  const level = val("level");
  $("valueInputs").style.display = (level === "simple") ? "none" : "block";
  $("handicapBox").style.display = (level === "simple") ? "none" : "block";
  $("totalBox").style.display = (level === "simple") ? "none" : "block";

  const cfg = SPORT_CFG[val("sport")] || SPORT_CFG.soccer;
  updateMyProbHints(cfg, level);
  applyTemplate();

  if(!silent) hideResult();
  saveState();
}

function updateMyProbHints(cfg, level){
  const is3 = cfg.main === "3way";
  if(level === "simple"){
    $("myProbLabel").innerText = "ë‚´ ì˜ˆìƒ í™•ë¥ (ì„ íƒ) %";
    $("myProbHint").innerText = "";
    return;
  }
  if(is3){
    $("myProbLabel").innerText = `ë‚´ ì˜ˆìƒ í™•ë¥ (${cfg.labels.H}/${cfg.labels.D}/${cfg.labels.A}) % (ì„ íƒ)`;
    $("myProbHint").innerText = `ì‰¼í‘œë¡œ 3ê°œ ì…ë ¥ (ì˜ˆ: 45,28,27) Â· í•© 100 ê¶Œì¥`;
  }else{
    $("myProbLabel").innerText = `ë‚´ ì˜ˆìƒ í™•ë¥ (${cfg.labels.A}) % (ì„ íƒ)`;
    $("myProbHint").innerText = `ì˜ˆ: 55 (ë‹¨ì¼ ê°’) Â· EV/ê¶Œì¥ë¹„ì¤‘ ê³„ì‚°ìš©`;
  }
}

/* í…œí”Œë¦¿: ì¢…ëª©ë³„ OU/í•¸ë”” ê¸°ë³¸ í¼ì¹¨ */
function applyTemplate(){
  const level = val("level");
  const cfg = SPORT_CFG[val("sport")] || SPORT_CFG.soccer;
  if(level === "simple") return;
  setCollapsed("handicapBody", !cfg.template.openHandicap);
  setCollapsed("totalBody", !cfg.template.openTotal);
}

/* ì ‘ê¸°/í¼ì¹˜ê¸° */
function toggleBox(id){
  const now = isCollapsed(id);
  setCollapsed(id, !now);
  saveState();
}
function isCollapsed(id){
  const el = $(id);
  return el ? el.style.display === "none" : false;
}
function setCollapsed(id, collapsed){
  const el = $(id);
  if(!el) return;
  el.style.display = collapsed ? "none" : "block";
}

/* =========================
   ê³„ì‚° ë¡œì§
========================= */
function parseOdds(v){
  if(!v) return null;
  const x = Number(String(v).replace(/,/g,".").trim());
  if(!isFinite(x) || x<=1) return null;
  return x;
}
function parsePct(v){
  if(v==null || v==="") return null;
  const x = Number(String(v).replace(/,/g,".").trim());
  if(!isFinite(x) || x<0 || x>100) return null;
  return x/100;
}
function parsePctList(str){
  if(!str) return null;
  const parts = str.split(",").map(s=>s.trim()).filter(Boolean);
  if(parts.length !== 3) return null;
  const p1=parsePct(parts[0]), p2=parsePct(parts[1]), p3=parsePct(parts[2]);
  if(p1==null || p2==null || p3==null) return null;
  return [p1,p2,p3];
}
function parseMoney(v){
  if(!v) return null;
  const x = Number(String(v).replace(/[^\d]/g,""));
  if(!isFinite(x) || x<=0) return null;
  return x;
}
function pct(x){ return (x*100).toFixed(1) + "%"; }
function money(x){
  const n = Math.round(x);
  return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + "ì›";
}
function expectedValue(stake, p, odds){
  return stake * (p*(odds-1) - (1-p));
}
function quarterKelly(p, odds){
  const b = odds - 1;
  const f = (p*odds - 1) / b;
  const q = f/4;
  return Math.max(0, Math.min(0.25, q));
}
function levelLabel(level){
  return level==="simple" ? "ê°„ë‹¨" : (level==="mid" ? "ì¤‘ê¸‰" : "ê³ ê¸‰");
}

/* ë§ˆì§„ ê´€ë ¨ */
function overroundToMarginPct(over){ return Math.max(0, (over - 1) * 100); }
function getMarginRules(){
  return MARGIN_RULES[val("sport")] || MARGIN_RULES.soccer;
}
function marginPillClass(mPct, low){
  if(!isFinite(mPct)) return "";
  if(mPct <= low) return "m-good";
  if(mPct <= low + 3) return "m-ok";
  return "m-bad";
}
function marginTagText(mPct, low){
  if(!isFinite(mPct)) return "ì…ë ¥ í•„ìš”";
  if(mPct <= low) return `ë§ˆì§„ ë‚®ìŒ (${mPct.toFixed(2)}%)`;
  if(mPct <= low + 3) return `ë³´í†µ (${mPct.toFixed(2)}%)`;
  return `ê³ ë§ˆì§„ (${mPct.toFixed(2)}%)`;
}

/* OU ì•„ì‹œì•ˆ(2.25/2.75 ë“±) ê·¼ì‚¬: í‘¸ì‹œ í™•ë¥ ì„ ë°˜ì˜í•œ â€œìœ íš¨ ì˜¤ë²„ë¼ìš´ë“œâ€ ê·¼ì‚¬ */
function isQuarterLine(x){
  const frac = Math.abs(x - Math.round(x));
  return Math.abs(frac - 0.25) < 1e-9 || Math.abs(frac - 0.75) < 1e-9;
}
function clamp(x,a,b){ return Math.max(a, Math.min(b, x)); }
function approxPushProb(line, sportKey){
  // ì•„ì£¼ ë‹¨ìˆœ ê·¼ì‚¬: ë¼ì¸ ë¶„ìˆ˜(0.25/0.75) + ì¢…ëª©ë³„ í‰ê·  í‘¸ì‹œ(ëŒ€ëµ)
  // ì‹¤ì œëŠ” ë¶„í¬ ê¸°ë°˜ì´ì§€ë§Œ â€œëŒ€ì‹œë³´ë“œìš©â€ ê·¼ì‚¬ì¹˜ë¡œë§Œ ì‚¬ìš©
  const base = (sportKey==="soccer") ? 0.06 :
               (sportKey==="baseball") ? 0.04 :
               (sportKey==="basketball") ? 0.02 :
               (sportKey==="hockey") ? 0.04 :
               (sportKey==="esports") ? 0.01 :
               0.03;
  return base;
}
function asianOuEffectiveOverround(overOdds, underOdds, pushP){
  // ì˜¤ë²„/ì–¸ë” ê°ê° (1/odds)ì„ â€œí‘¸ì‹œê°€ ìˆëŠ” ê²½ìš° ìœ íš¨ ë…¸ì¶œëŸ‰â€ìœ¼ë¡œ ê°€ì¤‘í•˜ëŠ” ì•„ì£¼ ê°„ë‹¨í•œ ê·¼ì‚¬.
  // pushP(0~1)ê°€ ì»¤ì§ˆìˆ˜ë¡ ì‹¤ì œ ë¦¬ìŠ¤í¬ê°€ ì¤„ì–´ë“œëŠ” íš¨ê³¼ â†’ ìœ íš¨ ì˜¤ë²„ë¼ìš´ë“œê°€ ì¡°ê¸ˆ ë‚®ì•„ì§€ëŠ” ë°©í–¥
  const io = 1/overOdds;
  const iu = 1/underOdds;
  const factor = (1 - 0.5*pushP); // í‘¸ì‹œê°€ ëŠ˜ìˆ˜ë¡ 50% ë°˜ì˜
  return (io + iu) * factor;
}

/* ===== íˆìŠ¤í† ë¦¬ ===== */
function loadHistory(){
  try{
    return JSON.parse(localStorage.getItem(HIST_KEY) || "[]") || [];
  }catch(e){ return []; }
}
function saveHistory(arr){
  try{ localStorage.setItem(HIST_KEY, JSON.stringify(arr)); }catch(e){}
}
function todayISO(){
  return new Date().toISOString().slice(0,10);
}
function addHistory(item){
  const arr = loadHistory();
  arr.unshift(item);
  // 30ê°œ ì œí•œ
  arr.splice(30);
  saveHistory(arr);
}
function clearHistory(){
  if(!confirm("íˆìŠ¤í† ë¦¬ë¥¼ ì „ë¶€ ì‚­ì œí• ê¹Œìš”?")) return;
  saveHistory([]);
  renderHistory();
  renderTop3All();
  toast("íˆìŠ¤í† ë¦¬ë¥¼ ì‚­ì œí–ˆìŠµë‹ˆë‹¤.");
}

/* íˆìŠ¤í† ë¦¬ í´ë¦­ â†’ ì…ë ¥ ë³µì› + ì¦‰ì‹œ ì¬ê³„ì‚° */
function restoreInputs(payload){
  setVal("sport", payload.sport || "soccer");
  setVal("level", payload.level || "simple");
  onSportChange(true);
  onLevelChange(true);

  setVal("league", payload.league || "");
  setVal("teams", payload.teams || "");
  setVal("main2OddsA", payload.main2OddsA || "");
  setVal("main2OddsB", payload.main2OddsB || "");
  setVal("main3OddsH", payload.main3OddsH || "");
  setVal("main3OddsD", payload.main3OddsD || "");
  setVal("main3OddsA", payload.main3OddsA || "");
  setVal("myProb", payload.myProb || "");
  setVal("stake", payload.stake || "");
  setVal("totalLine", payload.totalLine || "");
  setVal("overOdds", payload.overOdds || "");
  setVal("underOdds", payload.underOdds || "");
  setVal("myOverProb", payload.myOverProb || "");
  setVal("pushProb", payload.pushProb || "");
  setVal("handicapLine", payload.handicapLine || "");
  setVal("handicapOddsA", payload.handicapOddsA || "");
  setVal("handicapOddsB", payload.handicapOddsB || "");
  setVal("myHandicapProb", payload.myHandicapProb || "");

  saveState();
}
function restoreAndCalc(payload){
  restoreInputs(payload);
  calc(true); // silent history add ë°©ì§€
  // ì„¤ì • ì¹´ë“œë¡œ ìŠ¤í¬ë¡¤(ëª¨ë°”ì¼ UX)
  document.getElementById("settingsCard").scrollIntoView({behavior:"smooth", block:"start"});
}

/* ë¹„êµ ëª¨ë“œ */
let compareOn = false;
let comparePick = [];
function toggleCompare(){
  compareOn = !compareOn;
  $("compareWrap").style.display = compareOn ? "block" : "none";
  toast(compareOn ? "ë¹„êµ ëª¨ë“œ ON (2ê°œ ì„ íƒ)" : "ë¹„êµ ëª¨ë“œ OFF");
  if(!compareOn) resetCompare();
}
function closeCompare(){
  compareOn = false;
  $("compareWrap").style.display = "none";
  resetCompare();
}
function resetCompare(){
  comparePick = [];
  $("compareA").innerText = "ì„ íƒí•˜ì„¸ìš”";
  $("compareB").innerText = "ì„ íƒí•˜ì„¸ìš”";
}
function applyCompare(item){
  if(!compareOn) return;
  const text = item.summaryText || "(ìš”ì•½ ì—†ìŒ)";
  if(comparePick.length === 0){
    comparePick = [item];
    $("compareA").innerText = text;
    toast("ë¹„êµ A ì„ íƒ");
  }else if(comparePick.length === 1){
    if(comparePick[0].id === item.id){
      toast("ê°™ì€ í•­ëª©ì€ ì¤‘ë³µ ì„ íƒ ë¶ˆê°€");
      return;
    }
    comparePick.push(item);
    $("compareB").innerText = text;
    toast("ë¹„êµ B ì„ íƒ");
  }else{
    comparePick = [item];
    $("compareA").innerText = text;
    $("compareB").innerText = "ì„ íƒí•˜ì„¸ìš”";
    toast("ë¹„êµ Aë¡œ êµì²´");
  }
}

/* íˆìŠ¤í† ë¦¬ ë Œë” */
function renderHistory(){
  const list = $("historyList");
  const arr = loadHistory();

  if(!arr.length){
    list.innerHTML = `<div class="small-hint">ì•„ì§ ê³„ì‚° íˆìŠ¤í† ë¦¬ê°€ ì—†ìŠµë‹ˆë‹¤. ìœ„ì—ì„œ ë°°ë‹¹ì„ ì…ë ¥í•˜ê³  ê³„ì‚°í•´ ë³´ì„¸ìš”.</div>`;
    return;
  }

  list.innerHTML = arr.map(item=>{
    const tagMain = item.main && item.main.tagClass ? `<div class="tag ${item.main.tagClass}">ë©”ì¸ ${item.main.tag}</div>` : "";
    const tagOU   = item.ou   && item.ou.tagClass   ? `<div class="tag ${item.ou.tagClass}">OU ${item.ou.tag}</div>` : "";
    const tagHC   = item.hc   && item.hc.tagClass   ? `<div class="tag ${item.hc.tagClass}">í•¸ë”” ${item.hc.tag}</div>` : "";

    return `
      <div class="hist-item" onclick="onHistoryClick('${item.id}')">
        <div class="hist-top">
          <div>
            <div class="hist-title">${item.title}</div>
            <div class="hist-meta">${item.timeText}</div>
          </div>
          <div class="chip" onclick="event.stopPropagation(); restoreAndCalc(${encodeURIComponent(JSON.stringify(item.payload))} && JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(item.payload))}')));">ë³µì›</div>
        </div>

        <div class="hist-tags">
          ${tagMain}${tagOU}${tagHC}
        </div>

        <div class="small-hint" style="margin-top:8px;">${item.summaryText}</div>

        <div class="hist-actions" style="margin-top:10px;">
          <div class="chip" onclick="event.stopPropagation(); restoreAndCalc(JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(item.payload))}')));">ë³µì›+ì¬ê³„ì‚°</div>
          <div class="chip" onclick="event.stopPropagation(); applyCompare(${encodeURIComponent(JSON.stringify(item))} && JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(item))}')));">ë¹„êµ ì„ íƒ</div>
        </div>
      </div>
    `;
  }).join("");
}
function onHistoryClick(id){
  const arr = loadHistory();
  const item = arr.find(x=>x.id===id);
  if(!item) return;
  restoreAndCalc(item.payload);
}

/* ì˜¤ëŠ˜ TOP3 */
function renderTop3All(){
  const arr = loadHistory().filter(x=>x.date === todayISO());
  renderTop3("top3Main", arr, "main");
  renderTop3("top3OU",   arr, "ou");
  renderTop3("top3Handi",arr, "hc");
}
function renderTop3(targetId, arr, key){
  const box = $(targetId);
  const filtered = arr
    .filter(x=>x[key] && x[key].marginPct!=null)
    .sort((a,b)=>a[key].marginPct - b[key].marginPct)
    .slice(0,3);

  if(!filtered.length){
    box.innerHTML = `<div class="small-hint">ì˜¤ëŠ˜ ì €ì¥ëœ ${key.toUpperCase()} í•­ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</div>`;
    return;
  }

  box.innerHTML = filtered.map(item=>{
    const tag = item[key];
    return `
      <div class="hist-item" onclick="restoreAndCalc(JSON.parse(decodeURIComponent('${encodeURIComponent(JSON.stringify(item.payload))}')))">
        <div class="hist-top">
          <div>
            <div class="hist-title">${item.title}</div>
            <div class="hist-meta">${item.timeText}</div>
          </div>
          <div class="tag ${tag.tagClass}">${tag.tag}</div>
        </div>
        <div class="small-hint" style="margin-top:8px;">${item.summaryText}</div>
      </div>
    `;
  }).join("");
}

/* =========================
   +EV í”Œë˜ê·¸ ì €ì¥ (index.html ìë™ ì¶”ì²œ í•„í„°ìš©)
========================= */
function setEVFlag(isPositive){
  try{
    const today = new Date().toISOString().slice(0,10);
    if(isPositive){
      localStorage.setItem("88_ev_positive","1");
      localStorage.setItem("88_ev_date", today);
    }else{
      localStorage.removeItem("88_ev_positive");
      localStorage.removeItem("88_ev_date");
    }
  }catch(e){}
}

/* =========================
   í•µì‹¬ ê³„ì‚° (ë¶„ì„ê¸° + ë§ˆì§„ ê³„ì‚°ê¸° ì™„ì „ í†µí•©)
========================= */
function calc(silentHistory){
  const sport = val("sport");
  const level = val("level");
  const cfg = SPORT_CFG[sport] || SPORT_CFG.soccer;
  const rules = getMarginRules();
  const is3 = cfg.main === "3way";

  const rows = [];
  const copyLines = [];
  let anyEvPos = false;

  copyLines.push(`[88 ì»¤ë®¤ë‹ˆí‹°] ${cfg.name} ë¶„ì„ (${levelLabel(level)})`);

  const league = val("league").trim();
  const teams  = val("teams").trim();
  if(league) copyLines.push(`ë¦¬ê·¸: ${league}`);
  if(teams)  copyLines.push(`ê²½ê¸°: ${teams}`);

  /* ===== ë©”ì¸ ë§ˆì§„/í™•ë¥  ===== */
  let mainOver = null;
  let mainMarginPct = null;
  let mainTag = null;

  if(!is3){
    const a = parseOdds(val("main2OddsA"));
    const b = parseOdds(val("main2OddsB"));
    if(a==null || b==null){
      updateMarginDash(null,null,null);
      return showError("ë©”ì¸ ë°°ë‹¹ì„ 1.01 ì´ìƒ ìˆ«ìë¡œ ì…ë ¥í•´ì¤˜.");
    }

    const ia=1/a, ib=1/b;
    mainOver = ia+ib;
    mainMarginPct = overroundToMarginPct(mainOver);

    const pa=ia/mainOver, pb=ib/mainOver;

    rows.push([`ìŠ¹ë¦¬ í™•ë¥ (ë°°ë‹¹ ê¸°ë°˜Â·ì¶”ì •)(${cfg.labels.A})`, pct(pa)]);
    rows.push([`ìŠ¹ë¦¬ í™•ë¥ (ë°°ë‹¹ ê¸°ë°˜Â·ì¶”ì •)(${cfg.labels.B})`, pct(pb)]);
    rows.push(["ì˜¤ë²„ë¼ìš´ë“œ(ë©”ì¸)", mainOver.toFixed(4)]);
    rows.push(["ë©”ì¸ ë§ˆì§„ íŒì •", `<span class="${marginPillClass(mainMarginPct, rules.mainLow).replace('m-','m-')}">${marginTagText(mainMarginPct, rules.mainLow)}</span>`]);

    copyLines.push(`ë©”ì¸ ë°°ë‹¹(${cfg.labels.A}/${cfg.labels.B}): ${a} / ${b}`);

    if(level !== "simple"){
      const myP = parsePct(val("myProb"));
      const stake = parseMoney(val("stake"));

      if(myP!=null){
        const evPer1 = (myP*(a-1) - (1-myP));
        if(evPer1>0) anyEvPos = true;

        rows.push([`ë‚´ ì˜ˆìƒ í™•ë¥ (${cfg.labels.A})`, pct(myP)]);
        rows.push(["EV(1ì›ë‹¹)", (evPer1*100).toFixed(2) + "%"]);
        copyLines.push(`ë‚´ ì˜ˆìƒ í™•ë¥ (${cfg.labels.A}): ${(myP*100).toFixed(1)}%`);

        if(stake!=null){
          rows.push(["ê¸°ëŒ€ê°’(EV)", money(expectedValue(stake, myP, a))]);
          copyLines.push(`ë² íŒ…ê¸ˆ: ${money(stake)}`);
        }
        if(level === "adv"){
          const k = quarterKelly(myP, a);
          rows.push(["ê¶Œì¥ ë¹„ì¤‘(ë³´ìˆ˜ì  1/4 Kelly)", (k*100).toFixed(1) + "%"]);
          rows.push(["íŒë‹¨", evPer1>0 ? "ë°¸ë¥˜(+EV) ê°€ëŠ¥ì„±" : "ë°¸ë¥˜(-EV) ê°€ëŠ¥ì„±"]);
        }else{
          rows.push(["íŒë‹¨", evPer1>0 ? "ë°¸ë¥˜(+EV) ê°€ëŠ¥ì„±" : "ë°¸ë¥˜(-EV) ê°€ëŠ¥ì„±"]);
        }
      }else{
        rows.push(["Tip", "ì¤‘ê¸‰/ê³ ê¸‰ì—ì„œëŠ” 'ë‚´ ì˜ˆìƒ í™•ë¥ 'ì„ ì…ë ¥í•˜ë©´ EVê°€ ê³„ì‚°ë©ë‹ˆë‹¤. (ì„ íƒì‚¬í•­)"]);
      }
    }
  }else{
    const h = parseOdds(val("main3OddsH"));
    const d = parseOdds(val("main3OddsD"));
    const a = parseOdds(val("main3OddsA"));
    if(h==null || d==null || a==null){
      updateMarginDash(null,null,null);
      return showError("ë©”ì¸ ë°°ë‹¹(í™ˆ/ë¬´/ì›ì •)ì„ 1.01 ì´ìƒ ìˆ«ìë¡œ ì…ë ¥í•´ì¤˜.");
    }

    const ih=1/h, id=1/d, ia=1/a;
    mainOver = ih+id+ia;
    mainMarginPct = overroundToMarginPct(mainOver);

    const ph=ih/mainOver, pd=id/mainOver, pa=ia/mainOver;

    rows.push([`ìŠ¹ë¦¬ í™•ë¥ (ë°°ë‹¹ ê¸°ë°˜Â·ì¶”ì •)(${cfg.labels.H})`, pct(ph)]);
    rows.push([`ìŠ¹ë¦¬ í™•ë¥ (ë°°ë‹¹ ê¸°ë°˜Â·ì¶”ì •)(${cfg.labels.D})`, pct(pd)]);
    rows.push([`ìŠ¹ë¦¬ í™•ë¥ (ë°°ë‹¹ ê¸°ë°˜Â·ì¶”ì •)(${cfg.labels.A})`, pct(pa)]);
    rows.push(["ì˜¤ë²„ë¼ìš´ë“œ(ë©”ì¸)", mainOver.toFixed(4)]);
    rows.push(["ë©”ì¸ ë§ˆì§„ íŒì •", `<span class="${marginPillClass(mainMarginPct, rules.mainLow)}">${marginTagText(mainMarginPct, rules.mainLow)}</span>`]);

    copyLines.push(`ë©”ì¸ ë°°ë‹¹(${cfg.labels.H}/${cfg.labels.D}/${cfg.labels.A}): ${h} / ${d} / ${a}`);

    if(level !== "simple"){
      const my = parsePctList(val("myProb"));
      const stake = parseMoney(val("stake"));

      if(my){
        const evH = (my[0]*(h-1) - (1-my[0]));
        const evD = (my[1]*(d-1) - (1-my[1]));
        const evA = (my[2]*(a-1) - (1-my[2]));
        if([evH,evD,evA].some(x=>x>0)) anyEvPos = true;

        rows.push([`ë‚´ ì˜ˆìƒ í™•ë¥ (${cfg.labels.H}/${cfg.labels.D}/${cfg.labels.A})`,
          `${pct(my[0])} / ${pct(my[1])} / ${pct(my[2])}`]);

        rows.push(["EV(í™ˆ/ë¬´/ì›ì •, 1ì›ë‹¹)", `${(evH*100).toFixed(2)}% / ${(evD*100).toFixed(2)}% / ${(evA*100).toFixed(2)}%`]);

        const best = [
          {k:cfg.labels.H, ev:evH, odds:h, p:my[0]},
          {k:cfg.labels.D, ev:evD, odds:d, p:my[1]},
          {k:cfg.labels.A, ev:evA, odds:a, p:my[2]}
        ].sort((x,y)=>y.ev-x.ev)[0];

        rows.push(["ê°€ì¥ ë†’ì€ EV", `${best.k} (${(best.ev*100).toFixed(2)}%)`]);
        if(stake!=null) rows.push(["ê¸°ëŒ€ê°’(EV, ìµœê³  EV ê¸°ì¤€)", money(expectedValue(stake, best.p, best.odds))]);

        if(level === "adv"){
          rows.push(["ê¶Œì¥ ë¹„ì¤‘(ë³´ìˆ˜ì  1/4 Kelly, ìµœê³  EV ê¸°ì¤€)", (quarterKelly(best.p, best.odds)*100).toFixed(1) + "%"]);
          rows.push(["íŒë‹¨", best.ev>0 ? "ë°¸ë¥˜(+EV) ê°€ëŠ¥ì„±" : "ë°¸ë¥˜(-EV) ê°€ëŠ¥ì„±"]);
        }else{
          rows.push(["íŒë‹¨", best.ev>0 ? "ë°¸ë¥˜(+EV) ê°€ëŠ¥ì„±" : "ë°¸ë¥˜(-EV) ê°€ëŠ¥ì„±"]);
        }

        copyLines.push(`ë‚´ ì˜ˆìƒ í™•ë¥ : ${(my[0]*100).toFixed(1)}% / ${(my[1]*100).toFixed(1)}% / ${(my[2]*100).toFixed(1)}%`);
        if(stake!=null) copyLines.push(`ë² íŒ…ê¸ˆ: ${money(stake)}`);
      }else{
        rows.push(["Tip", "ì¤‘ê¸‰/ê³ ê¸‰ì—ì„œëŠ” ë‚´ ì˜ˆìƒ í™•ë¥ (ì˜ˆ: 45,28,27)ì„ ì…ë ¥í•˜ë©´ EVê°€ ê³„ì‚°ë©ë‹ˆë‹¤. (ì„ íƒì‚¬í•­)"]);
      }
    }
  }

  /* ===== ì˜¤ë²„/ì–¸ë” ë§ˆì§„ + ì•„ì‹œì•ˆ ê·¼ì‚¬ ===== */
  let ouOver = null;
  let ouMarginPct = null;

  if(level !== "simple"){
    const tLine = val("totalLine").trim();
    const oOdds = parseOdds(val("overOdds"));
    const uOdds = parseOdds(val("underOdds"));
    const myOver = parsePct(val("myOverProb"));
    const pushInput = parsePct(val("pushProb"));

    if(tLine && oOdds!=null && uOdds!=null){
      const lineNum = Number(String(tLine).replace(/,/g,".").trim());
      const quarter = isFinite(lineNum) && isQuarterLine(lineNum);

      let pushP = 0;
      if(quarter){
        pushP = (pushInput!=null) ? pushInput : approxPushProb(lineNum, sport);
      }

      if(quarter){
        ouOver = asianOuEffectiveOverround(oOdds, uOdds, pushP);
      }else{
        ouOver = (1/oOdds) + (1/uOdds);
      }
      ouMarginPct = overroundToMarginPct(ouOver);

      const pOver = (1/oOdds) / ((1/oOdds)+(1/uOdds));
      const pUnder = (1/uOdds) / ((1/oOdds)+(1/uOdds));

      rows.push([`ì˜¤ë²„/ì–¸ë”(ê¸°ì¤€ ${tLine}) ìŠ¹ë¦¬ í™•ë¥ (ë°°ë‹¹ ê¸°ë°˜Â·ì¶”ì •)`, `ì˜¤ë²„ ${pct(pOver)} / ì–¸ë” ${pct(pUnder)}`]);
      rows.push([`ì˜¤ë²„ë¼ìš´ë“œ(OU)`, ouOver.toFixed(4) + (quarter ? ` (ì•„ì‹œì•ˆ ê·¼ì‚¬, í‘¸ì‹œ ${Math.round(pushP*100)}%)` : "")]);
      rows.push([`OU ë§ˆì§„ íŒì •`, `<span class="${marginPillClass(ouMarginPct, rules.ouLow)}">${marginTagText(ouMarginPct, rules.ouLow)}</span>`]);

      copyLines.push(`ì˜¤ë²„ì–¸ë” ${tLine}: ì˜¤ë²„ ${oOdds} / ì–¸ë” ${uOdds}`);

      if(level === "adv" && myOver!=null){
        const stake = parseMoney(val("stake")) || null;
        const evPer1 = (myOver*(oOdds-1) - (1-myOver));
        if(evPer1>0) anyEvPos = true;

        rows.push([`ë‚´ ì˜ˆìƒ í™•ë¥ (ì˜¤ë²„)`, pct(myOver)]);
        rows.push([`ì˜¤ë²„ EV(1ì›ë‹¹)`, (evPer1*100).toFixed(2) + "%"]);
        if(stake!=null) rows.push([`ì˜¤ë²„ ê¸°ëŒ€ê°’(EV)`, money(expectedValue(stake, myOver, oOdds))]);
        rows.push([`ì˜¤ë²„ ê¶Œì¥ ë¹„ì¤‘(1/4 Kelly)`, (quarterKelly(myOver, oOdds)*100).toFixed(1) + "%"]);
        rows.push([`ì˜¤ë²„ íŒë‹¨`, evPer1>0 ? "ë°¸ë¥˜(+EV) ê°€ëŠ¥ì„±" : "ë°¸ë¥˜(-EV) ê°€ëŠ¥ì„±"]);
      }
    }
  }

  /* ===== í•¸ë””ìº¡ ë§ˆì§„(ì–‘ìª½ ë°°ë‹¹ ì •ë°€) + EV(ê³ ê¸‰) ===== */
  let hcOver = null;
  let hcMarginPct = null;

  if(level !== "simple"){
    const hcLine = val("handicapLine").trim();
    const hcA = parseOdds(val("handicapOddsA"));
    const hcB = parseOdds(val("handicapOddsB"));
    const myHcP = parsePct(val("myHandicapProb"));

    if(hcLine && hcA!=null && hcB!=null){
      hcOver = (1/hcA) + (1/hcB);
      hcMarginPct = overroundToMarginPct(hcOver);

      const pA = (1/hcA) / hcOver;
      const pB = (1/hcB) / hcOver;

      rows.push([`í•¸ë””(${hcLine}) ìŠ¹ë¦¬ í™•ë¥ (ë°°ë‹¹ ê¸°ë°˜Â·ì¶”ì •)`, `ì„ íƒA ${pct(pA)} / ì„ íƒB ${pct(pB)}`]);
      rows.push([`ì˜¤ë²„ë¼ìš´ë“œ(í•¸ë””)`, hcOver.toFixed(4)]);
      rows.push([`í•¸ë”” ë§ˆì§„ íŒì •`, `<span class="${marginPillClass(hcMarginPct, rules.hcLow)}">${marginTagText(hcMarginPct, rules.hcLow)}</span>`]);

      if(level === "adv" && myHcP!=null){
        const stake = parseMoney(val("stake")) || null;
        const hcEVPer1 = (myHcP*(hcA-1) - (1-myHcP));
        if(hcEVPer1>0) anyEvPos = true;

        rows.push([`ë‚´ ì˜ˆìƒ í™•ë¥ (í•¸ë”” ì„ íƒA)`, pct(myHcP)]);
        rows.push([`í•¸ë”” EV(1ì›ë‹¹)`, (hcEVPer1*100).toFixed(2) + "%"]);
        if(stake!=null) rows.push([`í•¸ë”” ê¸°ëŒ€ê°’(EV)`, money(expectedValue(stake, myHcP, hcA))]);
        rows.push([`í•¸ë”” ê¶Œì¥ ë¹„ì¤‘(1/4 Kelly)`, (quarterKelly(myHcP, hcA)*100).toFixed(1) + "%"]);
        rows.push([`í•¸ë”” íŒë‹¨`, hcEVPer1>0 ? "ë°¸ë¥˜(+EV) ê°€ëŠ¥ì„±" : "ë°¸ë¥˜(-EV) ê°€ëŠ¥ì„±"]);
      }
    }
  }

  /* ===== ë§ˆì§„ ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸ ===== */
  updateMarginDash(mainMarginPct, ouMarginPct, hcMarginPct);

  /* ===== +EV í”Œë˜ê·¸ ì €ì¥ (index ìë™ í•„í„°ìš©) ===== */
  setEVFlag(anyEvPos);

  /* ===== ê²°ê³¼ ë Œë” ===== */
  renderResult(cfg.name, level, rows, copyLines);

  /* ===== íˆìŠ¤í† ë¦¬ ì €ì¥(ìµœê·¼ ê³„ì‚°) ===== */
  if(!silentHistory){
    const now = new Date();
    const itemId = "h_" + now.getTime();

    const mainTagObj = buildTag("main", mainMarginPct, rules.mainLow);
    const ouTagObj   = buildTag("ou",   ouMarginPct,   rules.ouLow);
    const hcTagObj   = buildTag("hc",   hcMarginPct,   rules.hcLow);

    const summaryText = buildSummaryText(cfg, level, mainMarginPct, ouMarginPct, hcMarginPct, anyEvPos);

    addHistory({
      id: itemId,
      date: todayISO(),
      time: now.getTime(),
      timeText: now.toLocaleString(),
      title: `${cfg.name} Â· ${levelLabel(level)}${league?(" Â· "+league):""}${teams?(" Â· "+teams):""}`,
      payload: snapshotInputs(),
      main: mainTagObj,
      ou: ouTagObj,
      hc: hcTagObj,
      summaryText
    });

    renderHistory();
    renderTop3All();
  }

  saveState();
}

/* ìŠ¤ëƒ…ìƒ· */
function snapshotInputs(){
  return {
    sport: val("sport"),
    level: val("level"),
    league: val("league"),
    teams: val("teams"),
    main2OddsA: val("main2OddsA"),
    main2OddsB: val("main2OddsB"),
    main3OddsH: val("main3OddsH"),
    main3OddsD: val("main3OddsD"),
    main3OddsA: val("main3OddsA"),
    myProb: val("myProb"),
    stake: val("stake"),
    totalLine: val("totalLine"),
    overOdds: val("overOdds"),
    underOdds: val("underOdds"),
    myOverProb: val("myOverProb"),
    pushProb: val("pushProb"),
    handicapLine: val("handicapLine"),
    handicapOddsA: val("handicapOddsA"),
    handicapOddsB: val("handicapOddsB"),
    myHandicapProb: val("myHandicapProb")
  };
}

function buildTag(kind, mPct, low){
  if(mPct==null || !isFinite(mPct)) return { tag:"-", tagClass:"", marginPct:null };
  const cls = marginPillClass(mPct, low);
  const tagClass = cls === "m-good" ? "tag-good" : (cls==="m-ok" ? "tag-mid" : "tag-bad");
  return { tag: marginTagText(mPct, low), tagClass, marginPct:mPct };
}
function buildSummaryText(cfg, level, mainPct, ouPct, hcPct, anyEv){
  const parts = [];
  if(isFinite(mainPct)) parts.push(`ë©”ì¸ ${mainPct.toFixed(2)}%`);
  if(isFinite(ouPct)) parts.push(`OU ${ouPct.toFixed(2)}%`);
  if(isFinite(hcPct)) parts.push(`í•¸ë”” ${hcPct.toFixed(2)}%`);
  const evTxt = anyEv ? " +EV ê°ì§€" : "";
  return `${cfg.name}(${levelLabel(level)}) Â· ${parts.join(" / ") || "ë§ˆì§„ ì…ë ¥ í•„ìš”"}${evTxt}`;
}

/* ë§ˆì§„ ëŒ€ì‹œë³´ë“œ ì¶œë ¥ */
function updateMarginDash(mainPct, ouPct, hcPct){
  const rules = getMarginRules();

  setDash("mMainPill","mMainVal","mMainSub", mainPct, rules.mainLow, "ë©”ì¸ ë§ˆì§„(%)");
  setDash("mOuPill","mOuVal","mOuSub", ouPct, rules.ouLow, "OU ë§ˆì§„(%)");
  setDash("mHcPill","mHcVal","mHcSub", hcPct, rules.hcLow, "í•¸ë”” ë§ˆì§„(%)");
}
function setDash(pillId, valId, subId, mPct, low, label){
  const pill = $(pillId);
  const valEl = $(valId);
  const sub = $(subId);

  if(mPct==null || !isFinite(mPct)){
    pill.className = "m-pill";
    pill.innerText = "ì…ë ¥ í•„ìš”";
    valEl.innerText = "-";
    sub.innerText = `${label} Â· ê¸°ì¤€(ë§ˆì§„ ë‚®ìŒ): ${low.toFixed(1)}% ì´í•˜`;
    return;
  }

  const cls = marginPillClass(mPct, low);
  pill.className = "m-pill " + cls;
  pill.innerText = (mPct <= low) ? "ë§ˆì§„ ë‚®ìŒ" : (mPct <= low + 3 ? "ë³´í†µ" : "ê³ ë§ˆì§„");

  valEl.innerText = mPct.toFixed(2) + "%";
  sub.innerText = `${label} Â· ê¸°ì¤€(ë§ˆì§„ ë‚®ìŒ): ${low.toFixed(1)}% ì´í•˜`;
}

/* ê²°ê³¼ ë Œë” */
function renderResult(sportName, level, rows, copyLines){
  const box = $("result");
  const html = rows.map(([k,v])=>{
    const isJudgement = String(k).includes("íŒë‹¨");
    const cls = isJudgement ? (String(v).includes("-EV") ? "warn" : "good") : "";
    return `<div class="kv"><div class="k">${k}</div><div class="v ${cls}">${v}</div></div>`;
  }).join("");

  box.innerHTML = `
    <div style="font-weight:900;margin-bottom:6px;">${sportName} Â· ${levelLabel(level)} ê²°ê³¼</div>
    ${html}
    <hr class="sep">
    <div style="font-size:12px;color:#9a9a9a;line-height:1.5;">
      â€» â€œìŠ¹ë¦¬ í™•ë¥ (ë°°ë‹¹ ê¸°ë°˜Â·ì¶”ì •)â€ì€ ë°°ë‹¹ì˜ ì—­ìˆ˜ë¥¼ ì •ê·œí™”í•´ í•©ì´ 100%ê°€ ë˜ë„ë¡ ë§Œë“  ê°’ì…ë‹ˆë‹¤.<br>
      â€» EV/ë¹„ì¤‘ì€ ì‚¬ìš©ìê°€ ì…ë ¥í•œ â€œë‚´ ì˜ˆìƒ í™•ë¥ â€ ê¸°ë°˜ì˜ ì°¸ê³  ì§€í‘œì´ë©° ìŠ¹ë¥ ì„ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
    </div>
  `;
  box.style.display = "block";

  copyLines.push(`ì£¼ì†Œ: https://88st.cloud/analysis`);
  LAST_TEXT = copyLines.join("\n") + "\n\n" + rows.map(r=>`${r[0]}: ${r[1]}`).join("\n");
}

function showError(msg){
  const box = $("result");
  box.innerHTML = `<div class="kv"><div class="k">ì•ˆë‚´</div><div class="v warn">${msg}</div></div>`;
  box.style.display = "block";
  LAST_TEXT = `[88 ì»¤ë®¤ë‹ˆí‹°] ì•ˆë‚´\n${msg}\nì£¼ì†Œ: https://88st.cloud/analysis`;
}
function hideResult(){
  const box = $("result");
  box.style.display = "none";
  box.innerHTML = "";
  LAST_TEXT = "";
}

function resetAll(){
  [
    "league","teams",
    "main2OddsA","main2OddsB","main3OddsH","main3OddsD","main3OddsA",
    "myProb","stake",
    "handicapLine","handicapOddsA","handicapOddsB","myHandicapProb",
    "totalLine","overOdds","underOdds","myOverProb","pushProb"
  ].forEach(id=>{ const el=$(id); if(el) el.value=""; });

  hideResult();
  try{ localStorage.removeItem(LS_KEY); }catch(e){}
  updateMarginDash(null,null,null);
  toast("ì…ë ¥ì„ ì´ˆê¸°í™”í–ˆìŠµë‹ˆë‹¤.");
}

/* ê³µìœ /ë³µì‚¬ */
async function copyResult(){
  if(!LAST_TEXT) return showError("ë¨¼ì € 'ê³„ì‚°í•˜ê¸°'ë¥¼ ëˆŒëŸ¬ ê²°ê³¼ë¥¼ ë§Œë“  ë’¤ ë³µì‚¬í•  ìˆ˜ ìˆì–´ìš”.");
  try{
    await navigator.clipboard.writeText(LAST_TEXT);
    toast("ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.");
  }catch(e){
    prompt("ì•„ë˜ ë‚´ìš©ì„ ë³µì‚¬í•˜ì„¸ìš”:", LAST_TEXT);
  }
}
async function shareResult(){
  if(!LAST_TEXT) return showError("ë¨¼ì € 'ê³„ì‚°í•˜ê¸°'ë¥¼ ëˆŒëŸ¬ ê²°ê³¼ë¥¼ ë§Œë“  ë’¤ ê³µìœ í•  ìˆ˜ ìˆì–´ìš”.");
  try{
    if(navigator.share){
      await navigator.share({ title:"88 ì»¤ë®¤ë‹ˆí‹° ë¶„ì„ ê²°ê³¼", text: LAST_TEXT });
    }else{
      await copyResult();
    }
  }catch(e){}
}

/* í† ìŠ¤íŠ¸ */
let toastTimer=null;
function toast(msg){
  let el=document.getElementById("toast88");
  if(!el){
    el=document.createElement("div");
    el.id="toast88";
    el.style.cssText="position:fixed;left:50%;bottom:22px;transform:translateX(-50%);background:rgba(0,0,0,.85);color:#fff;padding:10px 12px;border-radius:12px;font-size:12px;z-index:3000;border:1px solid rgba(255,255,255,.08)";
    document.body.appendChild(el);
  }
  el.textContent=msg;
  el.style.opacity="1";
  if(toastTimer) clearTimeout(toastTimer);
  toastTimer=setTimeout(()=>{ el.style.opacity="0"; }, 1400);
}

/* ì´ˆê¸° êµ¬ë™ */
function boot(){
  loadState();
  if(!localStorage.getItem(LS_KEY)){
    setVal("sport","soccer");
    setVal("level","simple");
  }
  onSportChange(true);
  onLevelChange(true);

  renderHistory();
  renderTop3All();
  updateMarginDash(null,null,null);
}
boot();
</script>
</body>
</html>
